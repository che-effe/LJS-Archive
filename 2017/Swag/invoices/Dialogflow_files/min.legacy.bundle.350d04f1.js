function _resamplerJs(){function e(e,t,n,i,a){this.fromSampleRate=e,this.toSampleRate=t,this.channels=0|n,this.outputBufferSize=i,this.noReturn=!!a,this.initialize()}e.prototype.initialize=function(){if(this.fromSampleRate<=0||this.toSampleRate<=0||this.channels<=0)throw new Error("Invalid settings specified for the resampler.");this.fromSampleRate==this.toSampleRate?(this.resampler=this.bypassResampler,this.ratioWeight=1):(this.resampler=function(e){var t=Math.min(e.length,this.outputBufferSize);if(t%this.channels!=0)throw new Error("Buffer was of incorrect sample length.");if(t<=0)return this.noReturn?0:[];for(var n=0,i=new Array(this.channels),a=0;a<this.channels;++a)i[a]=0;var r=0,o=0,s=!this.tailExists;this.tailExists=!1;var l=this.outputBuffer,c=0,d=0,u=this.ratioWeight;do{if(s)for(n=u,a=0;a<this.channels;++a)i[a]=0;else{for(n=this.lastWeight,a=0;a<this.channels;++a)i[a]=this.lastOutput[a];s=!0}for(;n>0&&r<t;){if(o=1+r-d,!(n>=o)){for(a=0;a<this.channels;++a)i[a]+=e[r+(a>0?a:0)]*n;d+=n,n=0;break}for(a=0;a<this.channels;++a)i[a]+=e[r++]*o;d=r,n-=o}if(0!=n){for(this.lastWeight=n,a=0;a<this.channels;++a)this.lastOutput[a]=i[a];this.tailExists=!0;break}for(a=0;a<this.channels;++a)l[c++]=i[a]/u}while(r<t);return this.bufferSlice(c)},this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.tailExists=!1,this.lastWeight=0,this.initializeBuffers())},e.prototype.bypassResampler=function(e){return this.noReturn?(this.outputBuffer=e,e.length):e},e.prototype.bufferSlice=function(e){if(this.noReturn)return e;try{return this.outputBuffer.subarray(0,e)}catch(t){try{return this.outputBuffer.length=e,this.outputBuffer}catch(t){return this.outputBuffer.slice(0,e)}}},e.prototype.initializeBuffers=function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(e){this.outputBuffer=[],this.lastOutput=[]}},navigator.Resampler=e}function _recorderWorkerJs(){function e(e){new Function(e.resamplerInitializerBody)(),l=e.sampleRate,c=new navigator.Resampler(l,16e3,1,51200)}function t(e){u.push(e[0]),d+=e[0].length}function n(e){var t=r(u,d),n=c.resampler(t),i=s(n),a=new Blob([i],{type:e});this.postMessage(a)}function i(){var e=[];e.push(r(u,d)),this.postMessage(e)}function a(){d=0,u=[]}function r(e,t){for(var n=new Float32Array(t),i=0,a=0;a<e.length;a++)n.set(e[a],i),i+=e[a].length;return n}function o(e,t,n){for(var i=0;i<n.length;i++,t+=2){var a=Math.max(-1,Math.min(1,n[i]));e.setInt16(t,a<0?32768*a:32767*a,!0)}}function s(e){var t=new ArrayBuffer(2*e.length),n=new DataView(t);return o(n,0,e),n}var l,c,d=0,u=[];this.onmessage=function(r){switch(r.data.command){case"init":e(r.data.config);break;case"record":t(r.data.buffer);break;case"export16kMono":n(r.data.type);break;case"getBuffer":i();break;case"clear":a()}}}"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="monospaced.elastic"),angular.module("monospaced.elastic",[]).constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(e,t,n){"use strict";return{require:"ngModel",restrict:"A, C",link:function(i,a,r,o){function s(){var e=v;g=d,w=getComputedStyle(d),angular.forEach(T,function(t){e+=t+":"+w.getPropertyValue(t)+";"}),y.setAttribute("style",e)}function l(){var t,n,a,r,o;g!==d&&s(),m||(m=!0,y.value=d.value+f,y.style.overflowY=d.style.overflowY,t=""===d.style.height?"auto":parseInt(d.style.height,10),n=getComputedStyle(d).getPropertyValue("width"),"px"===n.substr(n.length-2,2)&&(r=parseInt(n,10)-$.width,y.style.width=r+"px"),a=y.scrollHeight,a>A?(a=A,o="scroll"):a<E&&(a=E),a+=$.height,d.style.overflowY=o||"hidden",t!==a&&(i.$emit("elastic:resize",u,t,a),d.style.height=a+"px"),e(function(){m=!1},1,!1))}function c(){m=!1,l()}var d=a[0],u=a;if("TEXTAREA"===d.nodeName&&t.getComputedStyle){u.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var p=d.value;d.value="",d.value=p;var g,m,f=r.msdElastic?r.msdElastic.replace(/\\n/g,"\n"):n.append,h=angular.element(t),v="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",b=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+v+'"/>').data("elastic",!0),y=b[0],w=getComputedStyle(d),k=w.getPropertyValue("resize"),C="border-box"===w.getPropertyValue("box-sizing")||"border-box"===w.getPropertyValue("-moz-box-sizing")||"border-box"===w.getPropertyValue("-webkit-box-sizing"),$=C?{width:parseInt(w.getPropertyValue("border-right-width"),10)+parseInt(w.getPropertyValue("padding-right"),10)+parseInt(w.getPropertyValue("padding-left"),10)+parseInt(w.getPropertyValue("border-left-width"),10),height:parseInt(w.getPropertyValue("border-top-width"),10)+parseInt(w.getPropertyValue("padding-top"),10)+parseInt(w.getPropertyValue("padding-bottom"),10)+parseInt(w.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},S=parseInt(w.getPropertyValue("min-height"),10),x=parseInt(w.getPropertyValue("height"),10),E=Math.max(S,x)-$.height,A=parseInt(w.getPropertyValue("max-height"),10),T=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];u.data("elastic")||(A=A&&A>0?A:9e4,y.parentNode!==document.body&&angular.element(document.body).append(y),u.css({resize:"none"===k||"vertical"===k?"none":"horizontal"}).data("elastic",!0),d.oninput="onpropertychange"in d&&"oninput"in d?d.onkeyup=l:l,h.bind("resize",c),i.$watch(function(){return o.$modelValue},function(e){c()}),i.$on("elastic:adjust",function(){s(),c()}),e(l,0,!1),i.$on("$destroy",function(){b.remove(),h.unbind("resize",c)}))}}}}]),_resamplerJs(),function(){function e(e,i){var a=i||{},r=a.bufferLen||4096;this.context=e.context,this.node=this.context.createScriptProcessor(r,1,1);var o=new Worker(t());o.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,resamplerInitializerBody:n(_resamplerJs)}});var s,l=!1;this.node.onaudioprocess=function(e){l&&o.postMessage({command:"record",buffer:[e.inputBuffer.getChannelData(0)]})},this.configure=function(e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])},this.record=function(){l=!0},this.stop=function(){l=!1},this.clear=function(){o.postMessage({command:"clear"})},this.getBuffer=function(e){s=e||a.callback,o.postMessage({command:"getBuffer"})},this.export16kMono=function(e,t){if(s=e||a.callback,t=t||a.type||"audio/raw",!s)throw new Error("Callback not set");o.postMessage({command:"export16kMono",type:t})},o.onmessage=function(e){s(e.data)},e.connect(this.node),this.node.connect(this.context.destination)}function t(){return(window.URL&&URL.createObjectURL.bind(URL)||window.webkitURL&&webkitURL.createObjectURL.bind(webkitURL)||window.createObjectURL)(new Blob([n(_recorderWorkerJs)],{type:"text/javascript"}))}function n(e){if("function"!=typeof e)throw new Error("Illegal argument exception: argument is not a funtion: "+e);var t=e.toString(),n=t.indexOf("{"),i=t.lastIndexOf("}");return n>0&&i>0?t.substring(n+1,i):t}window.Recorder=e}(),function(){function e(e){this.chunkSize=e,this.array_data=[],this.callback=null}window.AudioContext=window.AudioContext||window.webkitAudioContext,AudioContext.prototype.createResampleProcessor=function(e,t,n,i){var a=this.createScriptProcessor(e,t,n),r=new navigator.Resampler(this.sampleRate,i,t,e,!0);return a.onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),i=r.resampler(t),a=0;a<i;++a)n[a]=r.outputBuffer[a]},a},e.prototype.push=function(e){for(var t=e.length,n=new Array(Math.ceil(t/2)),i=0;i<t;i+=2)n[i/2]=e[i];Array.prototype.push.apply(this.array_data,n),this.process()},e.prototype.process=function(){for(var e;this.array_data.length>this.chunkSize;)e=this.array_data.splice(0,this.chunkSize),this.callback&&this.callback(e)},e.prototype.drop=function(){this.array_data.splice(0,this.array_data.length)},AudioContext.prototype.createEndOfSpeechProcessor=function(t){var n=this.createScriptProcessor(t,1,1);n.endOfSpeechCallback=null;var i=new VAD;n.vad=i;var a=new e(160);return a.callback=function(e){"CONTINUE"!==i.process(e)&&n.endOfSpeechCallback&&(n.endOfSpeechCallback(),a.drop())},n.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0);a.push(t);for(var i=0;i<t.length;i++)n[i]=t[i]},n}}(),function(){function e(){this.reset()}e.prototype.process=function(e){var t=this.frameActive(e);if(this.time=160*this.frameNumber/16e3,t)this.lastActiveTime>=0&&this.time-this.lastActiveTime<this.silenceLengthMilis?++this.sequenceCounter>=this.minSequenceCount&&(this.lastSequenceTime=this.time,this.silenceLengthMilis=Math.max(this.minSilenceLengthMilis,this.silenceLengthMilis-(this.maxSilenceLengthMilis-this.minSilenceLengthMilis)/4)):this.sequenceCounter=1,this.lastSequenceTime=this.time;else if(this.time-this.lastSequenceTime>this.silenceLengthMilis)return this.lastSequenceTime>0?"TERMINATE":"NO_SPEECH";return"CONTINUE"},e.prototype.frameActive=function(e){for(var t=0,n=0,i=0,a=e.length,r=0;r<a;r++){t+=e[r]*e[r]/160;var o=0;o=e[r]>0?1:-1,0!=i&&o!=i&&n++,i=o}this.frameNumber+=1;var s=!1;return this.frameNumber<this.noiseFrames?(this.noiseEnergy+=t/this.noiseFrames,console.log("noiseEnergy=",this.noiseEnergy)):n>=this.minCZ&&n<=this.maxCZ&&t>Math.max(.01,this.noiseEnergy)*this.energyFactor&&(s=!0),s},e.prototype.reset=function(){this.minCZ=5,this.maxCZ=15,this.frameLengthMilis=10,this.maxSilenceLengthMilis=3.5,this.minSilenceLengthMilis=.8,this.silenceLengthMilis=this.maxSilenceLengthMilis,this.sequenceLengthMilis=.03,this.minSequenceCount=3,this.energyFactor=3.1,this.noiseFrames=Math.round(150/this.frameLengthMilis),this.noiseEnergy=0,this.frameNumber=0,this.lastActiveTime=-1,this.lastSequenceTime=0,this.sequenceCounter=0,this.time=0},window.VAD=e}(),function(){function e(e,t,n){if(!e||!t)throw"Illegal TTS arguments: server and access_token are required.";if(this.access_token=t,this.server=e,n)this.audio_context=n;else{var i=window.AudioContext||window.webkitAudioContext;this.audio_context=new i}}e.prototype.tts=function(e,t){function n(e,t){function n(e){console.log("play speech...");var n=r.createBufferSource();n.buffer=e,n.connect(r.destination),n.onended=t,n.start(0)}function a(e){console.log("TTS decodeAudioData error is",e)}var r=i.audio_context;r.decodeAudioData(e,n,a)}if(e){var i=this;e=encodeURIComponent(encodeURIComponent(e));var a="onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest,r=new a;r.open("GET","http://"+i.server+"/api/tts?access_token="+i.access_token+"&lang=en-US&text="+e,!0),r.responseType="arraybuffer",r.onload=function(e){n(this.response,t)},r.onerror=function(e){console.log("HttpRequest: Status:",this.status,"Reason:",e)},r.send()}},window.TTS=e}(),function(){function e(e){function i(){}var a=e||{},r=this;r.server=a.server||"",r.token=a.token||"",r.sessionId=a.sessionId||"",r.contentType=a.contentType||t,r.readingInterval=a.readingInterval||n,r.onOpen=a.onOpen&&a.onOpen.bind(r)||i,r.onClose=a.onClose&&a.onClose.bind(r)||i,r.onInit=a.onInit&&a.onInit.bind(r)||i,r.onStartListening=a.onStartListening&&a.onStartListening.bind(r)||i,r.onStopListening=a.onStopListening&&a.onStopListening.bind(r)||i,r.onResults=a.onResults&&a.onResults.bind(r)||i,r.onEvent=a.onEvent&&a.onEvent.bind(r)||i,r.onError=a.onError&&a.onError.bind(r)||i}var t="content-type=audio/x-raw,+layout=(string)interleaved,+rate=(int)16000,+format=(string)S16LE,+channels=(int)1",n=250,i=2,a=3,r=4,o=5,s=8,l=9,c=10;e.prototype.init=function(){function e(e,n){t.mediaStreamSource=t.audio_context.createMediaStreamSource(n),t.onEvent(2,"Media stream created"),window.userSpeechAnalyser=t.audio_context.createAnalyser(),t.mediaStreamSource.connect(window.userSpeechAnalyser),t.recorder=new Recorder(t.mediaStreamSource),t.onEvent(3,"Recorder initialized"),e&&e()}var t=this;t.onEvent(1,"Waiting for approval to access your microphone ...");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.URL=window.URL||window.webkitURL,t.audio_context=new AudioContext}catch(e){t.onError(o,"Error initializing Web Audio browser: "+JSON.stringify(e))}navigator.getUserMedia?navigator.getUserMedia({audio:!0},e.bind(null,t.onInit),function(e){t.onError(o,"No live audio input in this browser: "+JSON.stringify(e))}):t.onError(o,"No user media support")},e.prototype.isInitialise=function(){return!!this.recorder},e.prototype.sendJson=function(e){this._socketSend(JSON.stringify(e)),this._socketSend("EOS")},e.prototype.startListening=function(){var e=this,t=e.recorder;return t?e.ws?(function(t){e.resample_processor=e.audio_context.createResampleProcessor(256,1,1,16e3),e.mediaStreamSource.connect(e.resample_processor);var n=e.audio_context.createEndOfSpeechProcessor(256);n.endOfSpeechCallback=t,e.resample_processor.connect(n)}(function(){e.stopListening()}),e.ws.send("{'timezone':'America/New_York', 'lang':'en', 'sessionId':'"+e.sessionId+"'}"),e.intervalKey=setInterval(function(){t.export16kMono(function(n){e._socketSend(n),t.clear()},"audio/x-raw")},e.readingInterval),t.record(),void e.onStartListening()):void e.onError(a,"No web socket connection"):void e.onError(a,"Recorder undefined")},e.prototype.stopListening=function(){var e=this;e.resample_processor&&e.resample_processor.disconnect(),clearInterval(e.intervalKey);var t=e.recorder;if(!t)return void e.onError(a,"Recorder undefined");t.stop(),e.onEvent(11,"Stopped recording"),t.export16kMono(function(n){e._socketSend(n),e._socketSend("EOS"),t.clear()},"audio/x-raw"),e.onStopListening()},e.prototype.isOpen=function(){return!!this.ws},e.prototype.open=function(){function e(){if(!t.recorder)return void t.onError(a,"Recorder undefined");t.ws&&t.close();try{t.ws=function(){var e=t.server+"?"+t.contentType+"&access_token="+t.token,n=new WebSocket(e);return n.onmessage=function(e){var n=e.data;t.onEvent(s,n),n instanceof Object&&!(n instanceof Blob)?t.onError(r,"WebSocket: onEvent: got Object that is not a Blob"):n instanceof Blob?t.onError(r,"WebSocket: got Blob"):t.onResults(JSON.parse(n))},n.onopen=function(e){t.onOpen(),t.onEvent(l,e)},n.onclose=function(e){t.onClose(),t.onEvent(c,e.code+"/"+e.reason+"/"+e.wasClean)},n.onerror=function(e){t.onError(i,JSON.stringify(e.data))},n}()}catch(e){t.onError(o,"No web socket support in this browser!")}}var t=this;this.recorder?e():this.init(e)},e.prototype.close=function(){var e=this;clearInterval(e.intervalKey),e.recorder&&(e.recorder.stop(),e.recorder.clear(),e.onEvent(11,"Stopped recording")),e.ws&&(e.ws.close(),e.ws=null)},e.prototype._socketSend=function(e){var t=this;if(!t.ws)return void t.onError(o,"No web socket connection: failed to send: "+e);var n=t.ws.readyState;if(1!=n){var a="WebSocket: ";switch(n){case 0:a+="The connection is not yet open.";break;case 2:a+="The connection is in the process of closing.";break;case 3:a+="The connection is closed or couldn't be opened."}a+=" readyState="+n+" (!=1) failed to send: "+e,t.onError(i,a)}e instanceof Blob?e.size>0?(t.ws.send(e),t.onEvent(5,"Send: blob: "+e.type+", "+e.size)):t.onEvent(6,"Send: blob: "+e.type+", EMPTY"):(t.ws.send(e),t.onEvent(7,"Send string: "+e))},window.ApiAi=e}(),function(e){function t(t){u.html(e.trim(t))}function n(e){p.html(e)}function i(){t(""),n("")}function a(e){d.css({width:e+2*g})}function r(e,t){return["//www.youtube.com/embed/",e,"?rel=0&showsearch=0&autohide=",t.autohide,"&autoplay=",t.autoplay,"&controls=",t.controls,"&fs=",t.fs,"&loop=",t.loop,"&showinfo=",t.showinfo,"&color=",t.color,"&theme=",t.theme,"&wmode=transparent"].join("")}function o(e,t,n){return['<iframe title="YouTube video player" width="',t,'" height="',n,'" ','style="margin:0; padding:0; box-sizing:border-box; border:0; -webkit-border-radius:5px; -moz-border-radius:5px; border-radius:5px; margin:',g-1,'px;" ','src="',e,'" frameborder="0" allowfullscreen seamless></iframe>'].join("")}function s(n){var i=["https://gdata.youtube.com/feeds/api/videos/",n,"?v=2&alt=json"].join("");e.ajax({url:i,dataType:"jsonp",cache:!0,success:function(e){t(e.entry.title.$t)}})}function l(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);return!(!t||11!=t[2].length)&&t[2]}var c=null,d=null,u=null,p=null,g=5,m={init:function(g){if(g=e.extend({},e.fn.YouTubeModal.defaults,g),null==c){c=e('<div class="modal fade '+g.cssClass+'" id="YouTubeModal" role="dialog" aria-hidden="true">');c.html('<div class="modal-dialog" id="YouTubeModalDialog"><div class="modal-content" id="YouTubeModalContent"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title" id="YouTubeModalTitle"></h4></div><div class="modal-body" id="YouTubeModalBody" style="padding:0;"></div></div></div>').hide().appendTo("body"),d=e("#YouTubeModalDialog"),u=e("#YouTubeModalTitle"),p=e("#YouTubeModalBody"),c.modal({show:!1}).on("hide.bs.modal",i)}return this.each(function(){var i=e(this);i.data("YouTube")||(i.data("YouTube",{target:i}),e(i).bind("click.YouTubeModal",function(){var d=g.youtubeId;""==e.trim(d)&&i.is("a")&&(d=l(i.attr("href"))),""!=e.trim(d)&&!1!==d||(d=i.attr(g.idAttribute));var u=e.trim(g.title);return""==u&&(g.useYouTubeTitle?s(d):u=i.attr("title")),u&&t(u),a(g.width),n(o(r(d,g),g.width,g.height)),c.modal("show"),!1}))})},destroy:function(){return this.each(function(){e(this).unbind(".YouTubeModal").removeData("YouTube")})}};e.fn.YouTubeModal=function(t){return m[t]?m[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on Bootstrap.YouTubeModal"):m.init.apply(this,arguments)},e.fn.YouTubeModal.defaults={youtubeId:"",title:"",useYouTubeTitle:!0,idAttribute:"rel",cssClass:"YouTubeModal",width:640,height:480,autohide:2,autoplay:1,color:"red",controls:1,fs:1,loop:0,showinfo:0,theme:"light"}}(jQuery),function(){"use strict";function e(){function e(e,t,n){var i=t&&n||0,a=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){a<16&&(t[i+a++]=o[e])});a<16;)t[i+a++]=0;return t}function t(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}function n(e,n,i){var a=n&&i||0,r=n||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:d,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),l=void 0!==e.nsecs?e.nsecs:p+1,g=s-u+(l-p)/1e4;if(g<0&&void 0===e.clockseq&&(o=o+1&16383),(g<0||s>u)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=s,p=l,d=o,s+=122192928e5;var m=(1e4*(268435455&s)+l)%4294967296;r[a++]=m>>>24&255,r[a++]=m>>>16&255,r[a++]=m>>>8&255,r[a++]=255&m;var f=s/4294967296*1e4&268435455;r[a++]=f>>>8&255,r[a++]=255&f,r[a++]=f>>>24&15|16,r[a++]=f>>>16&255,r[a++]=o>>>8|128,r[a++]=255&o;for(var h=e.node||c,v=0;v<6;v++)r[a+v]=h[v];return n||t(r)}function i(e,n,i){var r=n&&i||0;"string"==typeof e&&(n="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var s=0;s<16;s++)n[r+s]=o[s];return n||t(o)}for(var a=function(){var e=new Array(16);return function(){for(var t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),e[n]=t>>>((3&n)<<3)&255;return e}}(),r=[],o={},s=0;s<256;s++)r[s]=(s+256).toString(16).substr(1),o[r[s]]=s;var l=a(),c=[1|l[0],l[1],l[2],l[3],l[4],l[5]],d=16383&(l[6]<<8|l[7]),u=0,p=0;return{v1:n,v4:i,parse:e,unparse:t}}angular.module("ng-uuid",[]).factory("uuid",e)}(),function(e){e.fn.progressInitialize=function(){return this.each(function(){function t(e){r.filter(".background-horizontal,.background-bar").width(e+"%"),r.filter(".background-vertical").height(e+"%")}var n=e(this),i=0,a=e.extend({type:"background-horizontal",loading:"Loading..",finished:"Done!",cancelled:"Cancelled",recoverytime:2,aftertime:2},n.data());n.attr({"data-loading":a.loading,"data-finished":a.finished,"data-cancelled":a.cancelled});var r=e('<span class="tz-bar '+a.type+'">').appendTo(n);n.on("progress",function(e,o,s,l,c){n.hasClass("in-progress")||(r.show(),i=0,n.removeClass("finished").addClass("in-progress")),s?i=o:i+=o,i>=100&&(i=100),l&&(n.removeClass("in-progress").addClass("finished"),r.delay(1e3*a.aftertime).fadeOut(function(){n.trigger("progress-finish"),t(0),window.setTimeout(function(){n.removeClass("finished")},1e3*a.recoverytime)})),c&&(n.removeClass("in-progress").addClass("cancelled"),r.delay(1e3*a.aftertime).fadeOut(function(){n.trigger("progress-cancel"),t(0),window.setTimeout(function(){n.removeClass("cancelled")},1e3*a.recoverytime)})),t(i)})})},e.fn.progressStart=function(){var e=this.first(),t=(new Date).getTime();if(e.hasClass("in-progress"))return this;e.on("progress",function(){t=(new Date).getTime()});var n=window.setInterval(function(){(new Date).getTime()>2e3+t&&e.progressIncrement(5)},500);return e.on("progress-finish",function(){window.clearInterval(n)}),e.progressIncrement(10)},e.fn.progressFinish=function(){return this.first().progressSet(100)},e.fn.progressIncrement=function(e){return e=e||10,this.first().trigger("progress",[e]),this},e.fn.progressSet=function(e){e=e||10;var t=!1;return e>=100&&(t=!0),this.first().trigger("progress",[e,!0,t])},e.fn.progressTimed=function(t,n){var i=this.first(),a=i.find(".tz-bar");if(i.is(".in-progress"))return this;a.css("transition",t+"s linear"),i.progressSet(99),window.setTimeout(function(){a.css("transition",""),i.progressFinish(),e.isFunction(n)&&n()},1e3*t)},e.fn.progressCancel=function(){return this.first().trigger("progress",[100,!0,!1,!0])}}(jQuery),function(){"use strict";angular.module("ngTextcomplete",[]).factory("utils",[function(){function e(e){var n,i;return n=function(){i=!1},function(){var a;i||(i=!0,a=t(arguments),a.unshift(n),e.apply(this,a))}}function t(e){return Array.prototype.slice.call(e)}function n(e,t){return e.bind?e.bind(t):function(){e.apply(t,arguments)}}function i(e){var t={};return function(n,i){t[n]?i(t[n]):e.call(this,n,function(e){t[n]=(t[n]||[]).concat(e),i.apply(null,arguments)})}}function a(e,t){var n,i;if(e.indexOf)return-1!=e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return!0;return!1}return{lock:e,toArray:t,bind:n,getStyles:function(){var e;return e=$("<div></div>").css(["color"]).color,void 0!==e?function(e,t){return e.css(t)}:function(e,t){var n;return n={},angular.forEach(t,function(t){n[t]=e.css(t)}),n}}(),memoize:i,include:a}}]).factory("Completer",["ListView","utils","$rootScope",function(e,t,n){function i(n,i){var r,o,s;o=l.clone(),this.el=n.get(0),this.$el=n,r=a(this.$el),s=this.el===document.activeElement,this.$el.wrap(r).before(o),s&&this.el.focus(),this.listView=new e(o,this),this.strategies=i,this.$el.on("keyup",t.bind(this.onKeyup,this)),this.$el.on("keydown",t.bind(this.listView.onKeydown,this.listView)),$(document).on("click",t.bind(function(e){e.originalEvent&&!e.originalEvent.keepTextCompleteDropdown&&this.listView.deactivate()},this))}function a(e){return s.css("display",e.css("display"))}var r,o,s,l;return r={wrapper:'<div class="textcomplete-wrapper"></div>',list:'<ul class="dropdown-menu"></ul>'},o={wrapper:{position:"relative"},list:{position:"absolute",top:0,left:0,zIndex:"100",display:"none"}},s=$(r.wrapper).css(o.wrapper),l=$(r.list).css(o.list),angular.extend(i.prototype,{renderList:function(e){this.clearAtNext&&(this.listView.clear(),this.clearAtNext=!1),e.length&&(this.listView.shown||(this.listView.setPosition(this.getCaretPosition()).clear().activate(),this.listView.strategy=this.strategy),e=e.slice(0,this.strategy.maxCount),this.listView.render(e)),this.listView.data&&this.listView.data.length||!this.listView.shown||this.listView.deactivate()},searchCallbackFactory:function(e){var t=this;return function(n,i){t.renderList(n),i||(e(),t.clearAtNext=!0)}},onKeyup:function(e){var t,n;if(t=this.extractSearchQuery(this.getTextFromHeadToCaret()),t.length){if(n=t[1],this.term===n)return;this.term=n,this.search(t)}else this.term=null,this.listView.deactivate()},onSelect:function(e,t){var i,a,r;if(i=this.getTextFromHeadToCaret(),"true"===this.el.contentEditable||(a=this.el.value.substring(this.el.selectionEnd)),r=this.strategy.replace(e),angular.isArray(r)&&(a=r[1]+a,r=r[0]),this.strategy.match)i=i.replace(this.strategy.match,r);else if(this.strategy.parseFn){var o=this.strategy.parseFn(i);i=i.substring(0,o.start)+r+i.substring(o.stop)}if("true"===this.el.contentEditable){if(document.execCommand("insertText",!1,r),o&&o.text){var s=o.text.length;rangy.getSelection().move("character",-(s+r.length));for(var l=0;l<s;l++)document.execCommand("forwardDelete",!1);rangy.getSelection().move("character",r.length)}}else this.$el.val(i+a);n.$broadcast("onSelect",this.$el.val(),this.$el),n.$apply(),this.el.focus(),this.el.selectionStart=this.el.selectionEnd=i.length},getCaretPosition:function(){if(0!==this.el.selectionEnd){var e,n,i,a,r;for(e=["border-width","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","word-spacing","line-height","text-decoration","width","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],n=angular.extend({position:"absolute",overflow:"auto","white-space":"pre-wrap",top:0,left:-9999},t.getStyles(this.$el,e)),i=$("<div></div>").css(n).text(this.getTextFromHeadToCaret()),a=$("<span></span>").text("&nbsp;").appendTo(i),this.$el.before(i),r=a.position();r.left>this.$el.width();)r.left=r.left-this.$el.width();return r.top+=a.height()-this.$el.scrollTop(),i.remove(),r}},getTextFromHeadToCaret:function(){var e,t,n;if("number"==typeof(t=this.el.selectionEnd)&&"true"!==this.el.contentEditable)e=this.el.value.substring(0,t);else if(document.selection)n=this.el.createTextRange(),n.moveStart("character",0),n.moveEnd("textedit"),e=n.text;else if("true"===this.el.contentEditable){n=window.getSelection().getRangeAt(0);var i=n.cloneRange();i.selectNodeContents(this.el),i.setEnd(n.startContainer,n.startOffset),e=i.toString()}return e},extractSearchQuery:function(e){var t,n,i,a;for(t in this.strategies)if(this.strategies.hasOwnProperty(t)){if(n=this.strategies[t],n.match&&(i=e.match(n.match)))return[n,i[n.index]];if(n.parseFn&&(a=n.parseFn(e)))return[n,a.text]}return[]},search:t.lock(function(e,t){var n;this.strategy=t[0],n=t[1],this.strategy.search(n,this.searchCallbackFactory(e))})}),i}]).factory("ListView",["utils",function(e){function t(t,n){this.$el=t,this.index=0,this.completer=n,this.$el.on("mousedown","li.textcomplete-item",e.bind(this.onClick,this))}function n(e){return+e.match(i)[1]}var i=/(\d+)/;return angular.extend(t.prototype,{shown:!1,render:function(t){var n,i,a,r,o;for(n="",i=0,a=t.length;i<a&&(o=t[i],e.include(this.data,o)||(r=this.data.length,this.data.push(o),n+='<li class="textcomplete-item" data-index="'+r+'"><a>',n+=this.strategy.template(o),n+="</a></li>",this.data.length!==this.strategy.maxCount));i++);this.$el.append(n),this.data.length?this.activateIndexedItem():this.deactivate()},clear:function(){return this.data=[],this.$el.html(""),this.index=0,this},activateIndexedItem:function(){this.$el.find(".active").removeClass("active"),this.getActiveItem().addClass("active"),this.scrollToActive()},scrollToActive:function(){var e=this.getActiveItem(),t=this.$el.outerHeight(!1),i=e.outerHeight(!1),a=this.$el.scrollTop(),r=a+t,o=this.index*i,s=o+i,l=n(this.$el.css("padding-top"))+n(this.$el.css("padding-bottom"))+n(this.$el.css("border-top-width"))+n(this.$el.css("border-bottom-width"));o<a?this.$el.scrollTop(o):s>r-l&&this.$el.scrollTop(s-t+l)},getActiveItem:function(){return $(this.$el.children().get(this.index))},activate:function(){return this.shown||(this.$el.show(),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.shown=!1,this.data=this.index=null),this},setPosition:function(e){return this.$el.css(e),this},select:function(e){this.completer.onSelect(this.data[e]),this.deactivate()},onKeydown:function(e){this.shown&&(27===e.keyCode?this.deactivate():38===e.keyCode?(e.preventDefault(),0===this.index?this.index=this.data.length-1:this.index-=1,this.activateIndexedItem()):40===e.keyCode?(e.preventDefault(),this.index===this.data.length-1?this.index=0:this.index+=1,this.activateIndexedItem()):13!==e.keyCode&&9!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),this.select(parseInt(this.getActiveItem().data("index")))))},onClick:function(e){e.preventDefault();var t=$(e.target);e.originalEvent.keepTextCompleteDropdown=!0,t.hasClass("textcomplete-item")||(t=t.parents("li.textcomplete-item")),this.select(parseInt(t.data("index")))}}),t}]).factory("Textcomplete",["$sanitize","utils","Completer",function(e,t,n){function i(t){return e(t)}function a(e,a){var r,o;for(r in a)a.hasOwnProperty(r)&&(o=a[r],o.template||(o.template=i),null==o.index&&(o.index=2),o.cache&&(o.search=t.memoize(o.search)),o.maxCount=o.maxCount||10);return new n(e,a)}return a}])}(),function(e){"use strict";var t=function(e,t){return e.bind?e.bind(t):function(){e.apply(t,arguments)}},n=function(){var t;return t=e("<div></div>").css(["color"]).color,void 0!==t?function(e,t){return e.css(t)}:function(t,n){var i;return i={},e.each(n,function(e,n){i[n]=t.css(n)}),i}}(),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},a=function(e){return e.replace(/[&<>"'\/]/g,function(e){return i[e]})},r=function(){function i(i,a){var c,d;d=i.css("position"),"static"===d&&(d="relative"),c=e(r.wrapper).css(e.extend({},o.wrapper,n(i,s),{position:d})),this.textareaTop=parseInt(i.css("border-top-width")),this.$textarea=i.css(o.textarea),this.$textarea.wrap(c),this.$textarea.origVal=i.val,this.$textarea.val=t(this.val,this),this.$textarea.on("input",t(this.onInput,this)),this.$textarea.on("change",t(this.onInput,this)),this.$textarea.on("scroll",t(this.resizeOverlay,this)),this.$textarea.on("resize",t(this.resizeOverlay,this)),this.strategies=e.isArray(a)?a:[a],this.$elArr=[],this.strategies.forEach(function(t,a){var s=e(r.overlay).css(e.extend({},o.overlay,n(i,l),{top:this.textareaTop,right:parseInt(i.css("border-right-width")),bottom:parseInt(i.css("border-bottom-width")),left:parseInt(i.css("border-left-width"))}));this.$elArr.push(s),this.$textarea.before(s)}.bind(this)),this.renderTextOnOverlay()}var r,o,s,l;return r={wrapper:'<div class="textoverlay-wrapper"></div>',overlay:'<div class="textoverlay"></div>'},o={wrapper:{margin:0,padding:0,overflow:"hidden"},overlay:{position:"absolute",color:"transparent","white-space":"pre-wrap","word-wrap":"break-word",overflow:"hidden"},textarea:{background:"transparent",position:"relative",outline:0}},s=["display"],l=["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","font-family","font-weight","font-size","background-color","line-height"],e.extend(i.prototype,{val:function(e){return e?this.setVal(e):this.$textarea.origVal()},setVal:function(e){return this.$textarea.origVal(e),this.renderTextOnOverlay()},onInput:function(e){this.renderTextOnOverlay()},renderTextOnOverlay:function(){var t,n,i,r,o,s,l,c,d;for(t=a(this.$textarea.val()),i=0,r=this.strategies.length;i<r;i++)n=t,o=this.strategies[i],s=o.match,e.isArray(s)&&(s=e.map(s,function(e){return e.replace(/(\(|\)|\|)/g,"$1")}),s=new RegExp("("+s.join("|")+")","g")),c=o.replaceFn,d=o.processFn,d&&e.isFunction(d)?n=d(n):c&&e.isFunction(c)?n=n.replace(s,c):(l="background-color:"+o.css["background-color"],n=n.replace(s,function(e){return'<span style="'+l+'">'+e+"</span>"})),this.$elArr[i].html(n);return this},resizeOverlay:function(){var e=this.textareaTop-this.$textarea.scrollTop();this.$elArr.forEach(function(t){t.css({top:e})})},
destroyOverlay:function(){this.$textarea.val=this.$textarea.origVal,this.$elArr.forEach(function(e){e.remove()}),this.$textarea.removeData("jquery.overlay"),this.$textarea.unwrap()}}),i}();e.fn.overlay=function(t,n){var i,a=e(this),o=a.data("jquery.overlay");return"string"==typeof t&&o&&o[t]?(i=[],i.push(arguments),i.shift(),o[t].apply(o,i)):o||"string"==typeof t||n?this:(a.data("jquery.overlay",new r(this,t)),this)}}(window.jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=global.window&&global.window.$?e(global.window.$):function(t){if(!t.$&&!t.fn)throw new Error("Tokenfield requires a window object with jQuery or a jQuery instance");return e(t.$||t)}:e(jQuery)}(function(e,t){"use strict";var n=function(n,i){var a=this;this.$element=e(n),this.textDirection=this.$element.css("direction"),this.options=e.extend(!0,{},e.fn.tokenfield.defaults,{tokens:this.$element.val()},this.$element.data(),i),this._delimiters="string"==typeof this.options.delimiter?[this.options.delimiter]:this.options.delimiter,this._triggerKeys=e.map(this._delimiters,function(e){return e.charCodeAt(0)}),this._firstDelimiter=this._delimiters[0];var r=e.inArray(" ",this._delimiters),o=e.inArray("-",this._delimiters);r>=0&&(this._delimiters[r]="\\s"),o>=0&&(delete this._delimiters[o],this._delimiters.unshift("-"));var s=["\\","$","[","{","^",".","|","?","*","+","(",")"];e.each(this._delimiters,function(t,n){e.inArray(n,s)>=0&&(a._delimiters[t]="\\"+n)});var l,c=t&&"function"==typeof t.getMatchedCSSRules?t.getMatchedCSSRules(n):null,d=n.style.width,u=this.$element.width();c&&e.each(c,function(e,t){t.style.width&&(l=t.style.width)});var p="rtl"===e("body").css("direction")?"right":"left",g={position:this.$element.css("position")};g[p]=this.$element.css(p),this.$element.data("original-styles",g).data("original-tabindex",this.$element.prop("tabindex")).css("position","absolute").css(p,"-10000px").prop("tabindex",-1),this.$wrapper=e('<div class="tokenfield form-control" />'),this.$element.hasClass("input-lg")&&this.$wrapper.addClass("input-lg"),this.$element.hasClass("input-sm")&&this.$wrapper.addClass("input-sm"),"rtl"===this.textDirection&&this.$wrapper.addClass("rtl");var m=this.$element.prop("id")||(new Date).getTime()+""+Math.floor(100*(1+Math.random()));this.$input=e('<input type="text" spellcheck="false" class="token-input" autocomplete="off" />').appendTo(this.$wrapper).prop("placeholder",this.$element.prop("placeholder")).prop("id",m+"-tokenfield").prop("tabindex",this.$element.data("original-tabindex"));var f=e('label[for="'+this.$element.prop("id")+'"]');if(f.length&&f.prop("for",this.$input.prop("id")),this.$copyHelper=e('<input type="text" />').css("position","absolute").css(p,"-10000px").prop("tabindex",-1).prependTo(this.$wrapper),d?this.$wrapper.css("width",d):l?this.$wrapper.css("width",l):this.$element.parents(".form-inline").length&&this.$wrapper.width(u),(this.$element.prop("disabled")||this.$element.parents("fieldset[disabled]").length)&&this.disable(),this.$element.prop("readonly")&&this.readonly(),this.$mirror=e('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),this.$input.css("min-width",this.options.minWidth+"px"),e.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(e,t){a.$mirror[0].style[t]=a.$input.css(t)}),this.$mirror.appendTo("body"),this.$wrapper.insertBefore(this.$element),this.$element.prependTo(this.$wrapper),this.update(),this.setTokens(this.options.tokens,!1,!1),this.listen(),!e.isEmptyObject(this.options.autocomplete)){var h="rtl"===this.textDirection?"right":"left",v=e.extend({minLength:this.options.showAutocompleteOnFocus?0:null,position:{my:h+"-20 top",at:h+" bottom",of:this.$input}},this.options.autocomplete);this.$input.autocomplete(v)}if(!e.isEmptyObject(this.options.typeahead)){var b=this.options.typeahead,y={minLength:this.options.showAutocompleteOnFocus?0:null},w=e.isArray(b)?b:[b,b];w[0]=e.extend({},y,w[0]),this.$input.typeahead.apply(this.$input,w),this.typeahead=!0}this.options.maxLength>0&&this.$input.prop("maxLength",this.options.maxLength),this.$element.trigger("tokenfield:initialize")};n.prototype={constructor:n,createToken:function(t,n){var i=this;if("string"==typeof t&&(t={value:t,label:t}),void 0===n&&(n=!0),t.value=e.trim(t.value),t.label=t.label&&t.label.length?e.trim(t.label):t.value,t.value.length&&t.label.length&&!(t.label.length<=this.options.minLength)&&!(this.options.limit&&this.getTokens().length>=this.options.limit)){var a=e.Event("tokenfield:createtoken",{attrs:t});if(this.$element.trigger(a),a.attrs&&!a.isDefaultPrevented()){var r=e('<div class="token" />').attr("data-value",t.value).append('<span class="token-label" />').append('<a class="close" tabindex="-1">&times;</a>');this.$input.hasClass("tt-input")?this.$input.parent().before(r):this.$input.before(r),this.$input.css("width",this.options.minWidth+"px");var o=r.find(".token-label"),s=r.find(".close");return this.maxTokenWidth||(this.maxTokenWidth=this.$wrapper.width()-s.outerWidth()-parseInt(s.css("margin-left"),10)-parseInt(s.css("margin-right"),10)-parseInt(r.css("border-left-width"),10)-parseInt(r.css("border-right-width"),10)-parseInt(r.css("padding-left"),10)-parseInt(r.css("padding-right"),10)-parseInt(o.css("border-left-width"),10)-parseInt(o.css("border-right-width"),10)-parseInt(o.css("padding-left"),10)-parseInt(o.css("padding-right"),10)-parseInt(o.css("margin-left"),10)-parseInt(o.css("margin-right"),10)),o.text(t.label).css("max-width",this.maxTokenWidth),r.on("mousedown",function(e){if(i._disabled||i._readonly)return!1;i.preventDeactivation=!0}).on("click",function(e){return!i._disabled&&!i._readonly&&(i.preventDeactivation=!1,e.ctrlKey||e.metaKey?(e.preventDefault(),i.toggle(r)):void i.activate(r,e.shiftKey,e.shiftKey))}).on("dblclick",function(e){if(i._disabled||i._readonly||!i.options.allowEditing)return!1;i.edit(r)}),s.on("click",e.proxy(this.remove,this)),this.$element.trigger(e.Event("tokenfield:createdtoken",{attrs:t,relatedTarget:r.get(0)})),n&&this.$element.val(this.getTokensList()).trigger(e.Event("change",{initiator:"tokenfield"})),this.update(),this.$element.get(0)}}},setTokens:function(t,n,i){if(t){n||this.$wrapper.find(".token").remove(),void 0===i&&(i=!0),"string"==typeof t&&(t=this._delimiters.length?t.split(new RegExp("["+this._delimiters.join("")+"]")):[t]);var a=this;return e.each(t,function(e,t){a.createToken(t,i)}),this.$element.get(0)}},getTokenData:function(t){var n=t.map(function(){var t=e(this);return{value:t.attr("data-value"),label:t.find(".token-label").text()}}).get();return 1==n.length&&(n=n[0]),n},getTokens:function(t){var n=this,i=[],a=t?".active":"";return this.$wrapper.find(".token"+a).each(function(){i.push(n.getTokenData(e(this)))}),i},getTokensList:function(t,n,i){t=t||this._firstDelimiter,n=void 0!==n&&null!==n?n:this.options.beautify;var a=t+(n&&" "!==t?" ":"");return e.map(this.getTokens(i),function(e){return e.value}).join(a)},getInput:function(){return this.$input.val()},listen:function(){var n=this;this.$element.on("change",e.proxy(this.change,this)),this.$wrapper.on("mousedown",e.proxy(this.focusInput,this)),this.$input.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("paste",e.proxy(this.paste,this)).on("keydown",e.proxy(this.keydown,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.$copyHelper.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keydown",e.proxy(this.keydown,this)).on("keyup",e.proxy(this.keyup,this)),this.$input.on("keypress",e.proxy(this.update,this)).on("keyup",e.proxy(this.update,this)),this.$input.on("autocompletecreate",function(){var t=e(this).data("ui-autocomplete").menu.element,i=n.$wrapper.outerWidth()-parseInt(t.css("border-left-width"),10)-parseInt(t.css("border-right-width"),10);t.css("min-width",i+"px")}).on("autocompleteselect",function(e,t){return n.createToken(t.item)&&(n.$input.val(""),n.$input.data("edit")&&n.unedit(!0)),!1}).on("typeahead:selected typeahead:autocompleted",function(e,t,i){n.createToken(t)&&(n.$input.typeahead("val",""),n.$input.data("edit")&&n.unedit(!0))}),e(t).on("resize",e.proxy(this.update,this))},keydown:function(t){function n(e){if(a.$input.is(document.activeElement)){if(a.$input.val().length>0)return;e+="All";var n=a.$input.hasClass("tt-input")?a.$input.parent()[e](".token:first"):a.$input[e](".token:first");if(!n.length)return;a.preventInputFocus=!0,a.preventDeactivation=!0,a.activate(n),t.preventDefault()}else a[e](t.shiftKey),t.preventDefault()}function i(n){if(t.shiftKey){if(a.$input.is(document.activeElement)){if(a.$input.val().length>0)return;var i=a.$input.hasClass("tt-input")?a.$input.parent()[n+"All"](".token:first"):a.$input[n+"All"](".token:first");if(!i.length)return;a.activate(i)}var r="prev"===n?"next":"prev",o="prev"===n?"first":"last";a.firstActiveToken[r+"All"](".token").each(function(){a.deactivate(e(this))}),a.activate(a.$wrapper.find(".token:"+o),!0,!0),t.preventDefault()}}if(this.focused){var a=this;switch(t.keyCode){case 8:if(!this.$input.is(document.activeElement))break;this.lastInputValue=this.$input.val();break;case 37:n("rtl"===this.textDirection?"next":"prev");break;case 38:i("prev");break;case 39:n("rtl"===this.textDirection?"prev":"next");break;case 40:i("next");break;case 65:if(this.$input.val().length>0||!t.ctrlKey&&!t.metaKey)break;this.activateAll(),t.preventDefault();break;case 9:case 13:if(this.$input.data("ui-autocomplete")&&this.$input.data("ui-autocomplete").menu.element.find("li:has(a.ui-state-focus)").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-cursor").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-hint").val().length)break;if(this.$input.is(document.activeElement)&&this.$input.val().length||this.$input.data("edit"))return this.createTokensFromInput(t,this.$input.data("edit"));if(13===t.keyCode){if(!this.$copyHelper.is(document.activeElement)||1!==this.$wrapper.find(".token.active").length)break;if(!a.options.allowEditing)break;this.edit(this.$wrapper.find(".token.active"))}}this.lastKeyDown=t.keyCode}},keypress:function(t){if(this.lastKeyPressCode=t.keyCode,this.lastKeyPressCharCode=t.charCode,-1!==e.inArray(t.charCode,this._triggerKeys)&&this.$input.is(document.activeElement))return this.$input.val()&&this.createTokensFromInput(t),!1},keyup:function(e){if(this.preventInputFocus=!1,this.focused){switch(e.keyCode){case 8:if(this.$input.is(document.activeElement)){if(this.$input.val().length||this.lastInputValue.length&&8===this.lastKeyDown)break;this.preventDeactivation=!0;var t=this.$input.hasClass("tt-input")?this.$input.parent().prevAll(".token:first"):this.$input.prevAll(".token:first");if(!t.length)break;this.activate(t)}else this.remove(e);break;case 46:this.remove(e,"next")}this.lastKeyUp=e.keyCode}},focus:function(e){this.focused=!0,this.$wrapper.addClass("focus"),this.$input.is(document.activeElement)&&(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null,this.options.showAutocompleteOnFocus&&this.search())},blur:function(e){this.focused=!1,this.$wrapper.removeClass("focus"),this.preventDeactivation||this.$element.is(document.activeElement)||(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null),!this.preventCreateTokens&&(this.$input.data("edit")&&!this.$input.is(document.activeElement)||this.options.createTokensOnBlur)&&this.createTokensFromInput(e),this.preventDeactivation=!1,this.preventCreateTokens=!1},paste:function(e){var t=this;setTimeout(function(){t.createTokensFromInput(e)},1)},change:function(e){"tokenfield"!==e.initiator&&this.setTokens(this.$element.val())},createTokensFromInput:function(e,t){if(!(this.$input.val().length<this.options.minLength)){var n=this.getTokensList();return this.setTokens(this.$input.val(),!0),n==this.getTokensList()&&this.$input.val().length?!1:(this.$input.hasClass("tt-input")?this.$input.typeahead("val",""):this.$input.val(""),this.$input.data("edit")&&this.unedit(t),!1)}},next:function(e){if(e){var t=this.$wrapper.find(".active:first");if(!(!t||!this.$firstActiveToken)&&t.index()<this.$firstActiveToken.index())return this.deactivate(t)}var n=this.$wrapper.find(".active:last"),i=n.nextAll(".token:first");if(!i.length)return void this.$input.focus();this.activate(i,e)},prev:function(e){if(e){var t=this.$wrapper.find(".active:last");if(!(!t||!this.$firstActiveToken)&&t.index()>this.$firstActiveToken.index())return this.deactivate(t)}var n=this.$wrapper.find(".active:first"),i=n.prevAll(".token:first");if(i.length||(i=this.$wrapper.find(".token:first")),!i.length&&!e)return void this.$input.focus();this.activate(i,e)},activate:function(t,n,i,a){if(t){if(void 0===a)var a=!0;if(i)var n=!0;if(this.$copyHelper.focus(),n||(this.$wrapper.find(".active").removeClass("active"),a?this.$firstActiveToken=t:delete this.$firstActiveToken),i&&this.$firstActiveToken){var r=this.$firstActiveToken.index()-2,o=t.index()-2,s=this;this.$wrapper.find(".token").slice(Math.min(r,o)+1,Math.max(r,o)).each(function(){s.activate(e(this),!0)})}t.addClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select()}},activateAll:function(){var t=this;this.$wrapper.find(".token").each(function(n){t.activate(e(this),0!==n,!1,!1)})},deactivate:function(e){e&&(e.removeClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},toggle:function(e){e&&(e.toggleClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},edit:function(t){if(t){var n={value:t.data("value"),label:t.find(".token-label").text()},i={attrs:n,relatedTarget:t.get(0)},a=e.Event("tokenfield:edittoken",i);if(this.$element.trigger(a),!a.isDefaultPrevented()){t.find(".token-label").text(n.value);var r=t.outerWidth(),o=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;t.replaceWith(o),this.preventCreateTokens=!0,this.$input.val(n.value).select().data("edit",!0).width(r),this.update(),this.$element.trigger(e.Event("tokenfield:editedtoken",i))}}},unedit:function(e){if((this.$input.hasClass("tt-input")?this.$input.parent():this.$input).appendTo(this.$wrapper),this.$input.data("edit",!1),this.$mirror.text(""),this.update(),e){var t=this;setTimeout(function(){t.$input.focus()},1)}},remove:function(t,n){if(!(this.$input.is(document.activeElement)||this._disabled||this._readonly)){var i="click"===t.type?e(t.target).closest(".token"):this.$wrapper.find(".token.active");if("click"!==t.type){if(!n)var n="prev";if(this[n](),"prev"===n)var a=0===i.first().prevAll(".token:first").length}var r={attrs:this.getTokenData(i),relatedTarget:i.get(0)},o=e.Event("tokenfield:removetoken",r);if(this.$element.trigger(o),!o.isDefaultPrevented()){var s=e.Event("tokenfield:removedtoken",r),l=e.Event("change",{initiator:"tokenfield"});i.remove(),this.$element.val(this.getTokensList()).trigger(s).trigger(l),this.$wrapper.find(".token").length&&"click"!==t.type&&!a||this.$input.focus(),this.$input.css("width",this.options.minWidth+"px"),this.update(),t.preventDefault(),t.stopPropagation()}}},update:function(e){var t=this.$input.val(),n=parseInt(this.$input.css("padding-left"),10),i=parseInt(this.$input.css("padding-right"),10),a=n+i;if(this.$input.data("edit")){if(t||(t=this.$input.prop("placeholder")),t===this.$mirror.text())return;this.$mirror.text(t);var r=this.$mirror.width()+10;if(r>this.$wrapper.width())return this.$input.width(this.$wrapper.width());this.$input.width(r)}else{if(this.$input.css("width",this.options.minWidth+"px"),"rtl"===this.textDirection)return this.$input.width(this.$input.offset().left+this.$input.outerWidth()-this.$wrapper.offset().left-parseInt(this.$wrapper.css("padding-left"),10)-a-1);this.$input.width(this.$wrapper.offset().left+this.$wrapper.width()+parseInt(this.$wrapper.css("padding-left"),10)-this.$input.offset().left-a)}},focusInput:function(t){if(!(e(t.target).closest(".token").length||e(t.target).closest(".token-input").length||e(t.target).closest(".tt-dropdown-menu").length)){var n=this;setTimeout(function(){n.$input.focus()},0)}},search:function(){this.$input.data("ui-autocomplete")&&this.$input.autocomplete("search")},disable:function(){this.setProperty("disabled",!0)},enable:function(){this.setProperty("disabled",!1)},readonly:function(){this.setProperty("readonly",!0)},writeable:function(){this.setProperty("readonly",!1)},setProperty:function(e,t){this["_"+e]=t,this.$input.prop(e,t),this.$element.prop(e,t),this.$wrapper[t?"addClass":"removeClass"](e)},destroy:function(){this.$element.val(this.getTokensList()),this.$element.css(this.$element.data("original-styles")),this.$element.prop("tabindex",this.$element.data("original-tabindex"));var t=e('label[for="'+this.$input.prop("id")+'"]');return t.length&&t.prop("for",this.$element.prop("id")),this.$element.insertBefore(this.$wrapper),this.$element.removeData("original-styles").removeData("original-tabindex").removeData("bs.tokenfield"),this.$wrapper.remove(),this.$element}};var i=e.fn.tokenfield;return e.fn.tokenfield=function(t,i){var a,r=[];Array.prototype.push.apply(r,arguments);var o=this.each(function(){var o=e(this),s=o.data("bs.tokenfield"),l="object"==typeof t&&t;"string"==typeof t&&s&&s[t]?(r.shift(),a=s[t].apply(s,r)):s||"string"==typeof t||i||o.data("bs.tokenfield",s=new n(this,l))});return void 0!==a?a:o},e.fn.tokenfield.defaults={minWidth:150,minLength:0,maxLength:0,allowEditing:!0,limit:0,autocomplete:{},typeahead:{},showAutocompleteOnFocus:!1,createTokensOnBlur:!1,delimiter:",",beautify:!0},e.fn.tokenfield.Constructor=n,e.fn.tokenfield.noConflict=function(){return e.fn.tokenfield=i,this},n}),function(e){function t(){var e,t;for(e=0;e<this.length;e++)t=this[e],n(t)||(i(t),s(t))}function n(e){var t=e.value,n=e.$$currentValue;return!t&&!n||t===n}function i(e){e.$$currentValue=e.value}function a(e,t){function n(e){var n=e.target;t(n)}c.addEventListener(e,n,!0)}function r(e){for(;e;){if("FORM"===e.nodeName)return l(e);e=e.parentNode}return l()}function o(e,t){if(e.forEach)return e.forEach(t);var n;for(n=0;n<e.length;n++)t(e[n])}function s(t){var n=e.document,i=n.createEvent("HTMLEvents");i.initEvent("change",!0,!0),t.dispatchEvent(i)}var l=e.jQuery||e.angular.element,c=e.document.documentElement,d=l(c);a("change",i),function(t){var n=e.jQuery||e.angular.element,i=n.prototype,a=i.val;i.val=function(e){var n=a.apply(this,arguments);return arguments.length>0&&o(this,function(n){t(n,e)}),n}}(i),l.prototype.checkAndTriggerAutoFillEvent=t,a("blur",function(t){e.setTimeout(function(){r(t).find("input").checkAndTriggerAutoFillEvent()},20)}),e.document.addEventListener("DOMContentLoaded",function(){e.setTimeout(function(){d.find("input").checkAndTriggerAutoFillEvent()},200)},!1)}(window),function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(n,i){var a=i||function(e){return e};e.$broadcast("event:auth-loginConfirmed",n),t.retryAll(a)},loginCancelled:function(n,i){t.rejectAll(i),e.$broadcast("event:auth-loginCancelled",n)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,n){return{responseError:function(i){if(401===i.status&&!i.config.ignoreAuthModule){var a=t.defer();return n.append(i.config,a),e.$broadcast("event:auth-loginRequired",i),a.promise}return t.reject(i)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,i){function a(e){i.resolve(e)}function r(e){i.reject(e)}n=n||e.get("$http"),n(t).then(a,r)}var n,i=[];return{append:function(e,t){i.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<i.length;++t)i[t].deferred.reject(e);i=[]},retryAll:function(e){for(var n=0;n<i.length;++n)t(e(i[n].config),i[n].deferred);i=[]}}}])}(),function(e){var t={},n=e.prototype.stopCallback;e.prototype.stopCallback=function(e,i,a,r){var o=this;return!!o.paused||!t[a]&&!t[r]&&n.call(o,e,i,a)},e.prototype.bindGlobal=function(e,n,i){if(this.bind(e,n,i),e instanceof Array)for(var a=0;a<e.length;a++)t[e[a]]=!0;else t[e]=!0},e.init()}(Mousetrap),angular.module("oi.file",[]).value("oiFileConfig",{change:function(e){e.$upload(this.url,{})},validate:function(e,t){var n=[];return"object"==typeof t&&(null!==t.allowedType&&-1!==t.allowedType.indexOf(e[this.fileName].toLowerCase().split(".").pop())||n.push({msg:t.errorBadType,code:"type"}),e[this.fileSize]>(+t.maxSize?t.maxSize:1/0)&&n.push({msg:t.errorBigSize,code:"size"}),e[this.fileSize]>(+t.maxSpace?t.maxSpace:1/0)-t.space&&n.push({msg:t.errorMaxSize,code:"full"}),t.maxNumberOfFiles&&t.quantity>=t.maxNumberOfFiles&&n.push({msg:t.errorMaxQuantity,code:"quantity"})),!!n.length&&n},setError:function(e,t){var n=t.data,i=n?n.error?[n.error]:n:[];if(!i.length)switch(e){case"drop":i.push({msg:"Drag and drop is not supported. Upgrade your browser",code:e});break;case"validate":i.push({msg:"The file is invalid",code:e});break;case"preview":i.push({msg:"Thumbnails are not supported. Upgrade your browser",code:e});break;case"load":i.push({msg:"Unable to load file. No connection to the Internet",code:e});break;case"upload":i.push({msg:"Unable to load file. Server problem",code:e});break;case"abort":i.push({msg:"Download aborted",code:e})}return t.item[this.fileLoaded]&&(delete t.item[this.fileLoaded],delete t.item[this.fileProgress],delete t.item[this.fileUploading]),{item:t.item,response:i}},url:"uploader.php",fieldName:"Files",fileClass:"dragover-file",notFileClass:"dragover-plain",fileName:"filename",fileThumb:"thumb",fileSize:"size",fileLoaded:"loaded",fileProgress:"progress",fileUploading:"uploading",queue:"uploading"}).directive("oiFile",["oiFileConfig","$q","$compile","$timeout",function(e,t,n,i){var a=[];return{link:function(i,r,o){function s(e){if("function"==typeof m.change){if(angular.isElement(e)){var t=angular.element(e),a=angular.element('<form style="display: none;" />'),r=angular.element('<iframe src="javascript:false;" name="iframeTransport'+ +new Date+'">'),o=n(t.clone())(i),s=t.val();e=[{lastModifiedDate:null,size:null,type:"like/"+s.replace(/^.+\.(?!\.)|.*/,""),name:s.match(/[^\\]+$/)[0],_form:a}],t.after(o).after(a),a.append(t).append(r)}i.$apply(function(t){for(var n=0,i=e.length;n<i;n++){var a={$upload:c,$preview:l,$abort:d,_file:e[n]};a[m.fileName]=e[n].name,a[m.fileThumb]=e[n].thumb,a[m.fileSize]=e[n].size,a[m.fileLoaded]=0,a[m.fileProgress]=0,a[m.fileUploading]=!0,m.change(a)}})}}function l(e,n){var a=t.defer(),r={item:e,response:{}};if(n=n||m.fileThumb,null!==window.FileReader){var o=new FileReader;o.onload=function(t){return function(t){-1!==t.target.result.indexOf("data:image")&&i.$apply(function(){e[n]=o.result,r.response[n]=o.result,a.resolve(r)})}}(),o.readAsDataURL(this._file)}else"function"==typeof m.preview&&a.reject(m.setError("preview",{item:e,response:null}));return a.promise}function c(e,n,i){function r(){a.length?(a[0].item._file._form?p(a[0]):u(a[0]),a[0].deferred.promise.finally(function(){a.shift(),r()})):(delete a.total,delete a.loaded,delete a.all,delete a.progress)}var o=t.defer();n=angular.extend(n,this),delete n.$upload,delete n.$preview;var s=m.validate(n,i);if(s)return o.reject(m.setError("validate",{item:n,data:s})),o.promise;var l={url:e,item:n,deferred:o,xhr:void 0};return a.push(l),1===a.length?(a.total=n[m.fileSize],a.loaded=0,a.progress=0,a.all=1,r()):(a.total+=n[m.fileSize],a.all++),o.promise}function d(){angular.forEach(a,function(e,t){e.item===this&&(e.xhr?setTimeout(function(){e.xhr.abort()},0):a.splice(t,1),a.total-=e.item[m.fileSize],a.loaded-=e.item[m.fileLoaded],a.all--)},this)}function u(e){var t=new XMLHttpRequest,n=new FormData;t.item=e.item,e.xhr=t,n.append(m.fieldName,e.item._file),t.upload.addEventListener("progress",function(n){i.$apply(function(){e.item[m.fileLoaded]=n.lengthComputable?n.loaded:void 0,e.item[m.fileProgress]=n.lengthComputable?Math.round(100*n.loaded/n.total):void 0,a.loaded+=e.item[m.fileLoaded],a.progress=Math.round(100*a.loaded/a.total),t.data=n,e.deferred.notify(t)})},!1),t.addEventListener("load",function(){var n=t.data=g(t.responseText);delete e.item._file,delete e.item.$abort,delete e.item[m.fileProgress],delete e.item[m.fileLoaded],delete e.item[m.fileUploading],i.$apply(function(){200===t.status&&n?(angular.extend(e.item,n),e.deferred.resolve(t)):e.deferred.reject(m.setError("upload",t))})},!1),t.addEventListener("error",function(){t.data=g(t.responseText),i.$apply(function(){e.deferred.reject(m.setError("load",t))})},!1),t.addEventListener("abort",function(){t.data=g(t.responseText),i.$apply(function(){e.deferred.reject(m.setError("abort",t))})},!1),t.open("POST",e.url,!0),angular.forEach(e.item._file.headers,function(e,n){t.setRequestHeader(n,e)}),t.send(n)}function p(e){e.xhr=!1;var t=e.item._file._form,n=t.find("iframe");t.find("input").prop("name",m.fieldName),t.prop({action:e.url,method:"post",target:n.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),n.bind("load",function(){var a,r;try{if(a=n.contents(),!a.length||!a[0].firstChild)throw new Error;r=angular.element(a[0].body).text(),a=g(r)}catch(e){}t.remove(),delete e.item._file,i.$apply(function(){a&&!a.error?(angular.extend(e.item,a),e.deferred.resolve({item:e.item,response:a})):e.deferred.reject(m.setError("upload",{responseText:r,data:a,item:e.item,dummy:!0}))})}),t[0].submit()}function g(e){if("object"!=typeof e)try{return angular.fromJson(e)}catch(e){return!1}return e}var m={};angular.extend(m,e),i.$watch(o.oiFile,function(t,n){m=angular.extend({},e,t)},!0),i[m.queue]=a,r.bind("drop",function(e){var t=e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer;e.stopPropagation(),e.preventDefault(),t.files?s(t.files):m.setError("drop"),r.removeClass(m.fileClass+" "+m.notFileClass)}).bind("dragover",function(e){var t=e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer;e.stopPropagation(),e.preventDefault(),t.dropEffect="copy",t&&t.types&&t.types.indexOf("Files")>=0?r.addClass(m.fileClass):r.addClass(m.notFileClass)}).bind("dragleave",function(e){e.stopPropagation(),e.preventDefault(),r.removeClass(m.fileClass+" "+m.notFileClass)}).bind("change",function(){s(this.files?this.files:this)})}}}]),function(){"use strict";function e(e,t,n,i,a){function r(e){e.get("LoginService").goHome()}function o(e,t,n,i){var a=t.defer();e.getCurrentUserEmail()?a.resolve():a.reject();var r=a.promise;return r.then(function(){i.clearPath()},function(){i.savePath(),n.go("authless.login")}),r}function s(e,t,n){return e.getProfile().then(function(e){var i=e.data,a=i&&i.profile||{};if(a.planId){var r=a.planId.split("_")[0];a.planName=r.charAt(0).toUpperCase()+r.slice(1)}return a.customSubscription&&a.customSubscription.end&&a.customSubscription.end<Date.now()&&(delete a.customSubscription,delete a.planId),a.limitsConfig&&_.assign(n.getLimits(),a.limitsConfig),t.setProfile(a),n.setCapabilities(a),a})}a.defaults.headers.delete={"Content-Type":"application/json"},i.hashPrefix(""),t.when("",r),t.otherwise(r),n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/),r.$inject=["$injector"],e.state("auth",{views:{header:{templateUrl:"partials/header.html",controller:"HeaderController"},index:{template:'<div ui-view="auth"></div>',controller:"IndexController"}},resolve:{config:["dynamicApiUrls",function(e){return e.getUrls()}],isSignedIn:o,profilePromise:s}}).state("auth.workPlace",{views:{auth:{templateUrl:"partials/mainscreen/workplace.html",controller:"MainController"}}}).state("auth.workPlace.get_started",{url:"/getStarted",views:{workplace:{templateUrl:"partials/get_started_content.html",controller:"getStartedController",resolve:{}},control:{templateUrl:"partials/mainscreen/control-panel.html",controller:"ControlController"}},data:{headerConfig:{label:'<em class="ico"><span class="flaticon stroke cube"></span></em>Welcome to Dialogflow!',model:!1,navButton:{}}},resolve:{}}),o.$inject=["CurrentUser","$q","$state","RedirectAfterLoginService"],s.$inject=["UsersData","CurrentUser","apiConfig"]}function t(e,t,n,i,a,r,o,s,l,c){c.load(),e.getConfig=l.getClientConfig.bind(l),e.getConfigRecord=l.getConfigRecord.bind(l),e.hasCapability=l.hasCapability.bind(l);try{var d=i.getObject("signup")||!1,u=i.get("from")||null;d&&s.trackSignup(u),i.remove("signup"),i.remove("from")}catch(e){}e.activeTab={},e.stateLoaded=!0;var p=!1;e.$on("$stateChangeStart",function(t,n){e.stateLoaded=!1,r.setTouched(!1),r.cleanConfigBefore()}),e.$on("$stateChangeSuccess",function(i,s,l){s.data&&s.data.activeTab?e.activeTab.name=s.data.activeTab:delete e.activeTab.name,o.track("PAGE_SHOWN",{name:s.name}),r.cleanConfig(),s.data&&s.data.headerConfig&&r.setConfig(s.data.headerConfig);var c=l.toScroll;t(function(){p||(e.stateLoaded=!0,e.$broadcast("stateLoaded",e.stateLoaded)),c&&t(function(){n.hash(c),a()},500)})}),e.$on("$stateChangeError",function(n,i){t(function(){e.stateLoaded=!0})}),e.setStateLoaded=function(t){p=!t,e.stateLoaded=!!t,e.$broadcast("stateLoaded",e.stateLoaded)}}angular.module("apiApp",["ui.router","ngAnimate","ngMessages","ui.mask","api.intents","api.entities","api.interactions","api.other","api.speechrec","api.embedded","api.test.client","ui.sortable","ui.tokenfield","ngTextcomplete","ui.breadcrumbs","ui.controls","api.agents","ui.progressmeters","api.users","monospaced.elastic","angularFileUpload","ng-uuid","api.html","ngStorage","ngCookies","api.material","api.components","api.directives","api.preloadServerConfig"]),angular.module("apiApp").config(e).factory("$exceptionHandler",["$log",function(e){var t=[/^Possibly unhandled rejection:/];return function(n,i){t.some(function(e){return e.test(n)})?window.IS_DEBUG&&e.warn(n,i):e.error(n,i)}}]).run(t),e.$inject="$stateProvider, $urlRouterProvider, $compileProvider, $locationProvider, $httpProvider".split(", "),t.$inject="$rootScope, $timeout, $location, $cookies, $anchorScroll, InnerHeaderService, AnalyticsService, AnalyticsServiceV2, apiConfig, apiPushNotificationManager".split(", ")}(),function(){"use strict";function e(e){function t(e,t,n,i,a){return e.cacheAgents().then(function(e){return i(function(i,r){var o=e.data;if(!o||!o.status||o.status.code<200||o.status.code>=300)return r(e);var s,l=n.getKey(),c=t.agentId,d=o.agents;if(s=c?a.findAgent(d,function(e){return e.id==c}):a.findAgent(d,function(e){return e.id==l}),!s&&d.length>=0&&(s=d[0]),s){var u=s.id;u!=l&&(console.log("select agent from URL > setKey",u),n.setKey(s.id,s.id))}return i(s)})})}function n(e,t,n){if(t.getKey())return Promise.resolve();var i=e.initKey();return i.then(null,function(){n.go("auth.workPlace.get_started")}),i}function i(e,t){return t.getKey()?Promise.resolve():e.initKey().then(null,angular.noop)}function a(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({label:e[n],value:n});return t}function r(e){return e.getRootLanguages().then(function(e){return e},null)}function o(e){return e.getLocales().then(function(e){return e},null)}function s(e){return e.getTimezones().then(a,null)}e.state("auth.workPlace.agent_new",{url:"/newAgent",views:{workplace:{templateUrl:"partials/new_agent.html",controller:"AgentController",activeTab:"newAgent",resolve:{isAgentSelectedSkipReject:i,agentPromise:["$q",function(e){return e.when({data:{agent:{name:"",description:"",sampleData:null,language:"en",ownerId:"",primaryKey:"",secondaryKey:"",enableFulfillment:!1,defaultTimezone:"",googleAssistant:{}}}})}],samplesDataItems:["AgentData",function(e){return e.getSamplesData("en").then(function(e){return e.data?e.data:null},function(){return null})}],isEdit:function(){return!1},langItemsPromise:r,localeItemsPromise:o,timezonesItemsPromise:s}},control:{templateUrl:"partials/mainscreen/control-panel.html",controller:"ControlController"}},data:{activeTab:"newAgent",headerConfig:{form:!0,required:!1,pattern:/^[\S]{0,}$/,
messageExp:["required","pattern"],message:"Agent name can not contain whitespaces",label:"Agent name",focus:!0}}}).state("auth.workPlace.agent_edit",{url:"/editAgent/{agentId}/:tab",views:{workplace:{templateUrl:"partials/new_agent.html",controller:"AgentController",activeTab:"editAgent",resolve:{agentPromise:["$stateParams","AgentData","CurrentUser","ModelsProvider",function(e,t,n,i){return t.getAgent(e.agentId).then(function(e){if(e&&e.data&&e.data.agent){var t=e.data.agent;t=new i.Agent(t),e.data.agent=t,n.setKey(t.id,t.id)}return Promise.resolve(e)})}],samplesDataItems:["$q",function(e){return e.when(null)}],isEdit:function(){return!0},langItemsPromise:r,localeItemsPromise:o,timezonesItemsPromise:s}},control:{templateUrl:"partials/mainscreen/control-panel.html",controller:"ControlController"}},data:{activeTab:"editAgent",headerConfig:{form:!0,required:!0,pattern:/^[\S]{0,}$/,messageExp:["required","pattern"],message:"Agent name can not contain whitespaces",label:"Agent name",focus:!0}}}).state("auth.workPlace.agent_list",{url:"/agents",views:{workplace:{templateUrl:"partials/agents_list.html",controller:"AgentsController",activeTab:"agents",resolve:{}},control:{templateUrl:"partials/mainscreen/control-panel.html",controller:"ControlController"}},data:{activeTab:"agents",headerConfig:{label:'<em class="ico"><span class="flaticon stroke cube"></span></em>Agents',form:!1}}}).state("auth.workPlace.agent",{url:"/agent/{agentId}",views:{workplace:{template:'<div ui-view="agent"></div>',resolve:{isAgentSelected:n,currentAgentPromise:t}},control:{templateUrl:"partials/mainscreen/control-panel.html",controller:"ControlController"}},data:{headerConfig:{form:!1}}}),t.$inject="AgentData, $stateParams, CurrentUser, $q, CurrentAgentService".split(", "),n.$inject=["LoginService","CurrentUser","$state"],i.$inject=["LoginService","CurrentUser"],r.$inject=["LanguageServiceV2"],o.$inject=["LanguageServiceV2"],s.$inject=["LanguageService"]}angular.module("api.agents",["ui.router","api.html"]),angular.module("api.agents").config(e),e.$inject="$stateProvider".split(", ")}(),function(){"use strict";angular.module("api.confirmation",["ui.bootstrap","api.html"])}(),function(){"use strict";angular.module("api.conversion.entities",["ui.bootstrap"])}(),function(){"use strict";function e(e,t){e.state("auth.workPlace.agent.embedded",{url:"/embedded",views:{agent:{templateUrl:"partials/embedded.html",controller:"EmbeddedController",activeTab:"embedded"}},data:{activeTab:"embedded",headerConfig:{label:'<em class="ico"><span class="flaticon stroke move-down-1"></span></em>Embedded',model:!1,navButton:{}}}})}angular.module("api.embedded",["ui.router","urlConfig","ui.bootstrap","api.confirmation","ui.breadcrumbs"]),angular.module("api.embedded").config(e),e.$inject="$stateProvider, urls".split(", ")}(),function(){"use strict";function e(e,n){e.state("auth.workPlace.agent.entity_new",{url:"/newEntity",views:{agent:{templateUrl:"partials/new_entity.html",controller:"EntityController",activeTab:"newEntity",resolve:{entityPromise:["$q",function(e){return e.when({data:{name:"",entries:[{value:"",synonyms:[]},{value:"",synonyms:[]},{value:"",synonyms:[]},{value:"",synonyms:[]},{value:"",synonyms:[]}]}})}],autocompletePromise:["AutocompleteData",function(e){return e.listAutocomplete().then(t)}],isEdit:function(){return!1}}}},data:{activeTab:"newEntity",headerConfig:{form:!0,required:!0,pattern:/^[\S]{0,}$/,messageExp:["required","pattern"],message:"Entity name should start with a letter and can contain only the following: A-Z, a-z, 0-9, _ (underscore), - (dash).",label:"Entity name",focus:!0}}}).state("auth.workPlace.agent.entity_edit",{url:"/editEntity/{entityId}",views:{agent:{templateUrl:"partials/new_entity.html",controller:"EntityController",activeTab:"editEntity",resolve:{entityPromise:["$stateParams","EntityData","CurrentAgentService",function(e,t,n){return t.getEntity(e.entityId,n.getCurrentLanguage()).then(null,function(e){return e})}],autocompletePromise:["AutocompleteData",function(e){return e.listAutocomplete().then(t)}],isEdit:function(){return!0}}}},data:{activeTab:"editEntity",headerConfig:{form:!0,required:!0,pattern:/^[\S]{0,}$/,messageExp:["required","pattern"],message:"Entity name should start with a letter and can contain only the following: A-Z, a-z, 0-9, _ (underscore), - (dash).",label:"Entity name",focus:!0}}}).state("auth.workPlace.agent.entity_list",{url:"/entities",views:{agent:{templateUrl:"partials/entities_list.html",controller:"EntitiesController",activeTab:"listEntities"}},data:{activeTab:"listEntities",headerConfig:{label:'<em class="ico"><span class="flaticon stroke network"></span></em>Entities',form:!1}},resolve:{waitForAgentSettings:["CurrentAgentService",function(e){return e.waitForAgentSettings()}]}}).state("auth.workPlace.agent.entity_upload",{url:"/uploadEntity",views:{agent:{templateUrl:"partials/entity_upload.html",controller:"UploadController",resolve:{uploadType:function(){return"entity"},uploadUrl:function(){return n.apiUrls.entity},goBackState:function(){return"auth.workPlace.agent.entity_list"},preparedBreadcrumbs:function(){return{navButtonConfig:{selectedLabel:"Upload Entity",orderBy:{predicate:"eOrder",reverse:!1}},breadcrumbsConfig:{list:{label:"Entities",href:"#"+n.navUrls.entities},element:{label:"Upload Entity",href:""}}}}}}},data:{headerConfig:{label:'<em class="ico"><span class="flaticon stroke network"></span></em>Upload Entity',form:!1}}})}function t(e){var t=_.clone(e,!0);return t.entities&&_.remove(t.entities,function(e){return"@sys.any"==e.value||"@sys.any-except"==e.value}),t}angular.module("api.entities",["ui.router","urlConfig","oi.file","ui.bootstrap","api.confirmation","api.conversion.entities","ui.breadcrumbs"]),angular.module("api.entities").config(e),e.$inject="$stateProvider, urls".split(", ")}(),function(){try{angular.module("api.html")}catch(e){angular.module("api.html",[])}}(),function(){"use strict";function e(e,t){e.state("auth.workPlace.agent.intent_new",{url:"/newIntent",params:{fallbackIntent:null,parentIntent:null},views:{agent:{templateUrl:"partials/new_intent.html",controller:"IntentController",resolve:{intentPromise:["$q",function(e){return e.when({data:{name:"",auto:!0,contexts:[],templates:[],responses:[{parameters:[],resetContexts:!1,affectedContexts:[]}],source:null,priority:5e5,cortanaCommand:{navigateOrService:"NAVIGATE",target:""}}})}],autocompletePromise:["AutocompleteData",function(e){return e.listAutocomplete().then(function(e){return e})}],isEdit:function(){return!1}}}},data:{activeTab:"editIntent",headerConfig:{form:!0,required:!0,messageExp:["required"],message:"Intent name is required",label:"Intent name",focus:!1}},resolve:{}}).state("auth.workPlace.agent.intent_edit",{url:"/editIntent/{intentId}/{toScroll}",views:{agent:{templateUrl:"partials/new_intent.html",controller:"IntentController",activeTab:"editIntent",resolve:{intentPromise:["$stateParams","IntentData","CurrentAgentService",function(e,t,n){return t.getIntent(e.intentId,n.getCurrentLanguage()).then(null,function(e){return e})}],autocompletePromise:["AutocompleteData",function(e){return e.listAutocomplete().then(function(e){return e})}],isEdit:function(){return!0}}}},data:{activeTab:"editIntent",headerConfig:{form:!0,required:!0,messageExp:["required"],message:"Intent name to required",label:"Intent name",focus:!1}},resolve:{}}).state("auth.workPlace.agent.intent_list",{url:"/intents",views:{agent:{templateUrl:"partials/intents_list.html",controller:"IntentsController",activeTab:"listIntents"}},data:{activeTab:"listIntents",headerConfig:{form:!1,label:'<em class="ico"><span class="flaticon stroke thinking-comment-2"></span></em>Intents'}},resolve:{waitForAgentSettings:["CurrentAgentService",function(e){return e.waitForAgentSettings()}]}}).state("auth.workPlace.agent.intent_upload",{url:"/uploadIntent",views:{agent:{templateUrl:"partials/intent_upload.html",controller:"UploadController",resolve:{uploadType:function(){return"intent"},uploadUrl:function(){return t.apiUrls.intent},goBackState:function(){return"auth.workPlace.agent.intent_list"},preparedBreadcrumbs:function(){return{navButtonConfig:{selectedLabel:"Upload Intent",orderBy:{predicate:"iOrder",reverse:!1}},breadcrumbsConfig:{list:{label:"Intents",href:"#"+t.navUrls.intents},element:{label:"Upload Intent",href:""}}}}}}},data:{headerConfig:{form:!1,label:'<em class="ico"><span class="flaticon stroke thinking-comment-2"></span></em>Upload Intent file'}}})}angular.module("api.intents",["ui.router","urlConfig","ui.bootstrap","api.confirmation","ui.breadcrumbs","api.html"]),angular.module("api.intents").config(e),e.$inject="$stateProvider, urls".split(", ")}(),function(){"use strict";function e(e,t){e.state("auth.workPlace.agent.training.history",{url:"/history",views:{training:{templateUrl:"partials/interactions.html",controller:"InteractionsController"}}})}angular.module("api.interactions",["ui.router","api.html"]),angular.module("api.interactions").config(e),e.$inject="$stateProvider, urls".split(", ")}(),function(){"use strict";function e(e,t){e.theme("toast-error"),e.theme("toast-success"),e.theme("toast-info");var n=e.extendPalette("white",{50:"ffffff",100:"ffffff",200:"ffffff",300:"ffffff",400:"ffffff",500:"ffffff",600:"ffffff",700:"ffffff",800:"ffffff",900:"ffffff",A100:"ffffff",A200:"ffffff",A400:"ffffff",A700:"ffffff"});e.definePalette("white",n),e.theme("default").primaryPalette("light-blue").accentPalette("white")}angular.module("api.material",["ngMaterial"]),angular.module("api.material").config(e),e.$inject="$mdThemingProvider".split(", ")}(),function(){"use strict";function e(e,t,n,i){function a(t){return e.post(c,t)}function r(t){return e.post(d,t)}function o(t){return e.post(u,t)}function s(){return e.get(p)}function l(e){function t(e){e&&e.code&&!e.error?a.resolve({code:e.code,network:e.network}):a.reject(e&&e.error||"Unknown error"),i(function(){window.oauth_callback=null,window.clearInterval(u)})}var a=n.defer(),r=Math.max(800,Math.floor(.6*window.outerWidth)),o=Math.max(600,Math.floor(.5*window.outerHeight)),s=window.screenX+(window.outerWidth-r)/2,l=window.screenY+(window.outerHeight-o)/4,c="width="+r+",height="+o+",left="+s+",top="+l+",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";window.oauth_callback=t;var d=window.open("authorize_url_"+e,"Authorization",c),u=window.setInterval(function(){if(!1!==d.closed){if(window.clearInterval(u),!window.oauth_callback)return!1;a.reject("Auth popup closed")}},200);return i(function(){d.focus()}),a.promise}var c="/api-client/retrieveAccess/connect",d=t.oauth.disconnectUrl,u=t.oauth.loginUrl,p=t.oauth.networksUrl;return{authorize:l,login:o,connectNetwork:a,disconnectNetwork:r,getNetworks:s}}angular.module("api.oauth",["urlConfig"]).factory("OauthData",e),e.$inject="$http, urls, $q, $timeout".split(", ")}(),function(){"use strict";angular.module("api.other",["ui.router","ui.breadcrumbs","api.html"])}(),function(){"use strict";function e(e,t){function n(e,t,n,i){var a=t.defer();e.getCurrentUserEmail()?a.reject():a.resolve();var r=a.promise;return r.then(null,function(){var t=e.getCurrentAgentId();if(!t){var a=i.getCurrentAgent();t=a?a.id:null}t?n.go("auth.workPlace.agent.intent_list",{agentId:t}):n.go("auth.workPlace.get_started")}),r}t.state("authless",{views:{header:{templateUrl:"partials/blankHeader.html"},index:{template:'<div ui-view="authless"></div>'},footer:{templateUrl:"partials/footer.html"}},resolve:{isSignedIn:n}}).state("authless.login",{url:"/login",views:{authless:{templateUrl:"partials/mainscreen/login.html",controller:"LoginMainController",resolve:{config:["dynamicApiUrls",function(e){return e.getUrls()}]}}}}).state("authless.forgotPassword",{url:"/forgotPassword",views:{authless:{templateUrl:"partials/mainscreen/forgot_password.html",controller:"ForgotPasswordController"}}}),e.interceptors.push("httpInterceptor"),n.$inject="CurrentUser, $q, $state, CurrentAgentService".split(", ")}angular.module("api.security",["ui.bootstrap","http-auth-interceptor","ngCookies","urlConfig","api.oauth","api.html"]),angular.module("api.security").config(e),e.$inject="$httpProvider, $stateProvider".split(", ")}(),function(){"use strict";angular.module("api.speech",[])}(),function(){"use strict";function e(e,t){e.state("auth.workPlace.agent.speechrec",{url:"/speech-recognition",views:{agent:{templateUrl:"partials/speechrec.html",controller:"SpeechRecController",activeTab:"speechrec"}},data:{activeTab:"speechrec",headerConfig:{label:'<em class="ico"><span class="flaticon stroke microphone-1"></span></em>Speech Recognition',model:!1,navButton:{}}}})}angular.module("api.speechrec",["ui.router","urlConfig","ui.bootstrap","api.confirmation","ui.breadcrumbs"]),angular.module("api.speechrec").config(e),e.$inject="$stateProvider, urls".split(", ")}(),function(){"use strict";angular.module("api.test.client",["api.speech"])}(),function(){"use strict";function e(e){e.state("auth.userProfile",{views:{auth:{templateUrl:"partials/mainscreen/user_profile.html",controller:"ProfileController"}},data:{activeTab:"userProfile"},resolve:{profile:["UsersData",function(e){return e.getProfile().then(function(e){var t=e.data&&e.data.profile||{};if(t.planId){var n=t.planId.split("_")[0];t.planName=n.charAt(0).toUpperCase()+n.slice(1)}return t})}]}}).state("auth.userProfile.personalInformation",{url:"/userProfile/personalInformation",views:{userprofile:{templateUrl:"partials/mainscreen/profile/personal_information.html",controller:"ProfileController"},control:{templateUrl:"partials/mainscreen/control-panel.html",controller:"ControlController"}}}).state("auth.userProfile.accountSettings",{url:"/userProfile/accountSettings",views:{userprofile:{templateUrl:"partials/mainscreen/profile/account_settings.html",controller:"ProfileController"},control:{templateUrl:"partials/mainscreen/control-panel.html",controller:"ControlController"}}})}angular.module("api.users",["urlConfig","vcRecaptcha","api.oauth","api.confirmation","api.html"]),angular.module("api.users").config(e),e.$inject="$stateProvider".split(", ")}(),function(){"use strict";angular.module("ui.breadcrumbs",["api.html"])}(),function(){"use strict";angular.module("ui.controls",["api.html","ngSanitize","api.components"])}(),function(){"use strict";angular.module("ui.progressmeters",[])}(),function(){"use strict";angular.module("ui.sortable",[])}(),function(){"use strict";angular.module("ui.tokenfield",[])}(),function(){"use strict";function e(e,t,n){function i(){var e=t.host(),n=t.port();return"wss://"+e+(n?":"+n:"")+"/api/ws/query"}return{getUrls:function(){return Promise.resolve({data:n.getClientConfig()}).then(function(t){var n=t.data;e.protocolVersion=n.protocolVersion,e.apiUrls.test=n.query,e.apiUrls.intent=n.intent,e.apiUrls.entity=n.entity,e.oauth.networks=n.networks||[],e.asrHost=n.asrHost||i(),e.recaptcha.publicKey=n.recaptchaPublicKey,e.stripePublicKey=n.stripePublicKey,e.passwordEnabled=n.passwordEnabled,e.customClassifierEnabled=n.customClassifierEnabled,e.slackTestBotAppClientId=n.slackTestBotAppClientId,e.apiUrls.botsBase=n.slackBotsServiceUrl,e.botUrls.botsBase=n.slackBotsServiceUrl,e.facebookMessengerBotDeployUrl=n.facebookMessengerBotDeployUrl,e.kikBotDeployUrl=n.kikBotDeployUrl,e.telegramBotDeployUrl=n.telegramBotDeployUrl,e.twilioBotDeployUrl=n.twilioBotDeployUrl,e.agentDemoServiceBaseUrl=n.agentDemoServiceBaseUrl,e.agentDemoServiceEmbeddedBaseUrl=n.agentDemoServiceEmbeddedBaseUrl,e.skypeBotDeployUrl="https://github.com/api-ai/apiai-skype-bot",e.signupEnabled=n.signupEnabled,e.mlClassifierSupportedLangs=n.mlClassifierSupportedLangs?n.mlClassifierSupportedLangs.split(","):[],e.assistantSimulatorDefaultUrl=n.assistantSimulatorDefaultUrl?n.assistantSimulatorDefaultUrl:null,e.followupSupportedLangs=n.followupSupportedLangs?n.followupSupportedLangs.split(","):[]}),null}}}angular.module("urlConfig",[]).constant("urls",{protocolVersion:"",asrHost:"",securityUrls:{loginUrl:"/api-client/oauth/token",logoutUrl:"/api-client/logout",apiKeyUrl:"/api-client/user"},usersUrls:{signup:"/api-client/signup",profile:"/api-client/profile",changePassword:"/api-client/profile/password",forgotPassword:"/api-client/forgot_password",account:"/api-client/account",subscriptionPlans:"/api-client/payment/plans",subscribe:"/api-client/payment/subscribe",customer:"/api-client/payment/customer",checkCoupon:"/api-client/payment/coupon/",subscription:"/api-client/subscription",deleteAccount:"/api-client/deleteAccount",saveToken:"/api-client/saveToken",cleanToken:"/api-client/cleanToken",upgrade:"//dialogflow.com/pricing/",whitelist:"/api-client/w",getUnassignedProjects:"/api-client/getUnassignedProjects",enableGoogler:"/api-client/enableGoogler"},apiUrls:{test:"/api/query",intent:"/api/intents",intentFollowUp:"/api/intents/followup",entity:"/api/entities",agent:"/api-client/agents",agentPrivate:"/api/p/agents",agentBackend:"/api/agents",downloadAgent:"/api/agent",isAgentInTraining:"/api/agent/isAgentInTraining",train:"/api/agent/train",downloadVoiceCommandsAgent:"/api/voicecommands",downloadAlexaAgent:"/api/alexa",autocomplete:"/api/autocomplete",interactions:"/api/interactions",interactionConversations:"/api/interactions/conversations",interactionIntents:"/api/interactions/intents",interactionAnalytics:"/api/interactions/analytics",langs:"/api/langs",timezones:"/api/timezones",customDomainResponses:"/api/custom/domains",publishAgent:"/api/agent/publish",publishArtifacts:"/api/agent/publishArtifacts",presetAgentNames:"/api/agent/presetAgentNames",loadPresetAgent:"/api/agent/loadPresetAgent",loadPublicAgent:"/api/agent/loadPublicAgent",botsBase:"https://bots.dialogflow.com",botStart:"/api/testbot/start",botStop:"/api/testbot/stop",botUpdate:"/api/testbot/update",botIsRunning:"/api/testbot/isrunning",botsIntegration:"/api/integration/{agentId}/start",botsIntegrationStatus:"/api/integration/{agentId}/status",botsIntegrationStop:"/api/integration/{agentId}/stop",botsIntegrationUpdate:"/api/integration/{agentId}/update",botsIntegrationPostback:"/api/integration/{agentId}/postback",botsFBIntegration:"/facebook/{agentId}/webhook",botsFBStart:"/facebook/{agentId}/start",botsFBStatus:"/facebook/{agentId}/status",botsFBStop:"/facebook/{agentId}/stop",botsKikIntegration:"/kik/{agentId}/webhook",botsKikStart:"/kik/{agentId}/start",botsKikStatus:"/kik/{agentId}/status",botsKikStop:"/kik/{agentId}/stop",botsTelegramStart:"/telegram/{agentId}/start",botsTelegramStatus:"/telegram/{agentId}/status",botsTelegramStop:"/telegram/{agentId}/stop",botsTwilioIntegration:"/twilio/{agentId}/sms",botsTwilioStart:"/twilio/{agentId}/start",botsTwilioStatus:"/twilio/{agentId}/status",botsTwilioStop:"/twilio/{agentId}/stop"},botUrls:{botsBase:"https://bots.dialogflow.com",generateTestBotUrl:function(e,t,n){return"slack"===t&&(t="api"),"slackRest"===t&&(t="slack"),"slack.integration"===t&&(t="api/integration"),"/"+t+"/"+e+"/"+n}},navUrls:{entities:"/entities",newEntity:"/newEntity",editEntity:"/editEntity/",uploadEntity:"/uploadEntity",intents:"/intents",newIntent:"/newIntent",editIntent:"/editIntent/",uploadIntent:"/uploadIntent",agents:"/agents",newAgent:"/newAgent",editAgent:"/editAgent/",interactions:"/logs"},oauth:{loginUrl:"/api-client/oauth_login",connectUrl:"/api-client/profile/connect",disconnectUrl:"/api-client/profile/disconnect",networksUrl:"/api-client/profile/networks",networks:[]},domainsList:"/api-client/domains/conf",domainsQuestion:"/api-client/domains/custom",smalltalkV1V2Map:"/api-client/assets/configs/smalltalkV1V2.json",recaptcha:{publicKey:""},stripePublicKey:"",passwordEnabled:!0,customClassifierEnabled:!1,cloudFunctions:{enableAsync:"/api-client/enable-cloudfunctions-async",checkServiceManagerOperation:"/api-client/enable-cloudfunctions-operations",get:"/api-client/cloudfunctions",deploy:"/api-client/cloudfunctions",checkOperation:"/api-client/cloudfunctions-operations",getFirebaseBillingPlan:"/api-client/firebase-billing-plan",getLogs:"/api-client/cloudfunctions-logs",downloadFunction:"/api-client/cloudfunctions-download"},agentDemoServiceBaseUrl:null,agentDemoServiceEmbeddedBaseUrl:null}).factory("dynamicApiUrls",e),e.$inject=["urls","$location","apiConfig"]}(),function(){"use strict";function e(){return{compile:function(e,t){return t.ngClick="!("+t.aDisabled+") && ("+t.ngClick+")",function(e,t,n){e.$watch(n.aDisabled,function(e){void 0!==e&&t.toggleClass("disabled",e)}),t.on("click",function(t){e.$eval(n.aDisabled)&&t.preventDefault()})}}}}angular.module("ui.controls").directive("aDisabled",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{breadcrumbs:"="},controller:"breadcrumbsCtrl",templateUrl:"templates/breadcrumbs.html"}}function t(e){e.getItemByKey=function(e,t){var n=void 0;return e.some(function(e,i){return n=i,e.key==t})?e[n]:void 0},e.getSelectedItem=function(){return e.getItemByKey(e.breadcrumbs.dropdown,e.breadcrumbs.selectedKey)},e.selectItem=function(t){e.breadcrumbs.selectedKey=t.key,e.ddActive=t},e.$watch("breadcrumbs",function(t,n){var i=t.selectedKey;t.dropdown.every(function(t){return i!=t.key||(e.ddActive=t,!1)}),e.filteredDropdown=t.dropdown.filter(function(e){return i!=e.key})},!0)}angular.module("ui.breadcrumbs").directive("breadcrumbs",e),angular.module("ui.breadcrumbs").controller("breadcrumbsCtrl",t),e.$inject=[],t.$inject=["$scope"]}(),function(){"use strict";function e(e,t,n,i){var a=["$scope",function(e){void 0===e.templateEditorCommonConfig&&(e.templateEditorCommonConfig={templatePainter:t.painterFactory()})}];return{restrict:"EA",link:function(a,r,o){function s(){function i(e,t){var n=r.prop("selectionStart");return r.is(":focus")&&n>e&&n<=t}r.overlay&&(l=r.overlay([{processFn:function(r){function s(e){var t=c(e);return'<span class="'+d(e)+'" style="background-color:'+t+'">'}function l(){return"</span>"}function c(e){if(i(e.start,e.stop))return"";var t=a.$eval(o.colorizeAlias);return a.templateEditorCommonConfig.templatePainter.getColor(e,t)}function d(e){var n;switch(e.type){case"ref":case"refArgs":case"alias":var i=e.text;if(0===i.indexOf("[")||0===i.indexOf("@{")){n="";break}var r=a.templateEditorCommonConfig&&a.templateEditorCommonConfig.entities||[];n=!!r.length&&r.every(function(e){var t=_.has(e,"value")?e.value:e;return 0!==i.indexOf(t)})?t.ERROR_CLR_CLSS:"";break;default:n=""}return n}var u=e.collectTreeMeta(r);return n.paintTree(u,r,s,l)}},{processFn:function(e){return n.wrapComments(c,d,e)}}]))}var l,c='<span class="'+t.COMMENT_CLR_CLSS+'">',d="</span>";a.blurFn=function(){l&&r.overlay("destroyOverlay"),i(s,0),a.ngBlur()},s(),a.$on("destroyOverlays",function(){r.overlay("destroyOverlay")}),a.$on("drawOverlays",function(){s()})},controller:a}}angular.module("ui.controls").directive("colorize",e),e.$inject="ParserService, ColorHelperService, WrapColorHelperService, $timeout".split(", ")}(),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){var a=[i.$viewValue],r=0;e.$watch(function(){return i.$viewValue},function(e,t){0==r&&(a[0]=e)}),t.on("keydown",function(e){if(13==e.which){var n=i.$viewValue;a.splice(0,1);var o=a.filter(function(e,t){return e!=n});n&&o.unshift(n),o.unshift(""),a=o,r=0}else 38==e.which?r<a.length-1&&(++r,t.val(a[r]),i.$setViewValue(a[r])):40==e.which&&r>0&&(--r,t.val(a[r]),i.$setViewValue(a[r]))})}}}angular.module("ui.controls").directive("consoleHistory",e)}(),function(){"use strict";function e(e){return{restrict:"A",scope:{params:"=defineParameters"},link:function(t,i,a,r){n++;var o=$(".select-parameter");if(o.length){var s=o.scope();s&&(s.$destroy(),s=null,o.remove(),o=null)}var l=t.$new();l.params=t.params;var c=angular.element("<div select-parameter></div>");$("body").append(e(c)(l))},controller:"defineParametersCtrl",controllerAs:"defineParameters"}}function t(e,t){t.on("$destroy",function(){if(!(--n>0)){var e=$(".select-parameter");if(e.length){var t=e.scope();t&&(t.$destroy(),t=null,e.remove(),e=null)}}})}angular.module("ui.controls").directive("defineParameters",e).controller("defineParametersCtrl",t);var n=0;e.$inject=["$compile"],t.$inject=["$scope","$element"]}(),function(){"use strict";function e(e,t,n){return{restrict:"A",scope:{config:"=dropdownInput"},link:function(e,i,a,r){if(e.config){e.item="",e.isHide=!0,e.onBlur=function(){e.isHide=!0},e.autocompleteCfg={select:function(t,i){e.$apply(function(){e.isHide=!0,e.config.actionFn(i.item.value),n(function(){e.item=""},0)})},source:e.config.items,delay:0,minLength:0};var o=t('<input type="text" ng-model="config.value" spellcheck="false" ng-model="item" sti-autocomplete="autocompleteCfg" ng-hide="isHide" ng-blur="onBlur()" class="form-control popup-input">')(e);i.after(o),i.on("click",function(t){e.$apply(function(){e.isHide&&n(function(){if(o.focus(),e.config.selectValue){var t=o[0];t.setSelectionRange(0,t.value.length)}},100),e.isHide=!e.isHide})})}}}}angular.module("ui.controls").directive("dropdownInput",e),e.$inject="$parse, $compile, $timeout".split(", ")}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n,i){var a=angular.element('<div class="{{classes}}" ng-show="isShow" role="alert">{{title}}</div>'),r=t.$new(!1,t),o=e(a),s=o(r);n.append(s);var l=r[i.fadeInCopy];r.title=l.beforeClickLabel,r.isShow=!1,r.classes=l.classes,n.mouseenter(function(){r.$apply(function(){r.isShow=!0})}),n.mouseleave(function(){r.$apply(function(){r.isShow=!1,r.title=l.beforeClickLabel})}),n.click(function(){r.$apply(function(){r.title=l.afterClickLabel})})}}}angular.module("ui.controls").directive("fadeInCopy",e),e.$inject=["$compile"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,n){var i=n.focusError||"focusError";e.$on(i,function(){t.find(":not(form).ng-invalid:first").focus()})}}}angular.module("ui.controls").directive("focusError",e)}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n,i){t.$watch(i.focusOn,function(i){!0===i&&(-1!=navigator.userAgent.toLowerCase().indexOf("safari")&&-1==navigator.userAgent.toLowerCase().indexOf("chrome")?t.$$postDigest(function(){n[0].focus()}):e(function(){n[0].focus()}))})}}}angular.module("api.other").directive("focusOn",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,n){return{restrict:"A",scope:{config:"=innerHeader"},controller:"innerHeaderCtrl",templateUrl:"templates/innerHeader.html",link:function(e){t(function(){n.config.headerForm=e.headerForm}),e.$watch("config.headerForm.name.$valid",function(e){n.setValid(e)})}}}function t(e,t,n,i,a,r,o,s){e.navButton={doAction:function(e){i(function(){if(!e.callback)return n.go(e.sref);e.callback()},100)},notEmpty:function(){return void 0!==e.config.navButton&&void 0!==e.config.navButton.items&&e.config.navButton.items.length>0}},e.getKey=function(){return r.getKey()},e.trustAsHtml=function(e){return t.trustAsHtml(e)}}angular.module("ui.controls").directive("innerHeader",e),angular.module("ui.controls").controller("innerHeaderCtrl",t),e.$inject=["$rootScope","$timeout","InnerHeaderService"],t.$inject=["$scope","$sce","$state","$timeout","InnerHeaderService","CurrentUser","UtilsService","urls"]}(),function(e){try{e=angular.module("api.html")}catch(t){e=angular.module("api.html",[])}e.run(["$templateCache",function(e){"use strict";e.put("partials/agents.html",'<h2>Settings</h2><div ng-repeat="agent in agents"><h3>{{agent.name}}</h3><label>Agent id :</label><span>{{agent.id}}</span></div><br><h3>For now all agents share the same apiKey</h3><label>Api Key :</label><span>{{apiKey}}</span><hr><form ng-submit="addAgent(newAgent)"><input type="text" ng-model="newAgent.name"><input type="submit" value="Create Agent"></form>'),e.put("partials/agents_list.html",'<static-info message="{{limitsManager.getText(\'agents\')}}" ng-show="newAgentDisabled"></static-info><div class="intents" ng-cloak class="ng-cloak"><form class="search-form" ng-show="agents.length > 0"><div class="input-group wide"><input ng-model="agentsFilter" type="text" class="form-control" placeholder="Search agents"> <span class="mic-ico"><span class="glyphicon glyphicon-search"></span></span></div></form><ul class="list-group"><div paging="paging" class="paging-header"></div><li ng-repeat="agent in filteredAgents | orderBy: sorting.predicate:sorting.reverse | startFrom:paging.currentPage*paging.pageSize | limitTo:paging.pageSize" class="list-group-item" ng-init="isIcoShown=false" ng-mouseover="isIcoShown=true" ng-mouseleave="isIcoShown=false"><a ng-click="selectAgent(agent)"><span class="name">{{agent.name}}</span></a><div class="ico-group" ng-show="isIcoShown"><a class="ico-item" ng-click="selectAgent(agent)"><span class="flaticon stroke settings"></span></a></div><br><span ng-if="hasCapability(\'isMultilingual\')" class="small-description" ng-repeat="lang in agent.getSupportedLanguages()" ng-bind="formatLocale(lang) + \'&nbsp;\'"></span></li><div paging="paging" class="paging-footer"></div></ul><span class="loader7" ng-show="isSpinnerShowed"></span><div class="empty-box" ng-show="!isSpinnerShowed && agents.length == 0"><div class="ico"><span class="flaticon stroke info-2"></span></div><div class="text">No agents are defined at this time. <a href="#/newAgent">Create an agent.</a></div></div></div>'),e.put("partials/analyticsFilter.html",'<md-input-container><md-select ng-model="config.after.currentPeriod" ng-change="config.after.updatePeriod(config.after.currentPeriod)" aria-label="Select analytics period"><md-option ng-repeat="periodItem in config.after.periods" ng-value="periodItem.value">{{periodItem.name}}</md-option></md-select></md-input-container>'),e.put("partials/blankHeader.html",'<toolbar-notice-manual class="animated-show"><md-toolbar class="_md _md-toolbar-transitions"><custom-toolbar-notice-manual aria-hidden="false"><div class="md-toolbar-tools" style="background-color:#fff1e3"><button class="md-icon-button md-button md-ink-ripple" type="button" aria-label="Settings" ng-disabled="true" style="color:#d81413" disabled><span class="flaticon stroke info-2 alert-icon ng-scope"></span></button><p flex="" style="color:#d81413;font-size:14px" class="flex">Weve changed our name! API.AI is now Dialogflow. <a href="https://blog.dialogflow.com/post/apiai-new-name-dialogflow-new-features" target="_blank">Learn more here</a>.</p></div></custom-toolbar-notice-manual></md-toolbar></toolbar-notice-manual><header id="header" ng-cloak class="ng-cloak is-top-notice"><nav class="navbar navbar-inverse" role="navigation"><div class="container"><div class="navbar-header"><a class="navbar-brand" href="/api-client" target="_blank"></a></div><ul class="nav navbar-nav" ng-cloak><li><a ng-href="https://dialogflow.com/docs/getting-started/basics" target="_blank">Docs <span class="nav-underline"></span></a></li><li><a ng-href="https://discuss.api.ai/" target="_blank">Forum<span class="nav-underline"></span></a></li></ul><ul class="nav navbar-nav navbar-right" ng-cloak><li><a ng-href="https://dialogflow.com">Back to Dialogflow <span class="nav-underline"></span></a></li></ul></div></nav></header>'),
e.put("partials/confirmation.html",'<div class="modal-header" ng-cloak class="ng-cloak"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h3 class="modal-title">{{ data.title }}</h3></div><div class="modal-body"><div class="white-space-pre-line">{{ data.message }}</div><div ng-form="form" ng-show="data.controlWord" ng-enter="(!data.controlWord || form.$valid) && ok()"><fieldset><label class="input-holder" style="width:100%;margin-top:20px"><input id="confirm-user-input" ng-model="userInput" autofocus name="word" word-validation="controlWord" word-validation-regexp="^{{ data.controlWord }}$" class="form-control" type="text" placeholder="{{ data.placeholder }}" focus-on="focusOnInput" md-autofocus="focusOnInput"></label></fieldset></div></div><div class="modal-footer bordered"><md-button id="confirm-button-ok" ng-href="{{data.ngHref}}" class="md-raised md-primary" ng-click="!(data.controlWord && form.$invalid) && ok()" ng-show="data.okLabel" ng-disabled="data.controlWord && form.$invalid" ng-class="{ \'btn-primary\': !data.controlWord, \'btn-default\': data.controlWord && form.$invalid, \'btn-danger\': data.controlWord && form.$valid }">{{ data.okLabel }}</md-button><md-button id="confirm-button-cancel" ng-href="{{\'javascript:void(0);\'}}" class="md-raised" ng-click="cancel()" ng-show="data.cancelLabel">{{ data.cancelLabel }}</md-button></div>'),e.put("partials/embedded.html",'<div ng-form="embedded" ng-cloak class="ng-cloak"><div class="alert alert-general-light alert-dismissible animate-show" role="alert"><span class="flaticon stroke info-2 alert-icon"></span><div class="frame"><p>Your agent can work fully or partially offline.</p><p>Available with the <b>Preferred</b> plan.</p><p><a href="mailto:sales@dialogflow.com?subject=Dialogflow embedded solution">Contact us</a> to learn more.</p></div></div></div>'),e.put("partials/entities_list.html",'<static-info message="{{limitsManager.getText(\'entities\')}}" ng-show="!newEntityEnabled"></static-info><div class="intents" ng-cloak class="ng-cloak"><form class="search-form" ng-show="entities.length > 0 && !getSelectedIds().length"><div class="input-group"><input ng-model="entitiesFilter" type="text" spellcheck="false" class="form-control" placeholder="Search entities"> <span class="mic-ico"><span class="glyphicon glyphicon-search"></span></span></div></form><div class="text-box short ng-hide" ng-show="entitiesFilter && filteredEntities.length === 0" aria-hidden="false"><div class="comment-box"></div><p><span class="flaticon stroke info-2" style="margin-right:10px"></span>No results found.</p></div><div layout="row" class="list-batch-actions" ng-if="entities.length && getSelectedIds().length"><md-checkbox class="md-primary list-batch-all" aria-label="select all" ng-model="checkAllFlag" ng-change="checkAll(checkAllFlag)"></md-checkbox><div flex layout="row" layout-align="left center"><div ng-if="remainBatchUnselected"><strong ng-bind="getSelectedIds().length"></strong> entities selected. <a ng-click="checkAllFlag = true; checkAll(true, true)">Select all</a></div></div><md-button ng-click="batchAction(\'copy\')" ng-disabled="!getSelectedIds().length">Copy</md-button><md-button ng-click="batchAction(\'move\')" ng-disabled="!getSelectedIds().length">Move</md-button><md-button ng-click="batchDelete()" ng-disabled="!getSelectedIds().length">Delete</md-button><md-button ng-click="switchBatch(false)">Cancel</md-button></div><ul class="list-group"><div paging="paging" class="paging-header"></div><li ng-repeat="entity in filteredEntities | orderBy: sorting.predicate:sorting.reverse | startFrom:paging.currentPage*paging.pageSize | limitTo:paging.pageSize" class="list-group-item" ng-init="isIcoShown=false" ng-mouseover="isIcoShown=true" ng-mouseleave="isIcoShown=false"><span ng-show="isAgentReadOnly || (!getSelectedIds().length && !isIcoShown)" class="entity-list__entity-prefix">@</span><md-checkbox ng-click="switchBatch(true)" ng-show="!isAgentReadOnly && (getSelectedIds().length || isIcoShown)" class="md-primary list-batch" ng-model="batchSelected[entity.id]" aria-label="mark for batch operation"></md-checkbox><a ui-sref="auth.workPlace.agent.entity_edit({ agentId:agentId, entityId:entity.id })"><span class="name">{{entity.name}}</span></a><div class="ico-group" ng-show="isIcoShown"><a target="_blank" class="ico-item" data-toggle="dropdown"><span class="flaticon stroke cloud-download"></span></a><ul class="dropdown-menu pull-right"><li><a ng-click="goDonwloadEntity(entity, \'json\')">JSON</a></li><li><a ng-click="goDonwloadEntity(entity, \'csv\')">CSV</a></li></ul><a class="ico-item" ng-click="deleteEntity(entity)" ng-hide="isAgentReadOnly"><span class="flaticon stroke trash"></span></a></div></li><div paging="paging" class="paging-footer"></div></ul><div class="empty-box" ng-show="!isSpinnerShowed && entities.length == 0"><div class="ico"><span class="flaticon stroke info-2"></span></div><div class="text"><strong>No entities yet. <a ui-sref="auth.workPlace.agent.entity_new({ agentId:agentId })" ng-hide="isAgentReadOnly">Create the first one.</a></strong></div><div class="text">Entities are objects your app or device takes action on. <a href="https://dialogflow.com/docs/entities" target="_blank">Read more here</a>.</div><div class="text">We\'ve already created some entities, so you don\'t have to describe everything from scratch. <a href="https://dialogflow.com/docs/entities#system-entities" target="_blank">Read about system entities here</a>.</div></div></div>'),e.put("partials/entity_upload.html",'<div class="comment-box"><p>You can upload entity files in CSV or JSON formats.</p><p>CSV file should have the following format:<ul><li>Each entry corresponds to a new line.</li><li>The reference value and synonyms should be separated by commas.</li><li>Each reference value and synonym should be enclosed in double-quotes.</li><li>The reference value should be at the beginning of the line.</li><li>Include the reference value twice if you want it to be matched by the entity.</li></ul></p><input type="file" oi-file="options"><div oi-file="options" class="drag-file">You can drag and drop the file here.</div><div ng-repeat="alert in alerts"><alert type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert></div></div>'),e.put("partials/error.html",'<div class="intents" ng-cloak class="ng-cloak"><div class="empty-box"><div class="ico"><span class="flaticon stroke J17"></span></div><div class="text">Error:</div><div class="text">{{errorDetails}}</div></div></div>'),e.put("partials/footer.html",'<footer id="footer"><div class="container"><div class="footer-frame clearfix"><strong class="footer-logo"><a ng-click="goHome()"></a></strong><ul class="footer-nav"><li><h4>Developer</h4><ul><li><a href="https://dialogflow.com/docs/getting-started/basics" target="_blank">API &amp; Docs</a></li><li><a href="/">Developer Console</a></li></ul></li><li><h4>About</h4><ul><li><a href="https://dialogflow.com/pricing/" target="_blank">Pricing</a></li></ul></li><li><h4>Stay in touch</h4><ul><li><a href="https://twitter.com/dialogflow" target="_blank">Twitter</a></li><li><a href="https://www.facebook.com/apiaiofficial" target="_blank">Facebook</a></li><li><a href="https://plus.google.com/107509351463671154225" rel="publisher" target="_blank">Google+</a></li><li><a href="https://www.linkedin.com/company/speaktoit" target="_blank">LinkedIn</a></li></ul></li></ul></div><div class="footer-row clearfix"><div class="copy"> 2017 Dialogflow</div><ul class="footer-submenu"><li><a href="https://dialogflow.com/terms/" target="_blank">Terms of Use</a></li></ul></div></div></footer>'),e.put("partials/get_started_content.html",'<div class="video-frame"><div class="title">Get started by watching the intro video</div><div class="btn-holder"><a class="btn btn-success" id="get-started-video" ng-click="analyticsTrack(\'TUTORIAL_WELCOMEVIDEO_PRESSED\')" ng-if="!fromCustomLanding()" youtube href="https://www.youtube.com/watch?v=Om7tyGGemXI"><span class="flaticon stroke right-1"></span> Watch video</a> <a class="btn btn-success" id="get-started-video" ng-click="analyticsTrack(\'TUTORIAL_WELCOMEVIDEO_PRESSED\')" ng-if="fromCustomLanding()" youtube href="https://www.youtube.com/watch?v=6tEfJeclEXQ"><span class="flaticon stroke right-1"></span> Watch video</a></div></div><div class="row text-under-video" id="text-under-video"><div class="col-md-8"><div ng-if="!fromCustomLanding()" class="gs-title">Now it\'s time to create your first agent.</div><div ng-if="fromCustomLanding()" class="gs-title" ng-bind="::getCustomIntegrationSubtitle()"></div></div><div class="col-md-4"><div class="btn-holder gs-btn-create"><div class="btn-group"><button ng-if="!fromCustomLanding()" ng-click="createAgentCallback()" type="button" class="md-button md-primary md-raised">Create Agent</button> <button ng-if="fromCustomLanding()" ng-click="createAgentCallback()" type="button" class="md-button md-primary md-raised" ng-bind="::getCustomIntegrationCreateAgentTitle()"></button></div></div></div></div>'),e.put("partials/header.html",'<header id="header" ng-cloak class="ng-cloak"><nav class="navbar navbar-inverse" role="navigation"><div class="container"><div class="navbar-header"><a class="navbar-brand" href="/api-client" target="_blank"></a></div><ul class="nav navbar-nav" ng-cloak><li ng-show="getUser()" ng-class="{active: (activeTab.name == \'listEntities\' || activeTab.name == \'newEntity\' || activeTab.name == \'systemEntities\'), opened: true, inactive: !getKey()}"><a ui-sref="auth.workPlace.agent.entity_list" ng-show="getKey()"><em class="ico"><span class="flaticon stroke network"></span></em>Entities<span class="nav-underline"></span></a> <a ui-sref="auth.workPlace.agent_list" ng-hide="getKey()"><em class="ico"><span class="flaticon stroke network"></span></em>Entities<span class="nav-underline"></span></a></li><li ng-show="getUser()" ng-class="{active: (activeTab.name == \'listIntents\' || activeTab.name == \'newIntent\' || activeTab.name == \'editIntent\'), inactive: !getKey()}"><a ui-sref="auth.workPlace.agent.intent_list" ng-show="getKey()"><em class="ico"><span class="flaticon stroke thinking-comment-2"></span></em>Intents<span class="nav-underline"></span></a> <a ui-sref="auth.workPlace.agent_list" ng-hide="getKey()"><em class="ico"><span class="flaticon stroke thinking-comment-2"></span></em>Intents<span class="nav-underline"></span></a></li><li ng-show="getUser()" ng-class="{active: (activeTab.name == \'interactions\'), inactive: !getKey()}"><a ng-click="reload(\'auth.workPlace.agent.interactions\')" ng-show="getKey()"><em class="ico"><span class="flaticon stroke menu"></span></em>Logs<span class="nav-underline"></span></a></li><li ng-show="getUser()" ng-class="{active: (activeTab.name == \'knowledgebase\'), inactive: !getKey()}"><a ui-sref="auth.workPlace.agent.knowledgebase" ng-show="getKey()"><em class="ico"><span class="flaticon stroke book-5"></span></em>Domains<span class="nav-underline"></span></a></li><li><a ng-href="https://dialogflow.com/docs/getting-started/basics" target="_blank">Docs<span class="nav-underline"></span></a></li><li><a ng-href="https://discuss.api.ai/" target="_blank">Forum<span class="nav-underline"></span></a></li></ul><ul class="nav navbar-nav navbar-right" ng-cloak><li ng-hide="getUser()"><a ng-href="https://dialogflow.com/">Back to Dialogflow</a></li><li class="dropdown" ng-show="getUser()"><a class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog fa-lg" style="margin-right:9px"></span><b class="caret"></b></a><ul class="dropdown-menu" ng-cloak><li><a ui-sref="auth.userProfile.personalInformation"><span class="flaticon stroke profile"></span> Profile</a></li><li><a ui-sref="auth.workPlace.agent_list"><span class="flaticon stroke menu-list-2"></span> Manage Agents</a></li><li><a ui-sref="getStarted"><span class="flaticon stroke home-2"></span> Getting Started</a></li><li><a ng-href="//support.dialogflow.com" target="_blank"><span class="flaticon stroke help-2"></span> Help</a></li><li class="divider"></li><li><a ng-click="logout()"><span class="flaticon stroke logout"></span> Logout from {{getUser()}}</a></li></ul></li></ul></div></nav></header>'),e.put("partials/importAgentTemplate.html",'<div nv-file-drop uploader="uploader"><div class="modal-header" ng-cloak class="ng-cloak"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h3 class="modal-title">Upload agent</h3></div><div class="modal-body"><p>You can upload an agent as a zip archive consisting of the folders "intents" and "entities" and a file called "agent.json". The folders should contain JSON files of the intents and entities. In the agent.json file you can include agent settings such as language, enabled domains, default time zone, match mode, and ML classification threshold.</p><strong>Important:</strong><p>Intents and entities that you upload will replace existing intents and entities with the same name.</p><div class="upload-zone"><span class="upload-info">Drop files here to attach them<br>or</span><label class="md-button md-primary md-raised" ng-disabled="uploader.queue.length > 0">Select file <input type="file" nv-file-select uploader="uploader" style="display:none" ng-disabled="uploader.queue > 0"></label></div><div ng-repeat="item in uploader.queue" ng-show="uploader.queue.length > 0"><div><i class="fa fa-pause pull-right" style="color:#ccccd3" ng-click="item.cancel()" ng-show="item.isUploading"></i><span ng-bind="item.file.name"></span><div class="progress"><div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></div></div><div ng-form="form" ng-show="uploader.queue.length > 0"><fieldset ng-if="!clear"><label class="input-holder" style="width:100%"><input ng-model="userInput" autofocus name="word" word-validation="controlWord" word-validation-regexp="^IMPORT$" class="form-control" type="text" placeholder="Type IMPORT and click the Import button" ng-enter="form.$valid && onEnterWord()" focus-on="uploader.queue.length > 0"></label></fieldset><fieldset ng-if="clear"><label class="input-holder" style="width:100%"><input ng-model="userInput" autofocus name="word" word-validation="controlWord" word-validation-regexp="^RESTORE$" class="form-control" type="text" placeholder="Type RESTORE and click the Restore button" ng-enter="form.$valid && onEnterWord()" focus-on="uploader.queue.length > 0"></label></fieldset></div><div ng-repeat="alert in alerts"><alert type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert></div></div><div class="modal-footer bordered"><md-button class="md-primary md-raised" ng-click="ok()" ng-show="done" focus-on="done">Done</md-button><md-button class="md-primary md-raised" ng-click="importAgent()" ng-disabled="form.$invalid || uploader.queue.length == 0 || uploader.isUploading" ng-hide="done">{{:: clear ? "Restore" : "Import"}}</md-button><md-button class="md-raised" ng-click="cancel()">Cancel</md-button></div></div>'),e.put("partials/intent_upload.html",'<div class="comment-box"><p>You can upload intent files in JSON format.</p><input type="file" oi-file="options"><div oi-file="options" class="drag-file">You can drag and drop the file here.</div><div ng-repeat="alert in alerts"><alert type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert></div></div>'),e.put("partials/intents_list.html",'<static-info message="{{limitsManager.getText(\'intents\')}}" ng-show="!newIntentEnabled"></static-info><div class="intents" ng-cloak class="ng-cloak"><form class="search-form" ng-show="intents.length > 0 && !getSelectedIds().length"><div class="input-group"><input id="input-search-intents" ng-model="intentsFilter" type="text" spellcheck="false" class="form-control" placeholder="Search intents"> <span class="mic-ico"><span class="glyphicon glyphicon-search"></span><md-menu><i class="fa fa-filter search-filter" ng-class="{\'is-active\': ignoreFilter === filterStates.regular || ignoreFilter === filterStates.fallback}" ng-click="$mdOpenMenu($event)"></i><md-menu-content width="4"><md-menu-item><md-button ng-click="switchIgnoreFilter(filterStates.all)">All<i ng-class="{\'is-active\': ignoreFilter === filterStates.all}" class="search-filter-filter-checked pull-right fa fa-check" aria-hidden="true"></i></md-button></md-menu-item><md-menu-item><md-button ng-click="switchIgnoreFilter(filterStates.regular)">Regular<i ng-class="{\'is-active\': ignoreFilter === filterStates.regular}" class="search-filter-filter-checked pull-right fa fa-check" aria-hidden="true"></i></md-button></md-menu-item><md-menu-item><md-button ng-click="switchIgnoreFilter(filterStates.fallback)">Fallback<i ng-class="{\'is-active\': ignoreFilter === filterStates.fallback}" class="search-filter-filter-checked pull-right fa fa-check" aria-hidden="true"></i></md-button></md-menu-item></md-menu-content></md-menu></span></div></form><div class="text-box short ng-hide" ng-show="intentsFilter && filteredIntents.length === 0" aria-hidden="false"><div class="comment-box"></div><p><span class="flaticon stroke info-2" style="margin-right:10px"></span>No results found.</p></div><div ng-if="!isSpinnerShowed && intents.length && filteredIntents.length"><div layout="row" class="list-batch-actions" ng-if="getSelectedIds().length"><md-checkbox class="md-primary list-batch-all" aria-label="select all" ng-model="checkAllFlag" ng-change="checkAll(checkAllFlag)"></md-checkbox><div flex layout="row" layout-align="left center"><div ng-if="remainBatchUnselected"><strong ng-bind="getSelectedIds().length"></strong> intents selected. <a ng-click="checkAllFlag = true; checkAll(true, true)">Select all</a></div></div><md-button ng-click="batchAction(\'copy\')" ng-disabled="!getSelectedIds().length">Copy</md-button><md-button ng-click="batchAction(\'move\')" ng-disabled="!getSelectedIds().length">Move</md-button><md-button ng-click="batchDelete()" ng-disabled="!getSelectedIds().length">Delete</md-button><md-button ng-click="switchBatch(false)">Cancel</md-button></div><ul class="list-group"><div paging="paging" class="paging-header"></div><li ng-repeat="intent in filteredIntents | orderBy:sorting.predicate:sorting.reverse | emptyToUndefined:intentsFilter | startFrom:paging.currentPage*paging.pageSize | limitTo:paging.pageSize track by $index"><intents-list-item intent="intent" list-follow-up-intents="listFollowUpIntents" layer="-1" refresh-intents-cb="refreshIntents" batch-selected="batchSelected" is-batch="getSelectedIds().length" switch-batch-cb="switchBatch" path-expand-intents="pathExpandIntents" is-agent-read-only="isAgentReadOnly"></intents-list-item></li><div paging="paging" class="paging-footer"></div></ul></div><div class="empty-box" ng-show="!isSpinnerShowed && regularIntentsCount == 0"><div class="ico"><span class="flaticon stroke info-2"></span></div><div class="text"><strong>No regular intents yet. <a ui-sref="auth.workPlace.agent.intent_new({ agentId:agentId })" ng-hide="isAgentReadOnly">Create the first one.</a></strong></div><div class="text">Intents are mappings between a user\'s queries and actions fulfilled by your software. <a href="https://dialogflow.com/docs/intents" target="_blank">Read more here</a>.</div><div class="text">Before you start, <a ui-sref="auth.workPlace.agent.knowledgebase">check out the domains</a>. Weve created conversational interactions for popular dialogue scenarios that can be turned on/off with one click.</div></div></div>'),e.put("partials/interactions.html",'<div id="interactions" class="tabset"><div class="tab active"><div class="intents"><static-info message="This section includes history for all enabled languages" ng-if="!isUpdating && (sessionInteractionsStore.length > 0) && $root.hasCapability(\'isMultilingual\')"></static-info><div class="list-group"><div paging="paging" class="paging-header"></div><div class="wrap-loader" ng-show="isSpinnerShowed"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular></div></div><div class="text-box short ng-hide" ng-hide="isUpdating || (sessionInteractionsStore.length > 0)" aria-hidden="false"><p><span class="flaticon stroke info-2" style="margin-right:10px"></span>No results found.</p></div><div class="accordion"><div class="item" ng-class="{active: isSessionInteractionOpened(sessionInteraction)}" ng-repeat="sessionInteraction in sessionInteractionsStore | orderBy:\'-time\' | limitTo : paging.pageSize : paging.pageSize * paging.currentPage track by $index" scroll-this="goBackHash && goBackHash == getSessionInteractionHash(sessionInteraction)"><div class="heading" ng-click="toggleInteraction(sessionInteraction)"><em class="icon"><span ng-show="!sessionInteraction.processed" class="flaticon stroke J17"></span></em><div class="name">{{sessionInteraction.interactions[0].query}} <span class="num">({{sessionInteraction.interactions.length}})</span></div><div class="date" style="white-space:nowrap">{{relativeTime(sessionInteraction.time)}}</div><div class="opener"><em class="ico"></em></div></div><div class="expanded"><ul ng-if="isSessionInteractionOpened(sessionInteraction)" class="items-list"><li class="underline" ng-repeat="interaction in sessionInteraction.interactions track by interaction.id" ng-mouseover="over=true" ng-mouseleave="over=false"><div class="head"><div class="links" ng-show="!vm.isAgentReadOnly && (click || over)" clickout="$parent.click=false"><a class="link" ng-click="createNewIntent(sessionInteraction,$index)">+ New intent</a> <a class="link" dropdown-input="dropdownInputCfg" ng-click="reAssignIntent(sessionInteraction,$index);$parent.click=true;">Add to intent</a> <a ng-if="$root.hasCapability(\'isInteractionsRemoveAvailable\')" class="link" ng-click="removeInteraction(interaction, sessionInteraction, $index, $parent.$index)">Remove</a></div><div class="name" ng-class="::{\'warning-info\': !interaction.intentName}" ng-bind="::interaction.query"></div></div><div class="info" ng-if="::interaction.intentName"><a ui-sref="auth.workPlace.agent.intent_edit({ intentId: interaction.intentId })" class="info-link" ng-show="::interaction.intentName"><span class="flaticon stroke thinking-comment-2"></span> <span ng-bind="::interaction.intentName"></span></a><div class="inner-text" ng-show="::interaction.contexts && interaction.contexts.length"><em class="ico"><img src="assets/img/icon-contexts.png" width="22" height="21" alt="image description"></em><span class="label-box orange" ng-repeat="context in ::interaction.contexts track by $index" ng-bind="::context"></span></div></div></li></ul></div></div></div><div paging="paging" class="paging-footer"></div></div></div></div></div>'),e.put("partials/interactions_upload.html",'<div class="comment-box"><p>You can upload user inputs to the Training tool in one .txt file (one line per phrase) or in .zip archive with multiple (up to 10) .txt files. A single .txt file or unpacked .zip archive should not exceed 3 MB.</p><input type="file" oi-file="options"><div oi-file="options" class="drag-file">You can drag and drop file here</div><div ng-repeat="alert in alerts"><alert type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert></div></div>'),
e.put("partials/new_agent.html",'<div id="agent-form" ng-form="new_agent" ng-cloak class="ng-cloak"><div class="agents-top-panel top-panel" ng-show="isEdit"><span class="right-margin"></span> <span class="left-margin"></span><div class="tab-control"><ul class="wrap"><li ng-class="{active: !tabChosen || tabChosen==\'general\'}"><a id="link-tabs-general" href="javascript:void(0)" ng-click="tabChosen=\'general\'">General</a></li><li ng-class="{active: tabChosen==\'languages\'}" ng-show="hasCapability(\'isMultilingual\')"><a id="link-tabs-language" href="javascript:void(0)" ng-click="tabChosen=\'languages\'">Languages</a></li><li ng-class="{active: tabChosen==\'compatibility\'}" ng-show="!agent.intentParamsAutoSync || !agent.useCustomClassifier"><a id="link-tabs-compatibility" href="javascript:void(0)" ng-click="tabChosen=\'compatibility\'">Compatibility</a></li><li ng-class="{active: tabChosen==\'ml\'}" ng-show="isMlSettingsAvailable()"><a id="link-tabs-ml" href="javascript:void(0)" ng-click="tabChosen=\'ml\'">ML Settings</a></li><li ng-class="{active: tabChosen==\'backup\'}"><a id="link-tabs-restore" href="javascript:void(0)" ng-click="tabChosen=\'backup\'">Export and Import</a></li><li ng-class="{active: tabChosen==\'publishing\'}" ng-show="isMultibranchingAvailable"><a id="link-tabs-restore" href="javascript:void(0)" ng-click="tabChosen=\'publishing\'">Runtimes</a></li><li ng-class="{active: tabChosen==\'share\'}" ng-if="isAgentOwned"><a id="link-tabs-restore" href="javascript:void(0)" ng-click="openSharingTab()">Share</a></li></ul></div></div><div id="tab-general" ng-class="{tab: isEdit}" ng-show="!isEdit || !tabChosen || tabChosen == \'general\'"><div class="visible-agent form-group agent-form-header"><div layout="row"><div ng-if="isEdit" flex style="max-width:200px;margin-right:20px"><agent-avatar agent="agent" disabled></agent-avatar></div><div flex><div layout="row" ng-if="isTestingInfoAvailable"><div style="float:left"><h5>Agent Type</h5></div><div style="float:left;margin-left:15px"><md-radio-group ng-model="agentVisible" ng-change="updateVisibleAgent()"><md-radio-button value="public" class="md-primary" ng-mouseover="showMore = true" ng-mouseleave="showMore = false"><span class="dashed">Public</span> <span class="more-info ng-hide" ng-show="showMore"><span class="wrap-box"><span class="text">Public agents will become available to other Dialogflow developers. Lets build something awesome together!</span></span></span></md-radio-button><md-radio-button value="private" class="md-primary" ng-mouseover="showMore2 = true" ng-mouseleave="showMore2 = false"><span class="dashed">Private</span> <span class="more-info ng-hide" ng-show="showMore2"><span class="wrap-box"><span class="text">Keep your agents confidential or share with the team.</span></span></span></md-radio-button></md-radio-group></div><div style="clear:both"></div></div><div layout="row" style="margin-top:13px"><div flex="100"><fieldset><h5>Description</h5><md-input-container id="agent-description-container" class="md-block" md-no-float><textarea id="agent-description" name="description" ng-model="agent.description" placeholder="Describe your agent" ng-maxlength="limitsManager.getTextLength(\'agentDescription\', false)" class="borderless" ng-disabled="isAgentReadOnly">\n                                    </textarea><div ng-messages="new_agent.description.$error"><div ng-message="maxlength">Maximum description length is {{limitsManager.getTextLength(\'agentDescription\', false)}} symbols</div></div></md-input-container></fieldset></div></div><div layout="row" style="display:block;margin-top:13px" ng-show="!isEdit && samplesDataItems.length > 0"><agent-sample agent="agent" samples-data-items="samplesDataItems" parent-callback="userAgentCallbacks"></agent-sample></div><div layout="row" style="margin-top:13px"><div flex><fieldset id="agent-language-switcher"><h5>Default Language&nbsp; <i class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">Note: Language for the agent cannot be changed after agent creation.</md-tooltip></i></h5><div class="select-holder"><md-input-container class="md-block" md-no-float><md-select ng-disabled="isEdit" ng-model="agent.language" ng-change="agentLanguageChanged()" placeholder="Select language"><md-option ng-repeat="langCode in sortedKeys" ng-value="langCode">{{ langItems[langCode] + \' &mdash; \' + langCode}}</md-option></md-select></md-input-container></div></fieldset></div><div flex="5"></div><div flex><form id="agent-timezone-switcher" action="#"><fieldset><h5>Default Time Zone</h5><div class="select-holder"><md-input-container class="md-block" md-no-float><md-select ng-disabled="isAgentReadOnly" ng-model="selectedTimezone" md-on-close="timeZoneChange(selectedTimezone)" aria-label="Select timezone"><md-option ng-repeat="timezone in timezones" ng-value="timezone">{{ timezone.label }}</md-option></md-select></md-input-container></div></fieldset></form></div></div></div></div></div><agent-deep-link agent="agent" is-edit="isEdit"></agent-deep-link><div class="api-box agent-form-header" ng-if="isTestingInfoAvailable"><md-input-container md-no-float class="md-block"><h5>Display name</h5><input ng-model="agent.displayName" aria-label="Agent display name"></md-input-container><md-input-container md-no-float class="md-block"><h5>Examples:</h5><textarea ng-model="agent.examples" aria-label="Examples"></textarea></md-input-container><md-input-container md-no-float class="md-block"><h5>Short description</h5><input ng-model="agent.shortDescription" aria-label="Short description"></md-input-container><md-input-container md-no-float class="md-block"><h5>Link to docs</h5><input ng-model="agent.linkToDocs" aria-label="Link to docs"></md-input-container></div><div class="api-box agent-form-header" ng-if="isAssistantTestingAvailable"><md-input-container md-no-float class="md-block"><h5>Custom CASSE url:</h5><input ng-model="agent.additionalConfigs.baseActionPackagesUrl" type="url" name="casse_url" aria-label="Custom CASSE url"><div ng-messages="new_agent.casse_url.$error" role="alert"><div ng-message="url">That doesn\'t look like a valid url.</div></div></md-input-container><md-input-container md-no-float class="md-block"><h5>Custom web simulator url</h5><input ng-model="agent.additionalConfigs.customHomeSimulatorUrl" type="url" name="simulator_url" aria-label="Custom web simulator url"><div ng-messages="new_agent.simulator_url.$error" role="alert"><div ng-message="url">That doesn\'t look like a valid url.</div></div></md-input-container></div><div class="api-box" ng-show="isEdit"><h2 class="box-title"><span class="flaticon stroke share-4"></span>API keys</h2><ul class="api-tools"><li ng-if="prodAgent.secondaryKey"><div class="title">Production access token</div><div class="param">{{prodAgent.secondaryKey ? prodAgent.secondaryKey : \'&nbsp;\'}}<div class="tools-link"><a ng-click="refreshSecondaryKey({prod:true})" class="link" title="Refresh key"><span class="flaticon stroke repeat-4"></span></a> <a class="link" ng-clipboard="prodClientTokenConf"><span class="flaticon stroke copy"></span></a></div></div></li><li><div class="title">Client access token</div><div class="param">{{agent.secondaryKey ? agent.secondaryKey : \'&nbsp;\'}}<div class="tools-link"><a ng-click="refreshSecondaryKey()" class="link" title="Refresh key" ng-hide="isAgentReadOnly"><span class="flaticon stroke repeat-4"></span></a> <a class="link" ng-clipboard="clientTokenConf"><span class="flaticon stroke copy"></span></a></div></div></li><li class="select"><div class="title">Developer access token</div><div class="param">{{agent.primaryKey ? agent.primaryKey : \'&nbsp;\'}}<div class="tools-link"><a class="link" ng-clipboard="developerTokenConf"><span class="flaticon stroke copy"></span></a></div></div></li></ul></div><div class="api-box" ng-show="isEdit && isAgentOwned && isLogSettingsAvailable"><h2 class="box-title">Log settings</h2><md-checkbox class="md-primary" ng-model="agent.disableInteractionLogs">Disable interaction logs</md-checkbox></div><div class="info-box danger" ng-show="isEdit && isAgentOwned"><div class="head"><span class="flaticon stroke J18"></span> <span class="title">DANGER ZONE</span></div><div class="main"><div class="clearfix"><md-button id="agent-button-delete" class="pull-right" ng-click="deleteAgent()">Delete this agent</md-button><div class="frame"><div class="name">Delete Agent</div><p>Are you sure you want to delete agent <strong>{{agent.name}}</strong>? This will destroy the agent with all corresponding data and <strong>cannot be undone!</strong></p></div></div></div></div><div ng-show="false" class="bs-example bs-example-modal"><div class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">Json object</h4></div><div class="modal-body"><div class="code-box"><pre>{{agent | json}}</pre></div></div><div class="modal-footer"><a class="copy"><span class="flaticon stroke import-document"></span> Copy to clipboard</a></div></div></div></div></div></div><div id="tab-compatibility" class="tab" ng-show="tabChosen==\'compatibility\'"><div class="api-box" ng-if="isCustomClassifierAvailable"><div style="margin-bottom:10px"><md-checkbox class="md-primary" ng-show="isEdit && !agent.useCustomClassifier" ng-model="agent.useCustomClassifier" ng-change="useCustomClassifierChanged()" ng-true-value="false" ng-false-value="true">Compatibility with v1 matching</md-checkbox></div></div><div class="api-box"><div style="margin-bottom:10px"><md-checkbox ng-if="!agent.intentParamsAutoSync" class="md-primary" ng-show="isEdit" ng-model="agent.intentParamsAutoSync" ng-true-value="false" ng-false-value="true">Disable automatic parameter detection and synchronization</md-checkbox></div></div></div><div id="tabs-backup" class="tab" ng-show="tabChosen==\'backup\'"><div class="api-box" ng-show="isEdit"><div class="buttons clearfix"><div class="row"><div class="col-md-4"><md-button class="md-raised md-primary" ng-click="goDownloadAgentUrl(false)" ng-disabled="new_agent.name.$invalid">Export as zip</md-button></div><div class="col-md-8"><p>Create a backup of the agent</p></div></div><div class="row"><div class="col-md-4"><md-button class="md-raised md-primary" ng-click="openUploadDlg(true)" ng-disabled="new_agent.name.$invalid || isAgentReadOnly">Restore from Zip</md-button></div><div class="col-md-8"><p>Replace the current agent version with a new one. All the intents and entities in the older version will be deleted.</p></div></div><div class="row"><div class="col-md-4"><md-button class="md-raised md-primary" ng-click="openUploadDlg(false)" ng-disabled="new_agent.name.$invalid || isAgentReadOnly">Import from Zip</md-button></div><div class="col-md-8"><p>Upload new intents and entities without deleting the current ones. Intents and entities with the same name will be replaced with the newer version.</p></div></div><div class="row" ng-show="agent.cortana.cortanaCompatible"><div class="col-md-4"><md-button class="md-raised md-primary" ng-click="exportForCortana($event)" ng-disabled="!isEdit || new_agent.$invalid || isAgentUnsaved()" title="{{isAgentUnsaved()?\'You should save agent before export for Cortana\':\'\'}}" popover="{{isAgentUnsaved()?\'You should save agent before export for Cortana\':\'The generated XML may have an incorrect structure if not filled the agent description field or fulfillment fields. Check the file before using.\'}}" popover-title="Warning!" popover-trigger="mouseenter" popover-append-to-body="true">Export for Cortana</md-button></div><div class="col-md-8"><p>Export current agent for Cortana</p></div></div><div class="row" ng-if="hasCapability(\'isLegacyExport\')"><p class="delimiter"></p><div class="col-md-4"><md-button class="md-raised md-primary" ng-click="goDownloadAgentUrl(true)" ng-disabled="new_agent.name.$invalid">Compatibility Export</md-button></div><div class="col-md-8"><p>Create a backup of the agent in a compatibility format.</p></div></div></div></div></div><div id="tabs-ml" class="tab agent-form-header" ng-show="tabChosen==\'ml\'" ng-if="isMlSettingsAvailable()"><div class="api-box" ng-show="isEdit"><h5>Match mode</h5><p>Select the match mode that suits your agent best.</p><ul><li>Use the <strong>Hybrid (Rule-based and ML)</strong> mode for agents with a small number of examples/templates in intents, especially the ones using composite entities.</li><li>Use <strong>ML only</strong> mode for agents with a large number of examples in intents, especially the ones using @sys.any</li></ul><md-input-container class="md-block" md-no-float><md-select ng-model="agent.customClassifierMode" placeholder="Match mode" ng-disabled="isAgentReadOnly"><md-option value="use.after">Hybrid (Rule-based and ML)</md-option><md-option value="use.instead">ML only</md-option></md-select></md-input-container></div><div class="api-box"><h5>ML Classification Threshold</h5><p>Define the threshold value for the confidence score. If the returned value is less than the threshold value, then a fallback intent will be triggered or, if there is no fallback intents defined, no intent will be triggered.</p><md-input-container class="md-block" md-no-float><input aria-label="Classification Threshold" ng-model="agent.mlMinConfidence" ng-disabled="isAgentReadOnly"></md-input-container></div><div class="api-box"><md-button class="md-primary md-raised" ng-click="startAgentTraining()" ng-disabled="isAgentReadOnly">Train</md-button></div></div><div id="tabs-publishing" class="tab agent-form-header" ng-if="isMultibranchingAvailable && tabChosen==\'publishing\' && isEdit"><agent-runtimes agent="agent"></agent-runtimes></div><div id="tabs-share" class="tab agent-form-header" ng-if="tabChosen==\'share\'"><div class="api-box" ng-if="isEdit"><agent-share user-agent-callbacks="userAgentCallbacks" agent="agent"></agent-share></div></div><div id="tabs-languages" class="tab agent-form-header" ng-if="tabChosen == \'languages\'"><div class="api-box" ng-if="isEdit"><agent-langs lang-items="langItems" locale-items="localeItems" agent="agent"></div></div></div>'),e.put("partials/new_entity.html",'<span class="loader7" ng-show="isSpinShowed"></span><div ng-hide="isSpinShowed" id="entity-editor" ng-form="new_entity" ng-cloak class="ng-cloak" xmlns="http://www.w3.org/1999/html"><div class="entity-checkbox"><md-checkbox class="md-primary" ng-model="entity.isEnum" ng-true-value="false" ng-false-value="true" tabindex="-1"><span>Define synonyms</span> <i class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">You can choose to define synonyms that will map to reference values. Or just list values, including references to other entities.</md-tooltip></i></md-checkbox><md-checkbox class="md-primary" ng-model="entity.automatedExpansion" ng-show="isCustomClassifierEnabled()" tabindex="-1"><span>Allow automated expansion</span></md-checkbox></div><static-info message="{{limitsManager.getText(\'entries\')}}" ng-if="!newEntityEnabled"></static-info><div class="alert alert-danger alert-dismissible animate-show ng-hide" role="alert" ng-show="textError"><span class="flaticon stroke J18 alert-icon"></span> <span ng-bind-html="textError"></span></div><div class="comment-box" ng-if="!isTextEditor"><div entity-search-form ng-show="entity.entries.length > 50"></div><input type="text" name="entries_value" ng-show="false" required ng-model="someFilledEntry().value"><div class="entity-composite-entry-table" sti-composite-entity-entry-table ng-model="entity" ng-if="entity.isEnum"></div><div sti-entity-entry-table ng-model="entity" ng-if="!entity.isEnum"></div></div><div class="comment-box" ng-if="isTextEditor"><div class="alert alert-general alert-dismissible" role="alert"><button type="button" tabindex="-1" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button> <span class="flaticon stroke info-2 alert-icon"></span>You can paste here content in <strong>JSON</strong> or <strong>CSV</strong> format</div><ul class="nav nav-tabs"><li ng-class="{\'active\':textEditorType==\'json\', \'disabled\':textError}"><a ng-disabled="textError" ng-click="setTextEditorType(\'json\')">JSON</a></li><li ng-class="{\'active\':textEditorType==\'csv\', \'disabled\':textError}"><a ng-disabled="textError" ng-click="setTextEditorType(\'csv\')">CSV</a></li></ul><textarea spellcheck="false" ng-model="textEntity.text" style="width:100%;resize:none;border-color:#e1e1e1;border-top-width:0" rows="10" ng-blur="updateEntitiesFromText()" focus-on="isTextEditor"></textarea></div><div ng-if="isJsonShown" class="bs-example bs-example-modal"><div class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">Json object</h4></div><div class="modal-body"><div class="code-box"><pre>{{entity | json}}</pre></div></div><div class="modal-footer"><a class="copy"><span class="flaticon stroke import-document"></span> Copy to clipboard</a></div></div></div></div></div></div>'),e.put("partials/new_intent.html",'<div id="intent-form" ng-form="new_intent" class="intent-editor" define-parameters="commonTemplatesConfig.entities" focus-error><static-info ng-if="intent.fallbackIntent" message="Fallback intents are triggered if a user\'s input is not matched\n     by any of the regular intents or enabled domains. <a href=\'https://dialogflow.com/docs/intents#fallback_intents\' target=\'_blank\'>Read more in documentation</a>"></static-info><intent-contexts input-contexts="intent.contexts" output-contexts="intent.responses[0].affectedContexts" reset-contexts="intent.responses[0].resetContexts" autocomplete-config="tokenfieldConf.autotokens"></intent-contexts><div ng-if="!intent.fallbackIntent" class="comment-box" id="intent-user-says-editor"><intent-user-says-editor auto-complete-config="commonTemplatesConfig" agent="agent" intent="intent" templates-alias="templatesAlias" user-says-list="intent.templates" intent-params-list="intent.responses[0].parameters" parent-callbacks="userSaysEditorCallbacks" is-agent-read-only="isAgentReadOnly"></intent-user-says-editor></div><intent-events events="intent.events"></intent-events><div class="comment-box" id="intent-action"><div class="head" ng-click="actionHidden = !actionHidden"><span class="title" style="margin-right:10px">Action</span> <i class="fa fa-angle-down pull-right intent-show-hide" aria-hidden="true" ng-if="actionHidden"></i> <i class="fa fa-angle-up pull-right intent-show-hide" aria-hidden="true" ng-if="!actionHidden"></i></div><div ng-show="!actionHidden" class="animate-show"><div class="alert alert-danger alert-dismissible animate-show" role="alert" ng-show="isActionError() && new_intent.$error.nameWord"><button type="button" class="close" data-dismiss="alert"></button> <span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Action can not contain whitespaces</div></div><div class="alert alert-danger alert-dismissible animate-show" role="alert" ng-show="isActionError() && new_intent.$error.required"><button type="button" class="close" data-dismiss="alert"></button><span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Action is required</div></div><div class="alert alert-danger alert-dismissible animate-show" role="alert" ng-show="isActionError() && new_intent.$error.maxlength && !new_intent.$error.required && !new_intent.$error.nameWord"><button type="button" class="close" data-dismiss="alert"></button> <span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Maximum action length is {{limitsManager.getTextLength(\'action\')}}</div></div><div class="input-row-form inner01"><span class="input-holder" ng-class="{\'has-error\':isActionError()}"><div class="input-group"><textarea type="text" spellcheck="false" completer="tcActionConf" ng-model="intent.responses[0].action" name="action" class="form-control" placeholder="Enter action name" maxlength="{{limitsManager.getTextLength(\'action\')}}" word-validation="nameWord" word-validation-regexp="^[\\S]{0,}$"></textarea></div></span></div><div ng-if="!intent.fallbackIntent"><div class="alert alert-danger alert-dismissible animate-show" role="alert" ng-show="new_intent.$invalid && new_intent.$error.uniqueParams"><button type="button" class="close" data-dismiss="alert"></button><span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Parameter name must be unique within the action</div></div><div class="alert alert-danger alert-dismissible animate-show" role="alert" ng-show="new_intent.$invalid && new_intent.$error.unnamedParams"><button type="button" class="close" data-dismiss="alert"></button><span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Some parameters are unnamed: <strong>{{unnamedParams}}</strong></div></div><div class="alert alert-danger alert-dismissible animate-show" role="alert" ng-show="new_intent.$invalid && new_intent.$error.typeMismatchParams"><button type="button" class="close" data-dismiss="alert"></button><span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Entity is required for required params: <strong>{{typeMismatchParams}}</strong></div></div><div class="alert alert-danger alert-dismissible animate-show" role="alert" ng-show="new_intent.$invalid && new_intent.$error.unresolvedParamTypes"><button type="button" class="close" data-dismiss="alert"></button><span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Some entities haven\'t been created yet: <strong>{{unresolvedParamTypes.join(\', \')}}</strong>. Create entities before using them in intents.</div></div><span class="input-holder intent-params-input-holder" ng-class="{\'has-error\': new_intent.$invalid &&\n                        (new_intent.$error.uniqueParams || new_intent.$error.unnamedParams || new_intent.$error.typeMismatchParams || new_intent.$error.unresolvedParamTypes) }"><div sti-intent-param-table></div></span><div style="position:relative"><input type="text" ng-focus="addParameter(intent.responses[0],1)" style="position:absolute;clip:rect(0 0 0 0);width:1px;height:1px;padding:0;top:0;border:none"></div><div id="intent-add-param" class="add-param"><a ng-click="addParameter(intent.responses[0],1)" a-disabled="newParamDisabled"><span class="flaticon stroke plus"></span> New parameter </a><a ng-if="!agentParamsAutoSync()" id="intent-extract-all-parameters" class="pull-right" ng-click="tabPressed=false; parseAllParameters();"><span class="flaticon glyphicon glyphicon-tasks"></span> Extract all parameters from templates/examples</a></div></div></div><div class="comment-box" id="intent-response"><div class="head" ng-click="responseHidden = !responseHidden"><span class="title">Response <span class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">Your agent can respond with text (supported for all platforms) and rich content (supported for some messaging platforms). You can add up to 10 elements and drag them to reorder.</md-tooltip></span></span><i class="fa fa-angle-down pull-right intent-show-hide" aria-hidden="true" ng-if="responseHidden"></i> <i class="fa fa-angle-up pull-right intent-show-hide" aria-hidden="true" ng-if="!responseHidden"></i></div><div class="alert alert-warning alert-dismissible" role="alert" ng-show="checkIfSpeechResponseIsValid()"><span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Speech response will be ignored in case a referenced parameter value is not defined. Make sure to have at least one variation without parameters to avoid empty responses.</div></div><intent-rich-response intent="intent" textcomplete-options="tcFulfillmentConf" parent-callbacks="richContentCallbacks" is-edit="isEdit" save-touched="saveTouched" class="animate-show" ng-show="!responseHidden"></intent-rich-response></div><div class="comment-box" ng-show="isCortanaEnabled"><div class="head"><span class="title">Cortana Target <span class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">Optional value specifying the page that the app should navigate to when it launches, or app service name that must handle voice command and return text response to display in the Cortana canvas.</md-tooltip></span></span></div><div class="btn-group" style="margin-bottom:15px"><button id="intent-cortana-navigate-to" class="btn btn-primary btn-group-item" ng-model="intent.cortanaCommand.navigateOrService" ng-disabled="isButtonDisabled" btn-radio="\'NAVIGATE\'">Navigate to</button> <button id="intent-cortana-voice-command" class="btn btn-primary btn-group-item" ng-model="intent.cortanaCommand.navigateOrService" ng-disabled="isButtonDisabled" btn-radio="\'VOICE_COMMAND_SERVICE\'">Voice Command Service</button></div><div class="alert alert-danger alert-dismissible" role="alert" ng-show="saveTouched && new_intent.target.$invalid"><span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">Service name is required for Voice Command</div></div><div class="input-row-form inner01"><span class="input-holder"><div class="input-group"><textarea id="intent-cortana-page-name" type="text" spellcheck="false" name="target" ng-model="intent.cortanaCommand.target" ng-required="intent.cortanaCommand.navigateOrService==\'VOICE_COMMAND_SERVICE\'" class="form-control" placeholder="{{cortanaTargetPlaceholder}}" style="resize:none"></textarea></div></span></div></div><intent-webhook ng-show="isWebhookAvailable" webhook-used="intent.webhookUsed" webhook-for-slot-filling="intent.webhookForSlotFilling"></intent-webhook><google-assistant-intent-expansion-component intent="intent" agent="agent" callbacks="googleActionsCallbacks" ng-if="agent.googleAssistant.getEnabled()"></google-assistant-intent-expansion-component><div ng-if="testing"><div ng-repeat="field in testing.fields"><div><h3>{{field}}</h3><pre>{{testing[field] | json}}</pre></div></div></div><div ng-if="isJsonShown" class="bs-example bs-example-modal"><div class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">Json object</h4></div><div class="modal-body"><div class="code-box"><pre>{{intent | json}}</pre></div></div><div class="modal-footer"><a class="copy"><span class="flaticon stroke import-document"></span> Copy to clipboard</a></div></div></div></div></div></div></div>'),
e.put("partials/pricing.html",'<md-dialog class="dialog-pricing"><md-dialog-content><div class="modal-header" ng-cloak class="ng-cloak"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h3 class="modal-title">Upgrade plan</h3></div><div class="modal-body modal-pricing"><div class="row"><div class="col"><div class="text-switch pull-right"><a class="text-switch-tab" ng-class="{\'active\': chosenMonthly === false}" ng-click="chosenMonthly = false">Annually</a> <a class="text-switch-tab" ng-class="{\'active\': chosenMonthly === true}" ng-click="chosenMonthly = true">Monthly</a></div></div></div><div class="pricing"><div class="pricing--single" data-plan="free" ng-class="{\'current-plan\': planId === \'free\'}"><div class="pricing--heading bg-blue3"><i class="flaticon stroke checkmark-2 current-icon"></i><h3>Free</h3><h4 class="pricing--value"><sup>$</sup>0</h4><p class="pricing--description">free<br>forever</p><a href="#/userProfile/pricing" class="pricing--action btn btn-primary"><span>Downgrade</span></a></div><div class="pricing--details"><ul class="pricing--list"><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">A query is a call to the Dialogflow engine to process natural language, either in the form of text or a sound file.</md-tooltip><dt>Queries / Month</dt><dd>6,000</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Public agents may be shared with other Dialogflow users.</md-tooltip><dt>Private Agents</dt><dd>Public only</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Domains are pre-defined knowledge packages for dozens of topics.</md-tooltip><dt>Pre-built domains</dt><dd>For testing from the Dialogflow console</dd></dl></li><li><dl class="is-not"></dl></li><li><dl><dt>Support</dt><dd>Community</dd></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li></ul></div></div><div class="pricing--single" data-plan="startup" ng-class="{\'current-plan\': (planId === \'startup\' && chosenMonthly === monthly)}"><div class="pricing--heading bg-wiolet2"><i class="flaticon stroke checkmark-2 current-icon"></i><div class="pricing--info" ng-if="chosenMonthly"><h3>Startup</h3><h4 class="pricing--value"><sup>$</sup>111</h4><p class="pricing--description">per month billed monthly<br><br>$89 billed annually</p></div><div class="pricing--info" ng-if="!chosenMonthly"><h3>Startup</h3><h4 class="pricing--value"><sup>$</sup>89</h4><p class="pricing--description">per month billed annually<br><br>$111 billed monthly</p></div><a ng-click="upgradeTo(\'auth.userProfile.billing.upgrade\', \'startup\')" class="pricing--action btn btn-primary upgrade-link"><span>Upgrade Now</span></a></div><div class="pricing--details"><ul class="pricing--list"><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">A query is a call to the Dialogflow engine to process natural language, either in the form of text or a sound file.</md-tooltip><dt>Queries / Year</dt><dd>160,000</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Public agents may be shared with other Dialogflow users.</md-tooltip><dt>Private Agents</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Domains are pre-defined knowledge packages for dozens of topics.</md-tooltip><dt>Pre-built Domains</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Custom models for speech recognition significantly improve its accuracy.</md-tooltip><dt>Speech Recognition</dt><dd>Included (English)</dd></dl></li><li><dl><dt>Support</dt><dd>Email, Chat</dd></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li></ul></div></div><div class="pricing--single" data-plan="standard" ng-class="{\'current-plan\': (planId === \'standard\' && chosenMonthly === monthly)}"><div class="pricing--heading bg-orange2"><i class="flaticon stroke checkmark-2 current-icon"></i><div class="pricing--info" ng-if="chosenMonthly"><h3>Standard</h3><h4 class="pricing--value"><sup>$</sup>499</h4><p class="pricing--description">per month billed monthly<br><br>$399 billed annually</p></div><div class="pricing--info" ng-if="!chosenMonthly"><h3>Standard</h3><h4 class="pricing--value"><sup>$</sup>399</h4><p class="pricing--description">per month billed annually<br><br>$499 billed monthly</p></div><a ng-click="upgradeTo(\'auth.userProfile.billing.upgrade\', \'standard\')" class="pricing--action btn btn-primary upgrade-link"><span>Upgrade Now</span></a></div><div class="pricing--details"><ul class="pricing--list"><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">A query is a call to the Dialogflow engine to process natural language, either in the form of text or a sound file.</md-tooltip><dt>Queries / Year</dt><dd>750,000</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Public agents may be shared with other Dialogflow users.</md-tooltip><dt>Private Agents</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Domains are pre-defined knowledge packages for dozens of topics.</md-tooltip><dt>Pre-built Domains</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Custom models for speech recognition significantly improve its accuracy.</md-tooltip><dt>Speech Recognition</dt><dd>Included (English) + custom models</dd></dl></li><li><dl><dt>Support</dt><dd>Email, Chat</dd></dl></li><li><dl><dt>SLA</dt><dd>99.99% guaranteed uptime SLA</dd></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li></ul></div></div><div class="pricing--single" data-plan="premium" ng-class="{\'current-plan\': (planId === \'premium\' && chosenMonthly === monthly)}"><div class="pricing--heading bg-green3"><i class="flaticon stroke checkmark-2 current-icon"></i><div class="pricing--info" ng-if="chosenMonthly"><h3>Premium</h3><h4 class="pricing--value"><sup>$</sup>1,124</h4><p class="pricing--description">per month billed monthly<br><br>$899 billed annually</p></div><div class="pricing--info" ng-if="!chosenMonthly"><h3>Premium</h3><h4 class="pricing--value"><sup>$</sup>899</h4><p class="pricing--description">per month billed annually<br><br>$1,124 billed monthly</p></div><a ng-click="upgradeTo(\'auth.userProfile.billing.upgrade\', \'premium\')" class="pricing--action btn btn-primary upgrade-link"><span>Upgrade Now</span></a></div><div class="pricing--details"><ul class="pricing--list"><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">A query is a call to the Dialogflow engine to process natural language, either in the form of text or a sound file.</md-tooltip><dt>Queries / Year</dt><dd>2,400,000</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Public agents may be shared with other Dialogflow users.</md-tooltip><dt>Private Agents</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Domains are pre-defined knowledge packages for dozens of topics.</md-tooltip><dt>Pre-built Domains</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Custom models for speech recognition significantly improve its accuracy.</md-tooltip><dt>Speech Recognition</dt><dd>Included (English) + custom models</dd></dl></li><li><dl><dt>Support</dt><dd>Email, Chat</dd></dl></li><li><dl><dt>SLA</dt><dd>99.99% guaranteed uptime SLA</dd></dl></li><li><dl><dt>Consulting Services</dt><dd>Included</dd></dl></li><li><dl class="is-not"></dl></li><li><dl class="is-not"></dl></li></ul></div></div><div class="pricing--single" data-plan="preferred" ng-class="{\'current-plan\': (planId === \'preferred\' && chosenMonthly === monthly)}"><div class="pricing--heading bg-blue4"><i class="flaticon stroke checkmark-2 current-icon"></i><h3>Preferred</h3><h4 class="pricing--value letstalk">Let\'s<br>Talk</h4><a href="mailto:&#115;&#097;&#108;&#101;&#115;&#064;&#097;&#112;&#105;&#046;&#097;&#105;?subject=Large Enterprise subscription for Dialogflow" class="pricing--action btn btn-primary"><span>Contact Us</span></a></div><div class="pricing--details"><ul class="pricing--list"><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">A query is a call to the Dialogflow engine to process natural language, either in the form of text or a sound file.</md-tooltip><dt>Queries / Year</dt><dd>Customizable</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Public agents may be shared with other Dialogflow users.</md-tooltip><dt>Private Agents</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Domains are pre-defined knowledge packages for dozens of topics.</md-tooltip><dt>Pre-built Domains</dt><dd>Unlimited</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Custom models for speech recognition significantly improve its accuracy.</md-tooltip><dt>Speech Recognition</dt><dd>Included (English) + custom models</dd></dl></li><li><dl><dt>Support</dt><dd>Email, Chat + Phone</dd></dl></li><li><dl><dt>SLA</dt><dd>99.99% guaranteed uptime SLA</dd></dl></li><li><dl><dt>Consulting Services</dt><dd>Included</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Private depoyment</md-tooltip><dt>Virtual Private Cloud</dt><dd>Available</dd></dl></li><li><dl data-toggle="tooltip"><md-tooltip md-direction="top" md-delay="100">Your app talking offline or in hybrid mode.</md-tooltip><dt>Embedded/Hybrid</dt><dd>Included</dd></dl></li></ul></div></div></div><div ui-view></div></div><div class="modal-footer bordered"><md-button id="button-cancel" class="md-raised" ng-click="cancel()">Cancel</md-button></div></md-dialog-content></md-dialog>'),e.put("partials/prompts-modal.html",'<div id="prompts-modal" style="width:600px"><div class="modal-header"><button type="button" class="close" ng-click="hide()" aria-hidden="true">&times;</button><h4 class="modal-title" id="PromptsModalLabel"><span ng-bind="mode !== \'defaultValue\' ? \'Prompts for\' : \'Default value for\'"></span> "{{currentEditedParam.name}}"</h4></div><div class="modal-body"><div class="row params-modal-head"><div class="params-attribute-cell"><label for="prompt-name">Name</label></div><div class="params-attribute-cell"><label for="prompt-datatype">Entity</label></div><div class="params-attribute-cell"><label for="prompt-value">Value</label></div></div><div class="row params-modal-attributes"><div class="params-attribute-cell"><input type="text" id="prompt-name" class="borderless" ng-model="currentEditedParam.name" placeholder="Enter name" focus-on="tabPressed && $last" ng-blur="validateParams()" ng-disabled="true"></div><div class="params-attribute-cell"><input type="text" id="prompt-datatype" ng-disabled="true" sti-autocomplete="parameterDataTypeAutocompleteCfg" class="borderless" ng-model="currentEditedParam.dataType" placeholder="Enter entity" ng-blur="validateParams()"></div><div class="params-attribute-cell"><input id="prompt-value" ng-disabled="true" completer="tcParamConf" type="text" ng-model="currentEditedParam.value" class="borderless" placeholder="Enter value" ng-blur="validateParams()"></div></div><div ng-show="mode !== \'defaultValue\'" class="row params-modal-prompts sti-multiple-input"><div class="prompts-table"><div class="prompt-row"><div class="prompt-cell prompt-cell-first"></div><div class="prompt-cell prompt-cell-second"><div class="prompts-modal-description">Prompts</div></div></div></div><div class="input-group" id="intent-param-prompts-editor" sti-intent-param-prompts-editor collection="currentEditedParam.prompts" collection-item-name="\'prompt\'" autofocus-on-new-input="true" textcomplete-options="tcFulfillmentConf" max-items-count="limitsManager.getParamPromptsNumber()"></div></div><div ng-hide="mode !== \'defaultValue\'" class="row params-modal-default-value"><textarea msd-elastic class="params-modal-default-value-textarea borderless" ng-model="currentEditedParam.defaultValue" placeholder="Enter default value"></textarea></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="hide()">Close</button></div></div>'),e.put("partials/speechrec.html",'<div ng-form="speech_rec" ng-cloak class="ng-cloak"><div class="alert alert-general-light alert-dismissible animate-show" role="alert"><span class="flaticon stroke info-2 alert-icon"></span><div class="frame"><p>Dialogflow <a ng-href="https://dialogflow.com/docs/reference/agent/query" target="_blank">speech recognition</a> is included with all of our paid plans.<md-button class="md-raised md-button-icon md-green pull-right" ng-click="openUpgradeModal(); analyticsTrack(\'UPGRADE_BUTTON_PRESSED\', { where: \'speech_recognition\' })" target="_blank"><span class="flaticon stroke up-circle-3 icon"></span> Upgrade now</md-button></p><p ng-show="!userProfile.planName || userProfile.planName===\'Startup\'">Speech recognition can be customized to your agent with the <a ng-href="{{ upgradeUrl }}" target="_blank" ng-show="!userProfile.planName || userProfile.planName===\'Startup\'">Standard plan and higher.</a></p><md-divider ng-hide="!userProfile.planName || userProfile.planName===\'Startup\'"></md-divider><div class="row plan ng-hide" ng-hide="!userProfile.planName || userProfile.planName===\'Startup\'"><div class="col-md-10"><p>You can build a custom model based on your agent, in order to improve its accuracy.</p><a href="mailto:sales@dialogflow.com?subject=Dialogflow speech recognition">Contact us</a> to build a custom model.</div></div></div></div></div>'),e.put("partials/system_entities.html",'<div id="content" ng-cloak class="ng-cloak"><div id="content-header"><div class="col-xs-12 col-sm-4 col-md-3 col-lg-5"><h1>System Entities</h1></div><div class="col-xs-12 col-sm-5 col-md-6 col-lg-4"></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3 text-right"></div></div><div id="content-container"><div class="row"><div class="col-md-9"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt10"><div class="well"><h5>These are system entities that you can use in your user input templates.</h5><h5>Example: <strong>do you speak <span style="background-color:#a0f5da;padding:0 2px">@meta:list-languages</span></strong></h5></div><div class="table-responsive"><table class="table table-hover" data-provide="datatable" data-display-rows="5" data-info="true" data-paginate="true"><thead><tr><th width="200px" ng-class="getSortingClasses(\'name\', sorting)" ng-click="setSorting(\'name\', sorting)">Entity name</th><th width="120px" ng-class="getSortingClasses(\'category\', sorting)" ng-click="setSorting(\'category\', sorting)">Category</th><th ng-class="getSortingClasses(\'description\', sorting)" ng-click="setSorting(\'description\', sorting)">Description</th></tr></thead><tbody><tr class="fs15" ng-repeat="entity in systemEntities | orderBy: sorting.predicate:sorting.reverse | filter:intentSearchText"><td class="text-bold">{{entity.name}}</td><td class="text-bold">{{entity.category}}</td><td class="text-bold">{{entity.description}}</td></tr></tbody></table></div></div></div></div><div class="col-md-3"><div ng-test-client></div></div></div><div class="row"><div class="col-md-12"></div></div></div></div>'),e.put("partials/test_client.html",'<div class="navbar-header"><form layout="row" layout-align="none center" class="side-form"><md-input-container md-no-float class="md-block" flex><input id="test-client-query-input" type="text" spellcheck="false" placeholder="Try it now" ng-model="query" ng-keypress="speak(query, false, $event) && (speakResult=true) && (query = \'\');" focus-on="true" sti-autocomplete="autocompleteCfg"></md-input-container><span ng-show="sendAudioStream && recognizing">{{audioDurationMillis | date:\'mm:ss\'}} / 01:00</span><md-button class="md-icon-button" ng-click="speakButton()" ng-show="hasSpeechSupport" aria-label="Speak button"><md-icon class="material-icons" ng-class="{\'md-accent\': recognizing}" ng-show="!sendAudioStream || !recognizing">keyboard_voice</md-icon><md-icon class="material-icons" ng-show="sendAudioStream && recognizing">stop</md-icon></md-button></form></div><div class="side-box" ng-cloak class="ng-cloak"><div class="text-box animate-show short" ng-show="!speakResult"><p><span class="flaticon stroke info-2" style="margin-right:10px"></span>Please use test console above to try a sentence.</p></div><div class="wrap-loader" ng-show="isProgressShown"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular></div></div><div ng-show="!isResultHidden && (speakResult && !isProgressShown)" class="animate-show short"><div class="alert alert-danger alert-dismissible animate-show short ng-hide" role="alert" ng-show="isQueryError"><button type="button" class="close" data-dismiss="alert"></button> <span class="flaticon stroke exclamation-point-1 alert-icon"></span><div class="frame">{{response.status.errorDetails}}</div></div><ul class="tab-control" style="margin-bottom:24px"><li class="test-console-tab" ng-class="{\'active\':tab==\'api\'}"><a ng-click="changeTab(\'api\')" title="{{firstTabName}}">{{firstTabName}}</a></li><li class="test-console-tab" ng-class="{\'active\':tab==\'knowledgeBase\'}"><a ng-click="changeTab(\'knowledgeBase\')" title="{{secondTabName}}">{{secondTabName}}</a></li></ul><div class="side-row"><div><span class="item-header">USER SAYS</span> <a id="test-client-copy-curl" class="item-link pull-right" ng-clipboard="clipboardConf" dropdown-input="copyCurlInputCfg">COPY CURL</a></div><div class="item" title="Query"><span class="text"><span id="test-client-resolved-query">{{result.resolvedQuery}}</span> <i ng-hide="result.resolvedQuery.length">Not available</i></span></div></div><div class="side-row" title="Response" ng-show="tab != \'api\'"><div><span class="item-header">RESPONSE</span><div class="pull-right" ng-show="speech && ttsEnabled"><a class="item-link" ng-show="!ttsSpeak" ng-click="playSpeech(speech)" ng-disabled="ttsWait">{{ ttsWait ? \'LOADING...\' : \'PLAY\' }}</a> <a class="item-link" ng-show="ttsSpeak" ng-click="stopSpeech()">STOP</a></div></div><div class="item"><span class="text"><span id="test-client-speech-response">{{speech}}</span> <i ng-hide="speech.length">Not available</i></span><div class="link-to-response" ng-show="existRichResponse"><a ng-click="goToResponseIntent({ agentId:requestedAgent.id, intentId:result.metadata.intentId })">#richresponse</a></div></div></div><div class="side-row" title="Response" ng-show="tab == \'api\'"><console-response-content response="response" speak-control="speakObject" parent-callback="consoleResponseCallback" send-request="speak"></console-response-content></div><div class="side-row" ng-show="contextsNames.length"><a class="item-link pull-right" id="reset-contexts" ng-hide="resetContexts" ng-click="setResetContexts(true)">RESET CONTEXTS</a><div><span class="item-header">CONTEXTS</span></div><div id="test-client-contexts" class="item color-tokens-wrapper" title="Active contexts"><input type="text" tokenfield ng-model="contextsNames" disabled></div></div><div class="side-row"><div><span class="item-header">INTENT</span></div><div class="item" title="Intent"><span class="text"><a id="test-client-link-intent" ng-click="editIntent({ agentId:requestedAgent.id, intentId:result.metadata.intentId })" ng-show="result.metadata.intentName.length">{{result.metadata.intentName}} </a><i ng-hide="result.metadata.intentName.length">Not available</i></span></div></div><div class="side-row"><div><span class="item-header">ACTION</span></div><div class="item" title="Action"><span class="text"><span id="test-client-action">{{result.action}}</span> <i ng-hide="result.action.length">Not available</i></span></div><div class="table-box response-parameters-table" ng-show="hasParameters()" title="Action parameters"><table><tbody><tr><th>PARAMETER</th><th>VALUE</th></tr><tr class="test-client-parameters-row" ng-repeat="(name, value) in result.parameters"><td width="150"><span class="test-console-parameter-name">{{name}}</span></td><td class="td-test-console-parameter-value">{{value}}</td></tr></tbody></table></div></div><console-fulfillment cloud-functions-enabled="requestedAgent.webhook.cloudFunctionsEnabled" cloud-project-id="requestedAgent.cloudProjectId" lookback-minutes="60"></console-fulfillment><div class="json-box"><md-button class="md-raised json-box-button" ng-click="showJson()">Show JSON</md-button></div></div></div>'),e.put("partials/entity/compositeEntryTable.html",'<div class="alert alert-danger alert-dismissible" role="alert" ng-if="isValueError()"><span class="flaticon stroke J18" style="margin-right:10px"></span>{{valueTextError}}</div><span class="loader7" ng-show="isFiltering"></span><ul class="list-group" ng-hide="isFiltering"><div ng-if="paging" paging="paging ? paging : null" class="paging-header"></div><li class="list-group-item" ng-repeat="entry in filteredEntries | limitTo:paging.pageSize:paging.pageSize * paging.currentPage track by $index " ng-click="editEntry($index)" tabindex="{{ $index + 1 }}"><textarea rows="1" msd-elastic ng-model="entry.value" class="borderless" placeholder="Enter value" focus-on="$index === focusId" ng-keydown="handleKeyDown($index, entry.value, $event)" colorize maxlength="{{limitsManager.getTextLength(\'entry\')}}" completer-template-editor="templateEditorCommonConfig"></textarea><span class="ico-group visible-on-hover"><a ng-click="cleanEntry($index)" class="ico-item"><span class="flaticon stroke trash"></span></a></span></li><div paging="paging" class="paging-footer"></div></ul><div class="add-param"><a ng-click="addNewEntry(activateTab)" a-disabled="!newEntityEnabled">+ Add a row</a></div>'),e.put("partials/entity/entryTable.html",'<div class="alert alert-general animate-show" role="alert" ng-if="!isEdit"><button type="button" tabindex="-1" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button> <span class="flaticon stroke info-2 alert-icon"></span>Separate synonyms by pressing the <strong>enter</strong>, <strong>tab</strong> or <strong>;</strong> key.</div><div class="alert alert-danger alert-dismissible" role="alert" ng-if="isValueError()"><span class="flaticon stroke J18" style="margin-right:10px"></span>{{valueTextError}}</div><span class="input-holder" ng-class="{\'has-error\':isValueError()}" style="margin-bottom:16px"><input type="text" name="entries_synonyms" ng-show="false" required ng-model="someFilledEntry().synonyms[0]"> <span class="loader7" ng-show="isFiltering"></span><ul class="list-group" ng-hide="isFiltering"><div paging="paging" class="paging-header"></div><li class="list-group-item" ng-repeat="entry in filteredEntries | limitTo:paging.pageSize:paging.pageSize * paging.currentPage track by $index " ng-click="editEntry($index, $event)" tabindex="{{ $index + 1 }}"><span ng-if="$index === editedEntry" class="entity-entry-wrapper"><input type="text" spellcheck="false" ng-model="entry.value" ng-keydown="entryInputKeyDown($index, \'value\', $event)" ng-blur="handleValueBlur($index)" maxlength="{{limitsManager.getTextLength(\'entry\')}}" class="borderless entry-value-input" placeholder="Enter reference value" style="width:29%;padding:2px"> <span class="input-holder tags-holder white-tokens-wrapper"><input class="entry-synonyms-input" tokenfield="tokenfieldConf" on-enter="handleEnter($index, \'synonyms\')" ng-model="entry.synonyms" placeholder="Enter synonym" type="text" ng-change="updateReferenceValue(entry)"> </span></span><span ng-if="$index !== editedEntry && entryIsFilled(entry)" class="entity-entry-wrapper entity-entry-not-edited"><span style="width:30%" ng-bind="entry.value"></span> <span class="input-holder tags-holder white-tokens-wrapper"><div class="tokenfield form-control"><span ng-repeat="synonym in entry.synonyms track by $index" class="synonym-item" ng-bind="synonym"></span></div></span></span><spana ng-if="$index !== editedEntry && !entryIsFilled(entry)" class="entity-entry-wrapper entity-entry-empty"><span>Click here to edit entry</span></spana><div class="overlay" ng-show="$index !== editedEntry"></div><span class="ico-group visible-on-hover"><a class="ico-item" ng-show="$index !== editedEntry"><span class="flaticon glyphicon glyphicon-pencil"></span> </a><a ng-click="cleanEntry($index)" class="ico-item"><span class="flaticon stroke trash"></span></a></span></li><div style="position:relative"><input type="text" ng-focus="addNewEntry(activateTab)" style="position:absolute;clip:rect(0 0 0 0);width:1px;height:1px;padding:0;top:0;border:none"></div><div paging="paging" class="paging-footer"></div></ul></span><div class="add-param"><a ng-click="addNewEntry(activateTab)" a-disabled="!newEntityEnabled">+ Add a row</a></div>'),e.put("partials/entity/searchForm.html",'<form class="search-form"><div class="input-group"><input ng-model="entriesFilter" type="text" spellcheck="false" class="form-control" placeholder="Search entries"> <span class="mic-ico"><span class="glyphicon glyphicon-search"></span></span></div></form>'),e.put("partials/intent/intentParamModalPromptsEditor.html",'<form name="promptTable"><div class="prompt-table"><div class="prompt-row" ng-repeat="prompt in collection track by $index"><div class="prompt-cell prompt-cell-first">{{$index + 1}}</div><div class="prompt-cell prompt-cell-second"><textarea class="borderless prompts-prompt" msd-elastic ng-model="collection[$index]" placeholder="Enter a {{collectionItemName}}{{ $index > 0 ? \' variant\' : \'\' }}" ng-keydown="keyDown($event, prompt, $index)" completer="textcompleteOptions" leave-enter="true" ng-disabled="ngDisabled" maxlength="{{maxTextLength}}"></textarea></div><div class="prompt-cell prompt-cell-actions"><a ng-click="removePrompt($index)" class="visible-on-hover prompt-remove" ng-hide="ngDisabled"><span class="flaticon stroke trash"></span></a></div></div></div><div class="prompt-table ng-hide" ng-hide="!blankInputVisible()"><div class="prompt-row"><div class="prompt-cell prompt-cell-first">{{collection.length + 1}}</div><div class="prompt-cell prompt-cell-second"><textarea id="prompt-empty" class="borderless" ng-model="newPrompt" ng-keyup="blankInputKeyUp($event)" placeholder="Enter a {{collectionItemName}}{{ collection.length > 0 ? \' variant\' : \'\' }}" ng-disabled="ngDisabled" maxlength="{{maxTextLength}}"></textarea></div><div class="prompt-cell prompt-cell-actions locked"></div></div></div></form>'),e.put("partials/intent/intentParamTable.html",'<table id="intent-parameters-table" class="content-table intent-parameters-table"><thead><tr><th class="param-required">Required <i class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">Tick this box if the intent cant be complete without corresponding parameter.</md-tooltip></i></th><th class="param-name">Parameter name <i class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">This is the name of the parameter.</md-tooltip></i></th><th class="param-datatype">Entity <i class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">Specify a system or a developer entity corresponding to this parameter.</md-tooltip></i></th><th class="param-value">Value</th><th class="param-is-list">Is List <i class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">Check this box for getting a list of values for the corresponding parameter.</md-tooltip></i></th><th class="param-edit" ng-show="anyParameterRequired()">Prompts <i class="fa fa-question-circle"><md-tooltip md-direction="top" md-delay="100">Type questions that the agent will ask your users, if a request doesnt contain this parameter.</md-tooltip></i></th><th class="param-actions"></th></tr></thead><tbody ui-sortable="sortableConfig" ng-model="intent.responses[0].parameters"><tr class="intent-params-table-tr" ng-repeat="param in intent.responses[0].parameters track by $index" ng-class="isLastEmptyParam($last, param)"><td><md-checkbox class="md-primary alone intent-param-required" ng-model="param.required" aria-label="{{ param.name + \' required\' }}"></md-checkbox></td><td><input type="text" class="borderless param-name intent-param-name" ng-model="param.name" unique="param.name in intent.responses[0].parameters" placeholder="Enter name" focus-on="tabPressed && $last" ng-change="onChangeParamName(param, \'{{param.name}}\', $index)" ng-blur="validateParams()" maxlength="{{limitsManager.getTextLength(\'param\')}}"></td><td class="template-editor-param-meta-holder-wrapper"><span ng-style="{\'background-color\': getBgColor(param)}" class="intent-param-meta-holder" ng-bind="param.dataType" ng-if="param.auto" ng-click="startSelectParameter(param, $event)"></span> <input type="text" sti-autocomplete="parameterDataTypeAutocompleteCfg" class="borderless intent-param-meta-input" ng-model="param.dataType" ng-change="checkLatinNumeric(param)" placeholder="Enter entity" ng-if="!param.auto" ng-blur="validateParams()"></td><td class="template-editor-param-meta-holder-wrapper"><textarea msd-elastic completer="tcParamConf" type="text" ng-model="param.value" class="form-control intent-param-value" placeholder="Enter value" ng-if="!param.auto" ng-blur="validateParams()"></textarea><span class="intent-param-value-auto" ng-if="param.auto" ng-click="$mdOpenMenu($event)"><md-menu><a ng-click="$mdOpenMenu($event)">{{getValueForAutoParam(param)}}</a><md-menu-content width="4"><md-menu-item><md-button ng-click="changeAutoParamValueModifier(param, null)">{{param.value}}</md-button></md-menu-item><md-menu-item><md-button ng-click="changeAutoParamValueModifier(param, \'original\')">{{param.value}}.original</md-button></md-menu-item><md-menu-item ng-if="param.dataType === \'@sys.date\' && agentLang === \'en\'"><md-button ng-click="changeAutoParamValueModifier(param, \'partial\')">{{param.value}}.partial</md-button></md-menu-item><md-menu-item ng-if="param.dataType === \'@sys.date\' && agentLang === \'en\'"><md-button ng-click="changeAutoParamValueModifier(param, \'recent\')">{{param.value}}.recent</md-button></md-menu-item></md-menu-content></md-menu></span></td><td><md-checkbox class="md-primary" ng-model="param.isList" aria-label="Is list parameter"></md-checkbox></td><td ng-show="anyParameterRequired()"><span class="placeholder" ng-hide="param.required && param.name" title="Mark parameter as \'required\' to define prompts">&mdash;</span> <a ng-show="param.required && param.name" ng-click="showModalPrompts(param, \'prompts\')"><span class="prompts-edit-label intent-param-prompts-edit">{{getModalLabel(param)}}</span></a></td><td class="param-actions"><a class="visible-on-hover"><span class="flaticon glyphicon glyphicon-resize-vertical intent-param-drag" aria-hidden="true"></span></a><md-menu class="visible-on-hover"><button class="btn-icon dropdown-toggle intent-param-menu-open" ng-click="$mdOpenMenu($event)"><i class="flaticon glyphicon glyphicon-option-vertical"></i></button><md-menu-content><md-menu-item><md-button class="intent-param-default-value" ng-click="showModalPrompts(param, \'defaultValue\')">Default value</md-button></md-menu-item><md-menu-item><md-button class="intent-param-delete" ng-click="removeOneParam($index)">Delete</md-button></md-menu-item></md-menu-content></md-menu></td></tr></tbody></table>'),
e.put("partials/intent/intentTemplateTable.html",'<table ng-if="autoParams().length" class="content-table intent-parameters-table"><thead><tr><th>Parameter name</th><th>Entity</th><th>Resolved value</th><th class="param-actions"></th></tr></thead><tbody><tr class="autoparams template-editor-params-tr" ng-repeat="param in autoParams() track by $index"><td><input class="user-says-alias-editor template-editor-param-alias-editor" ng-model="param.alias" ng-change="checkLatinNumeric(param, $event)"></td><td class="template-editor-param-meta-holder-wrapper"><span style="background-color:{};" class="meta-holder template-editor-param-meta-holder" ng-bind="param.meta" ng-click="startSelectParameter(param, $event)"></span></td><td class="template-editor-param-resolved-value"><span>{{(param.text) ? param.text : "&mdash;"}}</span></td><td class="param-actions"><button class="btn-icon" ng-click="removeParam(param)" type="button" ng-show="isMarkup(param)"><span class="flaticon stroke x-1"></span></button></td></tr></tbody></table>'),e.put("partials/intent/onOffpriorityChanger.html",'<md-switch class="md-primary" ng-model="config.before.currentPriority" aria-label="priority-switcher" ng-change="config.before.onOffPriority(config.before.currentPriority)"></md-switch>'),e.put("partials/intent/priorityChanger.html",'<md-menu><md-button aria-label="Open phone interactions menu" class="md-icon-button" ng-click="$mdOpenMenu($event)"><i class="i-priority-color-mark priority-{{config.before.currentPriority}}"></i><md-tooltip md-direction="bottom" md-delay="100">You can switch intent priority by pressing this icon</md-tooltip></md-button><md-menu-content><md-menu-item class="md-menu-priority-switcher-item" ng-click="config.before.updatePriority(item.value)" ng-repeat="item in config.before.prioritySelectConfig.items"><md-button><i class="i-priority-color-mark priority-{{item.value}}"></i> {{item.label}}</md-button></md-menu-item></md-menu-content></md-menu>'),e.put("partials/mainscreen/control-panel.html",'<div id="control-panel" class="control-panel" ng-cloak class="ng-cloak"><nav class="navbar navbar-default" role="navigation"><ul id="control-panel-menu" class="nav navbar-nav scrollbar-forced" ng-cloak><li ng-hide="getCurrentUserKey() || isUserProfile()" ng-class="{active: (activeTab.name == \'newAgent\'), inactive: !getKey()}"><a id="link-create-agent" ng-click="goSref(\'auth.workPlace.agent_new\');" md-ink-ripple><em class="ico"><span class="flaticon stroke plus-1"></span></em> <span class="dl">Create Agent</span></a></li><li class="dropdown current-agent" ng-show="getUser() && !isUserProfile()"><a id="agents-dropdown-toggle" class="dropdown-toggle" data-toggle="dropdown" ng-show="getKey()" md-ink-ripple><span class="dl">{{ ddActive.label || \'Agents\' }}</span> <span id="link-settings-agent" class="flaticon stroke settings icon-right" ng-class="{\'fa-spin\': getAgentTrainingStatus()}" ng-click="ddActive.icoActionFn(); $event.stopPropagation();"></span> <span class="icon-right icon-caret"><span class="caret"></span></span></a><ul id="agents-dropdown" class="dropdown-menu" role="menu"><li ng-repeat="dd in filteredDropdown | orderBy:\'label\'" ng-class="{ divider:!dd.label }" ng-show="!!dd.label && breadcrumbs.dropdown.length > 1"><a ng-click="dd.actionFn();selectItem(dd);"><span ng-class="{\'selected-label\':dd.key==breadcrumbs.selectedKey}" class="dl">{{ dd.label }}</span></a></li><li class="divider" ng-show="breadcrumbs.dropdown.length || ddActive.label"></li><li><a id="link-create-agent-dropdown" ng-click="goSref(\'auth.workPlace.agent_new\');"><span class="flaticon stroke plus-2"></span> Create new agent</a></li><li><a id="link-list-agents" ng-href="#/agents"><span class="flaticon stroke menu-list-2"></span> View all agents</a></li></ul></li><li ng-if="hasCapability(\'isMultilingual\') && !isUserProfile() && getKey()"><control-panel-lang-switcher></control-panel-lang-switcher></li><li ng-show="isUserProfile()"><a id="link-workplace" ui-sref="auth.workPlace.agent.intent_list({ agentId:agentId() })" md-ink-ripple><em class="ico"><span class="flaticon stroke multiple-browsers"></span></em> <span class="dl">Workplace</span></a></li><li class="nav-divider" ng-if="!isUserProfile()"></li><li ng-show="getUser() && !isUserProfile() && getKey()" ng-class="{active: (activeTab.name == \'listIntents\' || activeTab.name == \'newIntent\' || activeTab.name == \'editIntent\'), inactive: !getKey()}"><a id="link-list-intents" ng-click="goSref(\'auth.workPlace.agent.intent_list\',agentId());" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke thinking-comment-2"></span></em> <span class="dl">Intents</span> <span id="link-create-intent" md-ink-ripple ng-click="goSref(\'auth.workPlace.agent.intent_new\',agentId()); $event.stopPropagation();" class="flaticon stroke plus icon-right"></span> </a><a id="link-list-intents-list-agents" ui-sref="auth.workPlace.agent_list({ agentId:agentId() })" ng-hide="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke thinking-comment-2"></span></em> <span class="dl">Intents</span></a></li><li ng-show="getUser() && !isUserProfile() && getKey()" ng-class="{active: (activeTab.name == \'listEntities\' || activeTab.name == \'editEntity\' || activeTab.name == \'newEntity\' || activeTab.name == \'systemEntities\'), opened: true, inactive: !getKey()}"><a id="link-list-entities" ng-click="goSref(\'auth.workPlace.agent.entity_list\',agentId());" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke network"></span></em> <span class="dl">Entities</span> <span id="link-create-entity" md-ink-ripple ng-click="goSref(\'auth.workPlace.agent.entity_new\',agentId()); $event.stopPropagation();" class="flaticon stroke plus icon-right"></span> </a><a id="link-list-entities-list-agents" ui-sref="auth.workPlace.agent_list({ agentId:agentId() })" ng-hide="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke network"></span></em> <span class="dl">Entities</span></a></li><li ng-show="getUser() && !isUserProfile()" ng-class="{active: (activeTab.name == \'training\'), inactive: !getKey()}"><a id="link-training" ng-click="goSref(\'auth.workPlace.agent.training\', agentId())" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke training-menu"></span></em> <span class="dl">Training<sup> [beta]</sup></span></a></li><li ng-show="getUser() && !isUserProfile()" ng-class="{active: (activeTab.name == \'integrations\'), inactive: !getKey()}"><a id="link-integrations" ng-click="goSref(\'auth.workPlace.agent.integrations\', agentId())" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke reload-4"></span></em> <span class="dl">Integrations</span></a></li><li ng-show="getUser() && !isUserProfile()" ng-class="{active: (activeTab.name == \'analytics\'), inactive: !getKey()}"><a id="link-analytics" ng-click="goSref(\'auth.workPlace.agent.analytics\')" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke graph-2"></span></em> <span class="dl">Analytics<sup> [new]</sup></span></a></li><li ng-show="getUser() && !isUserProfile()" ng-class="{active: (activeTab.name == \'fulfillment\'), inactive: !getKey()}"><a id="link-fulfillment" ui-sref="auth.workPlace.agent.fulfillment({ agentId:agentId() })" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke lightning-bolt"></span></em> <span class="dl">Fulfillment</span></a></li><li ng-show="getUser() && getKey() && isAgentStoreAvailable() || isSmallTalkAvailable()" class="nav-divider"></li><li ng-show="getUser() && !isUserProfile() && isAgentStoreAvailable()" ng-class="{active: (activeTab.name == \'prebuiltAgents\'), inactive: !getKey()}"><a id="link-public-agents" ui-sref="auth.workPlace.agent.prebuiltAgents({ agentId:agentId() })" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke book-5"></span></em> <span class="dl">Prebuilt Agents</span></a></li><li ng-show="getUser() && !isUserProfile() && isSmallTalkAvailable()" ng-class="{active: (activeTab.name == \'smalltalk\'), inactive: !getKey()}"><a id="link-smalltalk" ui-sref="auth.workPlace.agent.smalltalk({ agentId:agentId() })" ng-show="getKey()" md-ink-ripple><em class="ico"><span class="flaticon stroke chat-3"></span></em> <span class="dl">Small Talk</span></a></li><li ng-show="getUser() && getKey()" ng-if="!isUserProfile()" class="nav-divider"></li><li><a ng-href="https://dialogflow.com/docs/getting-started/basics" ng-click="analyticsTrack(\'DOCS_BUTTON_PRESSED\')" target="_blank" md-ink-ripple><em class="ico default"><span class="flaticon stroke right-2"></span></em> <span class="dl">Docs</span></a></li><li><a id="link-forum" ng-href="https://discuss.api.ai/" ng-click="analyticsTrack(\'FORUM_BUTTON_PRESSED\')" target="_blank" md-ink-ripple><em class="ico default"><span class="flaticon stroke right-2"></span></em> <span class="dl">Forum</span></a></li></ul><ul class="nav navbar-nav bottom" ng-cloak><li ng-show="getUser() && !isUserProfile()" ng-class="{active: (activeTab.name == \'support\')}"><a ui-sref="auth.workPlace.support" md-ink-ripple><em class="ico default"><span class="flaticon stroke help-2"></span></em> <span class="dl">Support</span></a></li><li ng-class="{active: (activeTab.name == \'userProfile\'), inactive: !getKey()}"><a id="link-profile" ui-sref="auth.userProfile.personalInformation" md-ink-ripple><em class="ico"><span class="flaticon stroke profile"></span></em> <span class="dl">Account</span></a></li><li><a id="link-logout" ng-click="logout()" md-ink-ripple><em class="ico"><span class="flaticon stroke logout"></span></em> <span class="dl">Logout</span></a></li></ul></nav></div>'),e.put("partials/mainscreen/forgot_password.html",'<div class="container"><div class="couple couple-signin clearfix"><div class="couple-left-col"><form name="form" class="signin-form" ng-submit="resetPassword(email)" ng-hide="resetSuccessful"><div class="control-title">Forgot your password?</div><div class="control-subsubtitle">It happens. It\'s ok, just let us know what email address you used to sign up and we will send you an email with reset instructions.</div><fieldset><div layout="row"><div flex="100"><md-input-container class="md-block"><label>Email</label><input ng-model="email" type="email" name="email" id="email" ng-required="true" ng-focus="hasError=false" ng-blur="nameTouch=true"><div ng-messages="form.email.$error" role="alert"><div ng-message-exp="[\'required\']">Email address is required field</div><div ng-message-exp="[\'email\']">Email address is incorrect</div></div></md-input-container></div></div><script type="text/javascript">var RecaptchaOptions={theme:"custom",custom_theme_widget:"recaptcha_widget"}<\/script><div layout="row" layout-align="center center" class="loginRecaptcha"><div vc-recaptcha key="recaptchaPublicKey" ng-model="captcha" on-success="setResponse(response)" on-expire="cbExpiration()"></div></div><div class="login-btn"><button ng-disabled="form.$invalid || !responseRecaptcha" class="btn btn-sign btn-block">Reset password</button><div class="signin-info">Back to <a ng-href="#/login">Log In</a></div></div></fieldset></form><div ng-show="resetSuccessful" class="signin-form"><div class="login-btn"><div class="signin-info">Password reset link has been sent to <strong>{{email}}</strong>.</div><div class="signin-info">Back to <a ng-href="#/login">Log In</a></div></div></div></div><div class="signup-social couple-right-col"><div class="divider-text"><span>trusted by</span></div><div class="trusted clearfix"><div class="item"><img src="./assets/img/trusted/comcast.png" width="98" height="40" alt="comcast"></div><div class="item"><img src="./assets/img/trusted/motorola.png" width="59" height="40" alt="comcast"></div><div class="item"><img src="./assets/img/trusted/samsung.png" width="92" height="40" alt="comcast"></div><div class="item"><img src="./assets/img/trusted/sony.png" width="108" height="40" alt="comcast"></div></div></div></div></div>'),e.put("partials/mainscreen/login.html",'<div class="container"><div class="couple couple-signin clearfix"><div class="couple-left-col" ng-class="{ \'signup-center\': !isRetrieveAccessAvailable()}"><h3 style="text-align:center">Sign in with</h3><md-button class="md-raised md-primary md-btn-login md-btn-google" ng-if="isNetworkPresent(\'google\')" ng-href="/api-client/authorize_url_google/nopopup"><div class="md-btn-login-image-wrapper"><img src="/api-client/assets/img/new-google-favicon-128.png"></div><div class="md-btn-login-text-wrapper">Google</div></md-button><br><p class="description">In order to improve the system security, we are migrating authorization exclusively to Google accounts</p><br><a class="login-terms-href" href="https://dialogflow.com/terms" target="_blank" style="">Terms of use and privacy policy</a></div><div class="signup-social couple-right-col" ng-if="isRetrieveAccessAvailable()"><retrieve-access></retrieve-access></div></div></div>'),e.put("partials/mainscreen/user_profile.html",'<aside class="left-panel"><div class="navbar-header navbar-header-white"><a class="navbar-brand navbar-brand-black" ng-click="goHome()"></a> <span class="navbar-hint" ng-if="googlerEnabled">Internal only</span></div><div ui-view="control"></div></aside><section class="dashboard" id="main"><div class="left-margin"></div><div class="content-box user-profile"><div class="top-panel"><span class="left-margin"></span><div class="inner-header"><div class="view-header"><h1><em class="ico"><span class="flaticon stroke profile"></span></em>Account</h1></div><nav class="navbar navbar-default tabs" role="tabs"><ul class="nav navbar-nav" ng-cloak><li ui-sref-active="active"><a ui-sref="auth.userProfile.personalInformation">Profile</a></li><li ui-sref-active="active"><a ui-sref="auth.userProfile.accountSettings">Account settings</a></li></ul></nav></div></div><div ui-view="userprofile"></div></div></section>'),e.put("partials/mainscreen/workplace.html",'<toolbar-notice notifications="notifications" ng-show="showToolbar()" class="animated-show"></toolbar-notice><div class="wrapper-columns" ng-class="{ \'is-left-panel\': !!control.isLeftPanel, \'is-top-notice\': showToolbar()}"><aside class="left-panel"><div class="navbar-header navbar-header-white"><a class="navbar-brand navbar-brand-black" href="/api-client" target="_blank"></a> <span class="navbar-hint" ng-if="googlerEnabled">Internal only</span></div><div ui-view="control"></div></aside><aside class="right-panel right-panel-locked" ng-if="!getKey()" ng-click="hideLeftPanel()" ng-focus="hideLeftPanel()"><div class="right-panel-locked-content"><span class="lock-icon"><span class="glyphicon glyphicon-lock"></span> </span><span class="locked-text">Please, create at least one agent to access the test console</span></div></aside><aside class="right-panel" role="dialog" id="test-console" ng-test-client2 ng-init="speakResult=false" ng-if="getKey()" ng-click="hideLeftPanel()" ng-focus="hideLeftPanel()"></aside><section class="dashboard" id="main"><span class="right-margin"></span> <span class="left-margin"></span><div class="content-box"><div class="top-panel"><span class="right-margin"></span> <span class="left-margin"></span><div id="inner-header" class="inner-header"><div class="wrap"><button class="btn-icon toggle-left-panel" ng-class="{ \'active\': control.isLeftPanel }" ng-click="control.isLeftPanel = !control.isLeftPanel"><span class="flaticon stroke menu-3" ng-hide="getAgentTrainingStatus() && !control.isLeftPanel"></span> <span class="flaticon stroke settings fa-spin" ng-show="getAgentTrainingStatus() && !control.isLeftPanel"></span></button><div class="view-header" inner-header="headerConfig" ng-cloack></div></div></div></div><div class="wrap-loader"><div class="content-loader" ng-if="!stateLoaded"><md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular></div></div><div class="workplace" ui-view="workplace" ng-class="{ \'transparent\': !stateLoaded }"></div></div></section></div>'),e.put("partials/mainscreen/profile/account_settings.html",'<div><md-switch class="md-primary" ng-model="$parent.googlerEnabled" ng-click="toggleGoogler()" aria-label="Disable Googler role" ng-if="profile.isGoogler">Enable Google-only version</md-switch><div class="info-box danger"><div class="head"><span class="flaticon stroke J18"></span> <span class="title">DANGER ZONE</span></div><div class="main"><div class="clearfix"><a class="md-button md-raised pull-right" ng-click="deleteAccount()" style="margin-left:20px">Delete this account</a><div class="frame"><div class="name">Delete Account</div><p>Are you sure you want to delete account <strong>{{profile.email}}</strong>? This will destroy the account with all corresponding data and <strong>cannot be undone!</strong></p></div></div></div></div></div>'),e.put("partials/mainscreen/profile/personal_information.html",'<div class="profile-form"><form ng-submit="updateProfile(profile)" name="form" role="form"><fieldset><input data-bind="value: verdictLevel" id="PasswordVerdictLevel" name="PasswordVerdictLevel" type="hidden" value="-1"><div class="row"><label for="Email">Email</label><label class="input-holder"><input class="form-control" disabled aria-required="true" ng-model="profile.email" autofocus class="form-control" id="email" name="Email" type="text" value=""></label></div><div class="row"><label for="FirstName">First name</label><label class="input-holder"><input class="form-control" aria-required="true" ng-model="profile.firstName" class="form-control" id="firstName" name="FirstName" placeholder="First name" type="text" value=""></label></div><div class="row"><label for="LastName">Last name</label><label class="input-holder"><input class="form-control" aria-required="true" ng-model="profile.lastName" class="form-control" id="lastName" name="LastName" placeholder="Last name" type="text" value=""></label></div><div class="row"><label for="Company">Company</label><label class="input-holder"><input class="form-control" aria-required="true" ng-model="profile.company" class="form-control" id="company" name="Company" placeholder="Company" type="text" value=""></label></div><div class="row"><label for="Phone">Phone</label><label class="input-holder"><input class="form-control" aria-required="true" ng-model="profile.phone" class="form-control" id="phone" name="Phone" placeholder="Phone" type="text" value=""></label></div><div class="row" ng-show="hasError"><label class="input-holder has-error"></label><span class="red">{{errorDescription}}</span></div><button type="submit" value="Save" class="md-button md-primary md-raised" progress-button="saveProgress" progress-button-conf="saveProgressConf">Save</button></fieldset></form></div>'),e.put("templates/breadcrumbs.html",'<ul class="breadcrumbs ellipsis pull-left"><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown">{{breadcrumbs.showAgentName?getSelectedItem().label:"Agents"}}<button type="button" data-toggle="dropdown"><span class="caret"></span></button></a></li><ul class="dropdown-menu" role="menu"><li ng-show="!!ddActive.label"><a ng-click="ddActive.actionFn();selectItem(ddActive);"><span class="flaticon stroke right dd-link-licon"></span> <span class="selected-label dd-link-label">{{ddActive.label}}</span> <span ng-click="ddActive.icoActionFn(); $event.stopPropagation();" class="flaticon stroke settings color-white dd-link-ricon"></span></a></li><li class="divider" ng-show="breadcrumbs.selectedKey && breadcrumbs.dropdown.length > 1"></li><li ng-repeat="dd in filteredDropdown | orderBy:\'label\'" ng-class="{divider:!dd.label}" ng-show="!!dd.label && breadcrumbs.dropdown.length > 1"><a ng-click="dd.actionFn();selectItem(dd);"><span ng-class="{\'transparent\':dd.key!=breadcrumbs.selectedKey}" class="flaticon stroke right dd-link-licon"></span> <span ng-class="{\'selected-label\':dd.key==breadcrumbs.selectedKey}" class="dd-link-label">{{dd.label}}</span> <span ng-click="dd.icoActionFn(); $event.stopPropagation();" class="flaticon stroke settings color-white dd-link-ricon"></span></a></li><li class="divider" ng-show="breadcrumbs.dropdown.length || ddActive.label"></li><li><a ng-href="#/newAgent"><span class="flaticon stroke plus-2"></span> Create new agent</a></li><li><a ng-href="#/agents"><span class="flaticon stroke menu-list-2"></span> View all agents</a></li></ul><li ng-show="!!breadcrumbs.list.label"><a ng-href="{{breadcrumbs.list.href}}">{{breadcrumbs.list.label}}</a></li><li ng-show="!!breadcrumbs.element.label"><a ng-href="{{breadcrumbs.element.href}}">{{breadcrumbs.element.label}}</a></li></ul>'),e.put("templates/innerHeader.html",'<div class="wrap-actions {{config.wrapperClass ? config.wrapperClass : \'\' }}" ng-class="{\'loaded\': config.loaded}"><div ng-hide="config.navButton.hidden || !navButton.notEmpty()" class="btn-holder select-button"><div class="btn-group btn-group-lg"><button ng-if="config.navButton.explicitButton" id="header-explicit-button" md-ink-ripple class="md-button md-primary md-raised b-explicit-header-button" ng-click="navButton.doAction(config.navButton.explicitButton)">{{config.navButton.explicitButton.label}}</button> <button id="multi-button" md-ink-ripple progress-button="config.navButton.progressButtonClosure()" progress-button-conf="config.navButton.progressButtonConf" ng-disabled="config.navButton.items[0].disabled" type="button" class="md-button md-primary md-raised" ng-click="navButton.doAction(config.navButton.items[0])">{{config.navButton.items[0].label}}</button><md-menu ng-show="getKey() && config.navButton.items.length > 1"><button id="multi-button-menu-button" class="btn-icon dropdown-toggle" ng-click="$mdOpenMenu($event)"><i class="glyphicon glyphicon-option-vertical"></i></button><md-menu-content id="multi-button-menu"><md-menu-item ng-show="!!item.label" ng-repeat="item in config.navButton.items" ng-if="$index > 0" ng-hide="item.hidden"><md-button ng-click="navButton.doAction(item);">{{item.label}}</md-button></md-menu-item></md-menu-content></md-menu></div></div><div class="inner-header-after" ng-if="config.after" ng-include="config.after.templateUrl"></div><h1 ng-if="config.form === false" ng-cloack><span ng-bind-html="trustAsHtml(config.label)"></span> <span class="questions fa fa-question-circle" ng-show="config.tour" ng-click="startTour()"></span></h1><div class="inner-header-before" ng-if="config.form === true && config.before" ng-include="config.before.templateUrl"></div><div class="header-form" layout="column" ng-show="config.form === true" ng-cloack><md-input-container md-no-float md-is-error ng-form="headerForm" flex="noshrink" ng-cloack><input id="entity-name" type="text" name="name" spellcheck="false" placeholder="{{ config.label }}" focus-on="config.focus" ng-model="config.model" class="form-header" ng-maxlength="config.maxlength" ng-pattern="config.pattern" ng-required="config.required"><div role="alert" ng-messages="config.headerForm.name.$error"><div ng-message-exp="config.messageExp" ng-if="config.touched || config.headerForm.name.$touched || config.headerForm.name.$dirty">{{ config.message }}</div><div ng-message="maxlength">Maximum name length is {{config.maxlength}}</div></div></md-input-container></div></div>'),e.put("templates/paging_footer.html",'<div class="paging-box" ng-show="paging.numberOfPages() > 1"><a class="next" ng-hide="paging.currentPage >= paging.numberOfPages() - 1" ng-click="goNext()"><span class="flaticon stroke right-4"></span> </a><a class="prev" ng-hide="paging.currentPage == 0" ng-click="goPrev()"><span class="flaticon stroke left-4"></span></a><div class="page-num"><input type="text" align="right" ng-model="pageNum" ng-enter="setPage()" ng-blur="setPage()" size="3"> &nbsp;&nbsp;&nbsp; OF &nbsp;&nbsp;&nbsp; {{paging.numberOfPages()}}</div></div>'),e.put("templates/select.html",'<div class="btn-group"><button ng-disabled="ngDisabled" type="button" class="btn btn-default dropdown-toggle select-dropdown" data-toggle="dropdown">{{getSelectedItem().label}}</button> <button ng-disabled="ngDisabled" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span> <span class="sr-only">Toggle Dropdown</span></button><ul class="dropdown-menu" role="menu"><li ng-repeat="item in config.items | orderBy:config.orderBy.predicate:config.orderBy.reverse | filter:config.filterBy" ng-class="{ divider:!item.label, active:item.label==config.selectedLabel }"><a ng-show="!!item.label" ng-click="config.selectedLabel=item.label">{{item.label}}</a></li></ul></div>'),e.put("templates/selectButton.html",'<div class="btn-group btn-group-lg" ng-hide="config.isHide"><button progress-button="config.progressButtonClosure()" progress-button-conf="config.progressButtonConf" type="button" class="btn btn-primary" ng-click="doAction(getSelectedItem())">{{getSelectedItem().label}}</button><md-menu ng-show="getKey()"><button class="btn-icon dropdown-toggle" ng-click="$mdOpenMenu($event)"><i class="glyphicon glyphicon-option-vertical"></i></button><md-menu-content><md-menu-item ng-repeat="item in finallyFilteredItems = filteredItems() | orderBy:config.orderBy.predicate:config.orderBy.reverse | filterBy:config.filterBy"><md-button ng-show="!!item.label" ng-click="doAction(item, $mdCloseMenu, $event);">{{item.label}}</md-button></md-menu-item></md-menu-content></md-menu></div>'),e.put("templates/selectParameter.html",'<div class="select-parameter"><md-menu-content class="select-head"><md-menu-item ng-show="current.value" ng-click="close()" class="list-item current"><div class="md-button"><div id="selected-param" style="width:90%;float:left;text-overflow:ellipsis;overflow:hidden"><span class="selection" ng-style="{ \'background-color\': current.bgColor}">{{ getItemName(current, true)}}<span class="alias" ng-show="current.alias">:{{ getItemAlias(current)}}</span></span></div><span class="flaticon stroke trash remove" style="float:right" ng-click="selectParameter.select({meta: \'@sys.ignore\'})"><md-tooltip md-direction="top" md-delay="100">Remove parameter</md-tooltip></span><md-tooltip md-direction="top" md-delay="100" ng-if="collapseItem(current)">{{getItemTooltip(current)}}</md-tooltip></div></md-menu-item><div class="filter"><div class="input-group"><input type="text" class="form-control" placeholder="Filter" ng-model="filterParam" focus-on="focus" ng-keydown="selectParameter.keydown($event)" ng-focus="selectParameter.focus()"></div></div></md-menu-content><md-divider></md-divider><md-menu-content class="select-params"><md-menu-item class="list-item" ng-class="{ selected: $index === selectParameter.index }" ng-repeat="param in paramsFiltered = (params | filter:filterParam | limitTo:limitScroll) track by $index"><md-button class="selector-item" ng-click="selectParameter.select(param.meta ? param : {meta: param})" style="text-overflow:ellipsis"><span>{{ getItemName(param)}}</span><span class="alias" ng-show="param.alias">:{{ getItemAlias(param)}}</span></md-button><md-tooltip md-direction="top" md-delay="100" ng-if="collapseItem(param, $index)">{{getItemTooltip(param)}}</md-tooltip></md-menu-item><md-menu-item ng-hide="paramsFiltered.length"><md-button ng-disabled="true">No matching entities</md-button></md-menu-item></md-menu-content><md-divider ng-show="selectText"></md-divider><md-menu-content class="select-bottom" ng-show="selectText"><md-menu-item class="list-item"><a class="create-new" ng-click="createNewEntity(selectText); $event.stopPropagation();"><span class="flaticon stroke plus icon-left"></span> Create new</a></md-menu-item></md-menu-content><md-divider ng-show="innerCreateNew"></md-divider><md-menu-content class="select-bottom" ng-show="innerCreateNew"><md-menu-item class="list-item" ng-hide="innerCreateNewStarted"><a class="create-new" ng-click="startInnerCreateNew(); $event.stopPropagation();"><span class="flaticon stroke plus icon-left"></span> Create new</a></md-menu-item><md-menu-item class="list-item inner-create-new" ng-show="innerCreateNewStarted"><input placeholder="Enter name" class="form-control" ng-enter="finishInnerCreateNew()" ng-model="innerCreateNewModel"></md-menu-item></md-menu-content></div>'),e.put("templates/showJson.html",'<md-dialog class="json_dialog"><md-dialog-title class="md-dialog-title"><h3 flex>JSON</h3></md-dialog-title><md-dialog-content><div ng-if="vm.contentLoaded"><div class="show-json"><json-editor options="options" json="json" style="display:block"></json-editor></div></div><md-dialog-loader ng-if="!vm.contentLoaded"><div layout="row" layout-sm="column" layout-align="center center"><md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular></div></md-dialog-loader></md-dialog-content><md-dialog-actions><md-button ng-click="cancel()">Close</md-button><md-button class="md-primary" ng-clipboard="clipboardConf">Copy</md-button></md-dialog-actions></md-dialog>')}])}(),function(){"use strict";function e(){return{restrict:"EA",scope:{ngModel:"=",callback:"&",placeholder:"@",name:"=",required:"@",focus:"@",maxSize:"@"},template:'<input type="text" ng-model="ngModel" ng-change="callback({theModel:ngModel});" ng-mousedown="onClick()" ng-mouseover="showIcon=true" ng-mouseleave="onLeave()" ng-readonly="isReadonly" ng-blur="onBlur()" ng-keyup="keyHandler($event)" required="{{required}}" name="name" ng-class="{borderless:isReadonly}" placeholder="{{placeholder}}" size="{{size}}" style="cursor: text;" focus-on="{{focus}}" ng-init="inputInit()"/><span class="flaticon stroke edit" ng-show="showIcon" ng-click="onClick()" ng-mouseover="showIcon=true" ng-mouseleave="onLeave()"></span>',link:function(e,t,n){e.isReadonly=!0,e.showIcon=!1;var i=e.maxSize||9;e.$watch(function(){return e.ngModel},function(t){if(t){var n=8+t.length;e.size=n>i?i:n}else e.showIcon=!0,e.size=9}),e.onBlur=function(){e.isReadonly=!0,e.showIcon=!1},e.onClick=function(){e.isReadonly&&(e.isReadonly=!1,e.showIcon=!0)},e.onLeave=function(){e.isReadonly&&(e.showIcon=!1)},e.keyHandler=function(t){if(e.ngModel)switch(t.which){case 13:e.isReadonly=!0,e.showIcon=!1}else e.isReadonly=!1},e.inputInit=function(){e.focus&&e.onClick()}}}}angular.module("ui.controls").directive("inputLabel",e)}(),function(){"use strict";function e(e,t){return{restrict:"EA",scope:{ngModel:"=",callback:"&",placeholder:"@",name:"=",required:"@",wordValidation:"@",wordValidationRegexp:"@",ngFocus:"&",ngBlur:"&",focus:"@"},require:"ngModel",template:'<table><tr><td><span class="ellipsis" contenteditable ng-model="ngModel" ng-click="setFocus()" focus-on="{{focus}}" ng-change="callback({theModel:ngModel});" ng-keydown="keyHandler($event)" ng-focus="onfocus();ngFocus();" ng-blur="onblur();ngBlur();" ng-class="{\'text-overflow-clip\':isFocused, \'text-overflow-ellipsis\':!isFocused}"></span></td><td><span class="flaticon stroke edit" ng-click="setFocus()"></span></td><td></td></tr></table><input type="text" ng-hide="true" ng-model="ngModel" ng-required="{{required}}" word-validation="{{wordValidation}}" word-validation-regexp="{{wordValidationRegexp}}" name="name" placeholder="{{placeholder}}"/>',compile:function(){return function(n,i,a,r){function o(){var e=d.width();u.css("max-width",e-47)}var s=new RegExp("^.+"+n.placeholder+"$"),l=i.find("span").eq(0),c=l[0],d=i.parent(),u=i.find("td").eq(0);$(window).resize(o),o(),n.onfocus=function(){n.isFocused=!0},n.onblur=function(){l.scrollLeft(0),n.isFocused=!1},i.on("keydown",function(e){13==e.which&&e.preventDefault()});var p=i.parent().find("[contenteditable]");p.on("keydown",function(e){13==e.which&&(e.preventDefault(),p.blur())}),n.setFocus=function(){e(function(){l.focus()},0,!1)},n.keyHandler=function(t){switch(t.which){case 13:t.preventDefault(),e(function(){l.blur()},0,!1)}},n.$watch(function(){return n.ngModel},function(i,a){i||a?a==n.placeholder&&s.test(i)?(n.ngModel=i.substr(0,i.indexOf(n.placeholder)),e(function(){t.placeCaretAtEnd(c,!0)},0,!1)):!i&&a&&(n.ngModel=n.placeholder,
e(function(){l.focus()},0,!1)):n.ngModel=n.placeholder})}}}}angular.module("ui.controls").directive("inputLabel2",e),e.$inject=["$timeout","SelectionTools"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,n){e.$on("event:auth-loginRequired",function(){console.log("event:auth-loginRequired"),e.login()})},controller:"LoginController"}}function t(e,t,n,i,a,r,o,s,l,c,d,u){function p(t,n,i,a,r){var o=new Date,s=o.getTime()+6e4*o.getTimezoneOffset();s-e.$storage.apiVersionCheckGmtTime>v&&d.get("/api-client/apiClientVersion").then(function(t){e.$storage.apiVersionCheckGmtTime=s,e.$storage.apiClientVersion!==t.data.webClientVersion&&(e.$storage.apiClientVersion=t.data.webClientVersion,l.location.reload(!0))})}function g(){h||a(m,f),h=!0}function m(){t.currentUser().then(function(){a(m,f)},function(){h=!1})}var f=3e5,h=!1,v=36e5,b=new Date,y=b.getTime()+6e4*b.getTimezoneOffset();e.$storage=c.$default({apiVersionCheckGmtTime:y}),s.$on("$stateChangeSuccess",p),t.currentUser().then(function(e){n.setCurrentUserEmail(e.data.username),g()}),e.$on("event:auth-loginConfirmed",function(){g()}),e.login=function(){n.clear(),i.go("authless.login")},e.logout=function(){n.clear(),r.logout(),o.track("USER_SIGNED_OUT"),i.go("authless.login")},e.signup=function(){i.go("authless.login")},e.getUser=function(){return n.getCurrentUserEmail()},e.getKey=function(){return n.getKey()},e.goHome=function(){r.goHome()},e.isNoSideCls=function(){return i.is("authless.login")||i.is("authless.signup")||i.is("authless.forgotPassword")||i.includes("auth.account")},e.isUserProfile=function(){return i.is("auth.userProfile")||i.includes("auth.userProfile")},e.fromSlackLanding=function(){return u.fromSlackLanding()}}angular.module("api.security").directive("loginForm",e),angular.module("api.security").controller("LoginController",t),t.$inject="$scope, LoginData, CurrentUser, $state, $timeout, LoginService, AnalyticsService, $rootScope, $window, $localStorage, $http, UtilsService".split(", ")}(),function(){"use strict";function e(e,t){return{restrict:"A",require:"ngModel",link:function(n,i,a,r){function o(){var e=i.find(".md-chip-content._md-chip-content-edit-is-enabled");e.length>0&&(n.mdChipsInputMaxlength&&e.keydown(s),n.mdChipsInputIllegalRegex&&e.keypress(l))}function s(e){if(t.isPrintableKeycode(e.which)){var i=$(e.target).text();i&&i.trim().length>=n.mdChipsInputMaxlength&&(e.preventDefault(),e.stopPropagation())}}function l(e){String.fromCharCode(e.which).match(n.mdChipsInputIllegalRegex)&&(e.preventDefault(),e.stopPropagation())}a.mdChipsInputIllegalRegex&&(n.mdChipsInputIllegalRegex=n.$eval(a.mdChipsInputIllegalRegex)),a.mdChipsInputMaxlength&&(n.mdChipsInputMaxlength=n.$eval(a.mdChipsInputMaxlength)),(n.mdChipsInputMaxlength||n.mdChipsInputIllegalRegex)&&n.$watch(function(){return r.$modelValue},function(t,n){t.length!=n.length&&e(o)},!0),e(function(){if(a.mdChipsInputShow){var e=i.find(".md-chip-input-container");e.length>0&&n.$watch(a.mdChipsInputShow,function(t){t?e.show():e.hide()})}if(n.mdChipsInputMaxlength||n.mdChipsInputIllegalRegex){var t=i.find("input, textarea");t.length>0&&(n.mdChipsInputMaxlength&&t.attr("maxlength",n.mdChipsInputMaxlength),n.mdChipsInputIllegalRegex&&t.keypress(l))}})}}}angular.module("ui.controls").directive("mdChipsInput",e),e.$inject="$timeout, UtilsService".split(", ")}(),function(){"use strict";function e(e,t){return{restrict:"A",template:'<span class="mic-ico" ng-click="toggleListening()" ng-class="{speak:isRecognizing}" title="{{title}}" >   <span class="flaticon stroke" ng-class="{\'microphone\':!isDisabled,\'microphone-2\':isDisabled}"></span></span>',replace:!0,transclude:!1,require:"?ngModel",compile:function(n,i){var a=e(i.microphone,null,!0);return function(e,n,i,r){function o(){e.isDisabled||(l?(s.stopListening(),l=!1):(l=!0,s.isInitialise()?s.startListening():s.init()))}if(r){var s,l=!1;e.title="Start",e.isDisabled=!1,e.isRecognizing=!1,e.toggleListening=o;var c=a(e),d=c.onStartListeningCb||angular.noop,u=c.onStopListeningCb||angular.noop,p=c.onCloseCb||angular.noop,g=c.onResultsCb||angular.noop,m=c.onErrorCb||angular.noop,f=c.onEventCb||angular.noop;e.$watch(function(){return a(e)},function(e,t){e.server!=t.server&&(s.server=e.server),e.token!=t.token&&(s.token=e.token),e.sessionId!=t.sessionId&&(s.sessionId=e.sessionId)},!0),s=new ApiAi({server:c.server,token:c.token,sessionId:c.sessionId}),s.onInit=function(){console.log("MICROPHONE::INIT"),s.open()},s.onStartListening=function(){console.log("MICROPHONE::START"),e.title="Stop",e.isDisabled=!1,t(function(){e.isRecognizing=!0},0),d()},s.onStopListening=function(){console.log("MICROPHONE::STOP"),e.title="Stopping...",e.isDisabled=!0,t(function(){e.isRecognizing=!1},0),u()},s.onOpen=function(){console.log("MICROPHONE::OPEN connection"),s.startListening()},s.onClose=function(){console.log("MICROPHONE::CLOSE connection"),e.title="Start",e.isDisabled=!1,l=!1,t(function(){e.isRecognizing=!1},0),s.close(),p()},s.onResults=function(t){console.log("MICROPHONE::RESULT: ",t);var n=t.status;n&&n.code&&n.code>=200&&n.code<300&&(g(t),t&&t.result&&r.$setViewValue(t.result.resolvedQuery),e.title="Start",e.isDisabled=!1)},s.onError=function(t,n){s.close(),console.log('MICROPHONE::ERROR: code="',t,'", data="',n,'"'),m(t,n),n&&n.indexOf("No live audio input in this browser")>=0&&(e.isDisabled=!0)},s.onEvent=function(e,t){console.log('MICROPHONE::EVENT: code="',e,'", data="',t,'"'),f(e,t)}}}}}}angular.module("ui.controls").directive("microphone",e),e.$inject=["$parse","$timeout"]}(),function(){"use strict";function e(e,t){return{restrict:"A",compile:function(t,n){var i=e(n.ngClipboard,null,!0);return function(e,t,n){var a=i(e),r=new Clipboard(t[0],{text:function(e){return a.text}});r.on("success",a.success),r.on("error",a.error),e.$watch(function(){return i(e)},function(e,t){a=e},!0)}}}}angular.module("ui.controls").directive("ngClipboard",e),e.$inject=["$parse","$compile"]}(),function(){"use strict";function e(){return{restrict:"AE",replace:!0,require:"?ngModel",transclude:!0,template:"<div contenteditable ng-transclude></div>",link:function(e,t,n,i){function a(){var e=t.html();i.$setViewValue(e)}i&&(i.$render=function(){t.html(i.$viewValue||"")},t.on("blur keyup change",function(){e.$apply(a)}))}}}angular.module("ui.controls").directive("ngContenteditable",e)}(),function(){"use strict";function e(e){return{restrict:"A",priority:1e3,compile:function(t,n){var i=e(n.ngEnter,null,!0);return function(e,t){t.on("keypress",function(t){13===t.which&&(e.$apply(function(){i(e,{$event:t})}),t.preventDefault())})}}}}angular.module("ui.controls").directive("ngEnter",e),e.$inject=["$parse"]}(),function(){"use strict";function e(){return{restrict:"A",templateUrl:"partials/test_client.html",controller:"TestController"}}angular.module("api.test.client").directive("ngTestClient2",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{paging:"=paging"},controller:"pagingCtrl",templateUrl:"templates/paging_footer.html"}}function t(e,t){function n(t){var n=i(t);e.paging.currentPage=n,e.pageNum=n+1,e.paging.callback&&e.paging.callback()}function i(n){return t.checkIdRanges(n,0,e.paging.numberOfPages())}e.pageNum=1,e.setPage=function(){var t,i=+e.pageNum;t=isNaN(i)?0:i-1,n(t)},e.goPrev=function(){n(e.pageNum-1-1)},e.goNext=function(){n(e.pageNum-1+1)},e.$watch("paging.currentPage",function(t,a){(t=i(t))!=e.pageNum-1&&n(t)}),e.$watch(function(){return e.paging.numberOfPages()},function(t,a){var r=i(e.paging.currentPage);r!=e.pageNum-1&&n(r)})}angular.module("ui.controls").directive("paging",e),angular.module("ui.controls").controller("pagingCtrl",t),e.$inject=[],t.$inject="$scope, UtilsService".split(", ")}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{},replace:!0,transclude:"element",template:'<span class="{{bgColor}}" ng-transclude></span>',compile:function(n,i,a){return function(n,i){var r=n.$parent.$new();a(r,function(a){var o=e(a.html())(r);n.bgColor=t.getBackgroundColorClass(o),i.empty(),i.append(o)})}}}}angular.module("ui.controls").directive("paint",e),e.$inject=["$interpolate","ColorHelperService"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{progressButton:"=",progressButtonConf:"="},link:function(t,n,i){function a(){var t=0;return e(function(){t+=(1-t)*Math.random()*.5,n.progressSet(100*t)},200)}var r=!1;if(!n.progressInitialize)throw"Required jQuery plugin: progressmeters.js";n.addClass("progress-button");var o=angular.extend({type:"background-horizontal",loading:"Working...",finished:"Done",recoverytime:2,aftertime:2},t.progressButtonConf);n.data(o),n.progressInitialize(),t.$watch(function(){return t.progressButton},function(t,i){if(r)return!1;if(t instanceof Object&&"function"==typeof t.then)r=a(),t.then(function(){r&&e.cancel(r)&&(r=!1),n.progressFinish()},function(){r&&e.cancel(r)&&(r=!1),n.progressCancel()});else{var o=parseFloat(t);isNaN(o)?"true"==t&&"true"!=i?n.progressTimed(5):"false"==t&&"false"!=i&&n.progressFinish():n.progressSet(o>0?o:0)}})}}}angular.module("ui.progressmeters").directive("progressButton",e),e.$inject=["$interval"]}(),function(){"use strict";function e(e,t,n){return{restrict:"A",require:"?ngModel",link:function(e,i,a,r){function o(){if(g)return!1;t(u()),i.find(".selection.resizing").removeClass("resizing")}function s(e,t){var n;return document.caretRangeFromPoint&&(n=document.caretRangeFromPoint(e,t)),n}function l(e,t){var n=!1;return t&&t.length&&t.each(function(){if(n=e.isPointInRange(this,1))return!1}),n}function c(e,t,a,r){e.preventDefault();var o,c,d,a,u,p,g=e.clientX,m=e.clientY;if(c=$(t),d=i.find(".marker"),p="marker1"===t.id,p?(g+=4,m+=10):(g-=4,m-=10),!(o=s(g,m))||!o.commonAncestorContainer)return!1;var f=i.find(".selection.resizing");if(!f.length)return!1;var h=o.commonAncestorContainer.parentElement;h.getAttribute("selection-value")===n.IGNORE&&($(h).contents().unwrap(),o=s(g,m));var v=!1;if(h===f[0]&&(v=!0),h===i[0]||v){u=!!d.get(0).isEqualNode(c[0]);var b=document.createRange(),y=d.not(c[0]).get(0),w=document.createRange();if(w.selectNode(y),o.compareBoundaryPoints(Range.START_TO_END,w)<0?(b.setStart(o.startContainer,o.startOffset),b.setEndBefore(d.get(u?1:0))):(b.setStartAfter(d.get(u?1:0)),b.setEnd(o.startContainer,o.startOffset)),l(b,r))return console.log("Invalid inside range"),!1;f.contents().unwrap(),v&&(o=s(g,m));var k=c.remove()[0];o.insertNode(k);var C=document.createRange();C.setStartAfter(d.get(0)),C.setEndBefore(d.get(1)),C.surroundContents(a[0])}return!1}function d(e,t){t?e.before(p(t)):e.after(p(t))}function u(e){var t=i.find(".marker");t.length&&t.remove(),e&&(d(e,!0),d(e,!1))}function p(e){var t,n,i=document.createElement("span");i.className="marker",i.id=e?"marker1":"marker2";var a=document.createElement("span");return a.className="handle",i.appendChild(a),e?(a.className+=" handle-start",t=i):(a.className+=" handle-end",n=i),e?t:n}var g=!1;document.caretRangeFromPoint&&(i.on("mouseover",".selection",function(e){e.preventDefault();var a=$(".intent-editor #intent-user-says-editor .template-editor-holder");if(g||a.hasClass("marker-down"))return!1;var r=angular.element(e.target),o=r.attr("selection-value");return o&&o!==n.IGNORE&&(i.find(".selection.resizing").removeClass("resizing"),r.addClass("resizing"),t(u(r))),!1}),i.on("blur mouseleave",function(e){e.preventDefault(),o()}),i.on("mouseleave",".marker",function(e){e.preventDefault(),o()}),i.on("click",".marker",function(e){var t=i.find(".selection.resizing");t.trigger(new $.Event("mouseup",{pageX:e.pageX,pageY:e.pageY,originalEvent:{layerX:t[0].offsetLeft+t[0].offsetWidth,layerY:t[0].offsetTop}}))}),i.on("mousedown",".marker",function(e){e.preventDefault(),e.stopPropagation();var n=this;g=!0,i.addClass("marker-down");var a=(i.find(".marker"),i.find(".selection.resizing")),r=i.find(".selection").not(a[0]),o=a.clone();$(document).on("mousemove.resizeSelection",function(e){c(e,n,o,r)}).on("mouseup.resizeSelection",function(e){return e.preventDefault(),$(document).off("mousemove.resizeSelection"),g=!1,i.removeClass("marker-down"),t(function(){u(),i.find(".selection.resizing").removeClass("resizing"),i.trigger("markupresize")}),$(document).off("mouseup.resizeSelection"),!1})}))},controller:"resizeSelectionsCtrl",controllerAs:"resizeSelections"}}function t(e,t,n){}angular.module("ui.controls").directive("resizeSelections",e).controller("resizeSelectionsCtrl",t),e.$inject=["$document","$timeout","METAS"],t.$inject=["$scope","$state","$element"]}(),function(){"use strict";function e(){function e(e){for(var t,n=0;n<i.length;n++)t=new RegExp(i[n],"g"),e=e.replace(t,a[n]);return e}function t(e,t){var n=t.target.getAttribute("max-length");if(n){var i=t.target.textContent,a=i?i.length:0;if(a+e.length>n){var r=Math.max(0,n-a);e=e.substring(0,r)}}return e}function n(n){n.preventDefault();var i=n.originalEvent.clipboardData.getData("text/plain"),a=t(e(i),n);return document.execCommand("inserttext",!1,a),!1}var i=["","","\n"],a=["-","'"," "];return{restrict:"A",link:function(e,t,i){t.on("paste",n),e.$on("$destroy",function(){t.off("paste",n)})}}}angular.module("ui.controls").directive("safePaste",e)}(),function(){"use strict";function e(e,t,n,i){return{restrict:"A",compile:function(a,r){var o=e(r.saveFocus,null,!0)||{};return function(e,a,r){var s=o(e);if(s){var l,c;if(angular.forEach(s,function(e,t){l=t,c=e}),l&&c){(t.get("saveFocus")||{})[l]==c&&n(function(){n(function(){a.focus()},0)},0),a.on("focus",function(n){function a(){var e=t.get("saveFocus")||{};e[l]=c,t.put("saveFocus",e)}i.$$phase?e.$evalAsync(a):e.$apply(a)})}}}}}}angular.module("ui.controls").directive("saveFocus",e),e.$inject="$parse, $cookieStore, $timeout, $rootScope".split(", ")}(),function(){"use strict";function e(e){return{restrict:"A",compile:function(t,n){var i=e(n.scrollThis,null,!0);return function(e,t){e.$watch(function(){return i(e)},function(e,n){e&&$("html,body").animate({scrollTop:t.offset().top},500)})}}}}angular.module("ui.controls").directive("scrollThis",e),e.$inject=["$parse"]}(),function(){"use strict";function e(){return{restrict:"A",scope:{config:"=select",ngDisabled:"="},require:"?ngModel",controller:"selectCtrl",templateUrl:"templates/select.html",link:function(e,t,n,i){i&&(e.$watch(function(){return i.$modelValue},function(t,n){var i=new RegExp("^"+t+"$","i"),a=e.config.items,r=a.filter(function(e){return i.test(e.value)})[0];r?e.config.selectedLabel=r.label:a.length&&(e.config.selectedLabel=a[0].label)}),e.$watch("config.selectedLabel",function(t,n){if(!e.ngDisabled){var a=e.config.items.filter(function(e){return e.label==t})[0];i.$setViewValue(a.value)}}))}}}function t(e){e.getItemByLabel=function(e,t){return e.filter(function(e){return e.label==t})[0]},e.getSelectedItem=function(){return e.getItemByLabel(e.config.items,e.config.selectedLabel)}}angular.module("ui.controls").directive("select",e),angular.module("ui.controls").controller("selectCtrl",t),e.$inject=[],t.$inject=["$scope"]}(),function(){"use strict";function e(e,t,i,a,r,o){return{restrict:"EA",replace:!0,link:function(e,t,s){function l(n){if(!!t&&t.find(n.target).length>0)return void i.off(".selectParameter");e.close()}function c(r){if(0!==r.which&&!r.ctrlKey&&!r.metaKey&&!r.altKey&&(r.keyCode===n.ESC&&e.close(),r.keyCode===n.DOWN_ARROW||r.keyCode===n.UP_ARROW||r.keyCode===n.ENTER||r.keyCode===n.TAB))return r.preventDefault(),a(function(){e&&t.find(".filter input").focus()}),i.off(".selectParameter"),!1}function d(n){n.preventDefault();var r=String.fromCharCode(n.which);return 0===n.which||n.ctrlKey||n.metaKey||n.altKey||(a(function(){e&&(t.find(".filter input").focus(),a(function(){document.execCommand("insertText",!1,r)}))}),i.off(".selectParameter")),!1}t.bind("click",function(e){e.preventDefault(),e.stopPropagation()}),e.close=function(){t&&(e.focus=!1,e.filterParam=angular.copy(""),r.close(t),t.removeClass("active")),i.unbind("mousedown",l),i.off(".selectParameter"),e.dropItemTable(),e.current=null,a(function(){o.enableAutoMarkup()})},e.activate=function(n,r,o,s){e.current=n,e.selectText=r,e.innerCreateNew=s,e.innerCreateNewStarted=!1,e.innerCreateNewModel="",t.addClass("active"),o&&(e.params=o),a(function(){e.initItemTableWidth()}),e.resetScroll(),i.on("mousedown",l),i.on("keydown.selectParameter",c),i.on("keypress.selectParameter",d),e.startInnerCreateNew=function(){e.innerCreateNewStarted=!0,a(function(){$(".inner-create-new input").focus()})}},t.on("$destroy",function(){i.off(".selectParameter")}),e.$on("$destroy",function(){i.off(".selectParameter")})},templateUrl:"templates/selectParameter.html",controller:"selectParameterCtrl",controllerAs:"selectParameter"}}function t(e,t,i,a,r,o,s,l,c){function d(e){return e?e.value||e.meta||e:""}function u(e){var t=e.alias?k:w;return d(e).length>t}function p(e){return!(!e||!e.alias)&&e.alias.length>C}function g(e,t){return!!(T&&T.length>t)&&T[t]}function m(){var e=$(".select-head").find("#selected-param"),t=e.width(),n=$(e.find("span")[0]).width(),i=$(e.find("span")[1]).width();I=t<n+i}function f(){return I}function h(t){var n=a.find(".select-params"),i=n.find(".list-item");if(i[0]){var r=i[0].offsetHeight,o=r*P.index,s=o+r,l=n.height(),c=n.scrollTop(),d=!0;o<c?(d=!1,n.animate({scrollTop:o},0,function(){e(function(){v(t,P.index)})})):s>c+l&&(d=!1,n.animate({scrollTop:s-l},0,function(){e(function(){v(t,P.index)})})),d&&e(function(){v(t,P.index)})}}function v(e,t){var n=$(".select-params").find(".list-item").find(".selector-item");$(n[e]).trigger("mouseleave"),$(n[t]).trigger("mouseenter")}var b=s.getCurrentAgent(),y=b&&b.id;t.currentAgentId=y;var w=c.getTextLength("selectorItem",!1),k=w/2,C=w-k,S=0,x=!1,E=a.find(".select-params"),A=parseInt(E.css("max-height"),10),T=null,I=null;t.limitScroll=30,t.focus=!1;var P=this,D=t.$new();t.params=t.params||[],P.index=-1,P.select=function(e){o.select(e)&&D.close()},P.toggle=function(e){return D.isOpen=arguments.length?!!e:!D.isOpen},P.isOpen=function(){return D.isOpen},P.keydown=function(e){switch(e.keyCode){case n.DOWN_ARROW:e.stopPropagation(),e.preventDefault();var i=P.index;P.index=P.index>=t.paramsFiltered.length-1?0:Math.min(P.index+1,t.paramsFiltered.length-1),h(i);break;case n.UP_ARROW:e.stopPropagation(),e.preventDefault(),i=P.index,P.index=P.index<=0?t.paramsFiltered.length-1:Math.max(0,P.index-1),h(i);break;case n.ENTER:if(e.stopPropagation(),e.preventDefault(),v(P.index,-1),a.find(".inner-create-new input").is(":focus"))D.finishInnerCreateNew();else{if(t.paramsFiltered[P.index]){var r=t.paramsFiltered[P.index];P.select(r.meta?r:{meta:r})}}break;case n.TAB:e.stopPropagation(),e.preventDefault(),i=P.index,P.index=P.index>=t.paramsFiltered.length-1?0:Math.min(P.index+1,t.paramsFiltered.length-1),h(i)}},t.finishInnerCreateNew=function(){if(_.isEmpty(t.innerCreateNewModel))return!1;P.select({meta:t.innerCreateNewModel})},P.focus=function(){t.focus=!0,r.off(".selectParameter")},t.goSref=function(e,n){var a={};n&&(a.agentId=n),t.close(),i.go(e,a)},t.createNewEntity=function(e){var n={entries:[{synonyms:[e],value:e}],isEnum:!1,name:""};l.get("markupEntity").put("newEntity",n),t.close(),i.go("auth.workPlace.agent.entity_new",{agentId:y})},t.resetScroll=function(){S=0,x=!1,t.limitScroll=30,E.scrollTop(0)},t.getItemParamLimit=function(e){return e.alias?k:w},t.getItemName=function(e,t){if(!e)return"";var n=e.value||e.meta||e,i=e.alias?k:w;return i-=e.alias&&t?3:0,u(e)?n.substring(0,i)+"...":n},t.getItemAlias=function(e){if(!e)return"";var t=C-3;return p(e)?e.alias.substring(0,t)+"...":e.alias},t.dropItemTable=function(){T=null,I=null},t.initItemTableWidth=function(){t.dropItemTable(),m();var e=$(".select-params").find(".list-item");T=[];for(var n=[],i=0;i<e.length;i++){var a=e[i],r=$($(a).find(".selector-item")).width(),o=$($(a).find("span")[0]).width(),s=$($(a).find("span")[1]).width();n[i]="maxWidth = "+r+", nameWidth = "+o+", aliasWidth = "+s,T[i]=r<o+s}},t.getItemsList=function(){return T},t.collapseItem=function(e,t){return!!e&&((void 0===t?f():g(e,t))||u(e)||p(e))},t.getItemTooltip=function(e){return d(e)+(e.alias?":"+e.alias:"")},t.$watch("filterParam",function(){t.resetScroll(),e(function(){t.initItemTableWidth()})}),E.scroll(function(){if(!x){var n=E[0].scrollHeight;n-E.scrollTop()<2*A&&(n===S?x=!0:(t.limitScroll+=30,S=n,e(function(){t.initItemTableWidth()})))}})}var n={DOWN_ARROW:40,UP_ARROW:38,ENTER:13,TAB:9,ESC:27};angular.module("ui.controls").directive("selectParameter",e).controller("selectParameterCtrl",t),e.$inject=["$rootScope","$location","$document","$timeout","selectParameter","IntentSharedService"],t.$inject=["$timeout","$scope","$state","$element","$document","selectParameter","CurrentAgentService","CacheService","limitsManager"]}(),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,t,n){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(i,a,r,o){function s(e,t){return t&&"function"==typeof t?function(){e.apply(this,arguments),t.apply(this,arguments)}:e}function l(e){var t=e.data("ui-sortable");return t&&"object"==typeof t&&"ui-sortable"===t.widgetFullName?t:null}function c(e,t){var n=e.sortable("option","helper");return"clone"===n||"function"==typeof n&&t.item.sortable.isCustomHelperUsed()}function d(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}function u(e,t){for(var n=null,i=0;i<e.length;i++){var a=e[i];if(a.element[0]===t[0]){n=a.scope;break}}return n}function p(e,t){t.item.sortable._destroy()}var g,m={},f={"ui-floating":void 0},h={receive:null,remove:null,start:null,stop:null,update:null},v={helper:null};if(angular.extend(m,f,e,i.uiSortable),!angular.element.fn||!angular.element.fn.jquery)return void n.error("ui.sortable: jQuery should be included before AngularJS!");o?(i.$watch("ngModel.length",function(){t(function(){l(a)&&a.sortable("refresh")},0,!1)}),h.start=function(e,t){if("auto"===m["ui-floating"]){var n=t.item.siblings();l(angular.element(e.target)).floating=d(n)}t.item.sortable={model:o.$modelValue[t.item.index()],index:t.item.index(),source:t.item.parent(),sourceModel:o.$modelValue,cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed,_destroy:function(){angular.forEach(t.item.sortable,function(e,n){t.item.sortable[n]=void 0})}}},h.activate=function(e,t){g=a.contents();var n=a.sortable("option","placeholder");if(n&&n.element&&"function"==typeof n.element){var r=n.element();r=angular.element(r);var o=a.find('[class="'+r.attr("class")+'"]:not([ng-repeat], [data-ng-repeat])');g=g.not(o)}var s=t.item.sortable._connectedSortables||[];s.push({element:a,scope:i}),t.item.sortable._connectedSortables=s},h.update=function(e,t){if(!t.item.sortable.received){t.item.sortable.dropindex=t.item.index();var n=t.item.parent();t.item.sortable.droptarget=n;var r=u(t.item.sortable._connectedSortables,n);t.item.sortable.droptargetModel=r.ngModel,a.sortable("cancel")}c(a,t)&&!t.item.sortable.received&&"parent"===a.sortable("option","appendTo")&&(g=g.not(g.last())),g.appendTo(a),t.item.sortable.received&&(g=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&i.$apply(function(){o.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},h.stop=function(e,t){!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()?i.$apply(function(){o.$modelValue.splice(t.item.sortable.dropindex,0,o.$modelValue.splice(t.item.sortable.index,1)[0])}):"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()||c(a,t)||g.appendTo(a),g=null},h.receive=function(e,t){t.item.sortable.received=!0},h.remove=function(e,t){"dropindex"in t.item.sortable||(a.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||i.$apply(function(){t.item.sortable.moved=o.$modelValue.splice(t.item.sortable.index,1)[0]})},v.helper=function(e){return e&&"function"==typeof e?function(t,n){var i=e.apply(this,arguments);return n.sortable._isCustomHelperUsed=n!==i,i}:e},i.$watch("uiSortable",function(e){var t=l(a);t&&angular.forEach(e,function(e,n){if(n in f)return"ui-floating"!==n||!1!==e&&!0!==e||(t.floating=e),void(m[n]=e);h[n]?("stop"===n&&(e=s(e,function(){i.$apply()}),e=s(e,p)),e=s(h[n],e)):v[n]&&(e=v[n](e)),m[n]=e,a.sortable("option",n,e)})},!0),angular.forEach(h,function(e,t){m[t]=s(e,m[t]),"stop"===t&&(m[t]=s(m[t],p))})):n.info("ui.sortable: ngModel not provided!",a),a.sortable(m)}}}]),function(){"use strict";function e(){return{restrict:"A",scope:{conf:"=stiAutocomplete"},require:"ngModel",controller:t,link:function(e,t,n,i){e.$watch("conf",function(e){t.autocomplete(e)}),t.on("autocompleteselect",function(t,n){i.$setViewValue(n.item.value),e.conf.onSelect&&e.conf.onSelect(t)}),t.keydown(function(e){40!=e.which&&38!=e.which||t[0].value.length||t.autocomplete("search")}),e.$watch(function(){return i.$viewValue},function(e,n){e||t.autocomplete("close")})}}}function t(e,t,n){this.setSource=function(t){angular.extend(e.conf,{source:t})},this.getSource=function(){return e.conf.source}}angular.module("ui.controls").directive("stiAutocomplete",e),t.$inject=["$scope","$element","$attrs"]}(),function(){"use strict";function e(e){return{restrict:"EA",replace:!0,require:"?ngModel",transclude:!0,template:'<div class="form-control" ng-contenteditable ng-transclude></div>',link:function(e,t,n){}}}angular.module("ui.controls").directive("textareaEditor",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t){return{restrict:"EA",scope:{ngModel:"=",leaveEnter:"=?",conf:"=textcomplete"},link:function(n,i,a){var r=i;new e(r,n.conf);n.leaveEnter||r.on("keydown",function(e){n.$apply(function(){13==e.which&&e.preventDefault()})}),t.$on("onSelect",function(e,t,i){i===r&&(n.ngModel=t)})}}}angular.module("apiApp").directive("textcomplete",e),e.$inject=["Textcomplete","$rootScope"]}(),function(){"use strict";function e(e){return{restrict:"A",require:"?ngModel",compile:function(t,n,i){var a=t.text();return function(t,n,i,r){t.label=a,t.x="X",t.isToggled=!1,t.isHovered=!1,r&&(t.$watch(function(){return r.$modelValue},function(e,n){t.isToggled=e}),t.onClick=function(){t.isToggled=!t.isToggled,r.$setViewValue(t.isToggled)},t.onMouseenter=function(){t.isHovered=!0},t.onMouseleave=function(){t.isHovered=!1},t.getLabel=function(){return(t.isHovered?!t.isToggled:t.isToggled)?t.x:t.label},n.attr("ng-click","onClick()"),n.attr("ng-mouseenter","onMouseenter()"),n.attr("ng-mouseleave","onMouseleave()"),n.text("{{getLabel()}}")),n.removeAttr("toggle-label"),n.removeAttr("data-toggle-label"),e(n)(t)}}}}angular.module("ui.controls").directive("toggleLabel",e),e.$inject=["$compile"]}(),function(e){"use strict";function t(t,n,i,a){return{restrict:"A",require:"ngModel",priority:0,compile:function(r,o){var s=a(o.tokenfield,null,!0),l=a(o.focusWhen,null,!0),c=a(o.disabled,null,!0),d=a(o.ngFocus,null,!0),u=a(o.onEnter,null,!0);return function(a,r,o,p){function g(e){return a.customTokenFieldFormatters.reduceRight(function(e,t,n,i){return t(e)},e)}var m=s(a),f=m&&m.limit||0,h=m&&m.autolimit||5,v=m&&m.minLength||1,b=m&&m.maxLength||0,y=m&&m.autocompleteDsFnFactory||t.limitArrayDsFactory;a.customTokenFieldFormatters=[],p.$parsers.unshift(function(t){if(!t)return[];if(e.isString(t))t=t.split(";");else if(!e.isArray(t))throw'Can not parse viewValue of "tokenfield". Only String or Array available.';return t=t.map(function(e){return e.trim()}).filter(function(e){return!!e})}),a.customTokenFieldFormatters.unshift(function(e){return r.tokenfield("setTokens",e,!1,!1),e}),a.$watch(function(){return p.$modelValue},function(e,t){e!=t&&r.tokenfield("setTokens",g(e),!1,!1)},!0),a.$watch(function(){return c(a)},function(e,t){e!=t&&r.tokenfield(e?"disable":"enable")}),r.on("tokenfield:createdtoken",function(e){var t=$(e.relatedTarget),i=n.getBorderColorClass(t.find("span").text());t.addClass(i)});var w;if(i(function(){var e=r.parents(".tokenfield").find(".token-input");r.on("tokenfield:createdtoken",function(){e.autocomplete(),e.autocomplete("close"),w=""})},0),m){var k=m.autotokens||[];if(e.isArray(k));else if(e.isString(k))k=k.split(",");else{if(!e.isObject(k))throw'Not appropriate autocomplete source for "tokenfield"';var C=[];e.forEach(k,function(e,t){e&&C.push(t)}),k=C}var S=k.map(function(t){return e.isString(t)?t.trim():t}).filter(function(e){return!!e});r.tokenfield("destroy"),r.tokenfield({delimiter:";",limit:f,maxLength:b,autocomplete:{source:y(S,h),minLength:v,delay:0,open:function(e,t){var n=r.parents(".tokenfield").find(".token-input");w=n.val(),$("ul.ui-autocomplete li.ui-menu-item").hover(function(e){var t=$(e.currentTarget).find("a").text();n.val(t)},function(e){n.val(w)})}},showAutocompleteOnFocus:!0,createTokensOnBlur:!0}),i(function(){r.tokenfield("setTokens",g(p.$modelValue||[]),!1,!1)})}else r.tokenfield("destroy"),r.tokenfield({delimiter:";",showAutocompleteOnFocus:!0,tokens:g(p.$modelValue||[]),createTokensOnBlur:!0});i(function(){var e=r.parents(".tokenfield").find(".token-input");a.$watch(function(){return l(a)},function(t){!0===t&&i(function(){e.focus()},0)}),e.focus(function(){i(function(){d(a)},0)}),e.on("keypress",function(e){13===e.which&&(e.preventDefault(),a.$apply(function(){u(a,{$event:e})}))})},0)}}}}angular.module("ui.tokenfield").directive("tokenfield",t),t.$inject="LimitedArrayDs, ColorHelperService, $timeout, $parse".split(", ")}(angular),function(e){"use strict";function t(t,i,a,r){return{restrict:"A",require:"ngModel",priority:1,compile:function(r,o,s){var l=t(o.tokenfieldMenu,null,!0)||{},c=t(o.tokenfield,null,!0);return function(t,r,o,s){function d(e){var t=-1,n=e[0];r.parent().find("div.token").each(function(e,i){i==n&&(t=e)});var i=s.$modelValue;return!i||t>=i.length?-1:t}function u(e){var t=d(e);if(t<0)return h;var n=s.$modelValue[t].lifespan;return 0==n||n?n:h}function p(e,t){if(void 0!==t){var n=d(e);n<0||(s.$modelValue[n].lifespan=t)}}function g(e){var t=d(e);if(!(t<0)){var n=angular.copy(s.$modelValue);n.splice(t,1),s.$setViewValue(m(n))}}function m(e){return t.customTokenFieldFormatters.reduceRight(function(e,t,n,i){return t(e)},e)}if(l(t)){var f=c(t);if(f){var h=f.defaultLifespan;h=0==h||h?h:n,t.customTokenFieldFormatters.unshift(function(t){return e.isArray(t)&&(t=t.map(function(t){var n;return e.isString(t)&&(n=t),t&&t.name&&(n=t.name),n})),t&&null!=t.lifespan&&(t=t.name),t}),s.$parsers.push(function(t){if(!t)return[];if(e.isString(t))t=t.split(";");else if(!e.isArray(t))throw'Can not parse viewValue of "tokenfield". Only String or Array available.';return t=t.map(function(e){return e.trim()}).filter(function(e){return!!e}).map(function(e){var t;return s.$modelValue.some(function(i){var a=i.name;if(e==a){var r=i.lifespan;return t={name:a,lifespan:0==r||r?r:n},!0}return!1})&&t||{name:e,lifespan:n}})}),r.on("tokenfield:createdtoken",function(e){function n(e){h.isHide=!h.isHide}function o(e){g(m)}function s(e){e.stopPropagation()}function l(){h.isHide=!0,a(function(){r.parents(".tokenfield").find(".token-input").focus()},0)}function c(e){13!==e.which&&9!==e.which||((void 0===h.lifespan||h.lifespan<0)&&(h.lifespan=0),l(),e.preventDefault())}function d(e){(void 0===h.lifespan||h.lifespan<0)&&(h.lifespan=0),l()}var m=$(e.relatedTarget),f=u(m);m.find(".close").remove();var h=t.$new();h.lifespan=f,h.isHide=!0,h.onBlur=function(){h.isHide=!0},h.$watch("lifespan",function(e,t){var n=m.find(".token-label");0===e?n.addClass("line-through"):n.removeClass("line-through")}),h.$watch("isHide",function(e,t){e&&!t?a(function(){p(m,h.lifespan)},0):!e&&t&&a(function(){h.lifespan=u(m)},0)}),h.onMenuBtnClick=n,h.onDeleteBtnClick=o,h.onUlClick=s,h.onInputKeydown=c,h.onInputBlur=d
;var v=i('<span click-out-2="onBlur($event)">  <a class="close" tabindex="-1" ng-click="onMenuBtnClick($event)">    <div class="dots-vertical-container"><div class="dots-vertical"></div></div>  </a>  <ul class="dropdown-menu token-menu" ng-hide="isHide" ng-click="onUlClick($event)">    <li class="token-menu-label"><a>Lifespan <input type="number" min="0" ng-model="lifespan" ng-keydown="onInputKeydown($event)" ng-blur="onInputBlur()" class="pull-right lifespan"></a></li>    <li class="divider"></li>    <li><a ng-click="onDeleteBtnClick($event)"><span class="flaticon stroke trash"></span> Delete</a></li>  </ul></span>')(h);m.append(v),v.on("dblclick",function(e){e.stopPropagation()})}),t.$watch(function(){return s.$modelValue},function(e,t){r.tokenfield("setTokens",m(s.$modelValue),!1,!1)})}}}}}}angular.module("ui.controls").directive("tokenfieldMenu",t);var n=5;t.$inject="$parse, $compile, $timeout, UtilsService".split(", ")}(angular),function(){"use strict";function e(){return{require:["ngModel","^form"],link:function(e,t,n,i){function a(e,t){var n,i,a={};return e.some(function(e){return!!(n=e[t])&&(n=n.toLowerCase(),!(void 0===(i=a[n])||i<1)||(a[n]=1,!1))})}var r,o=i[0],s=i[1];if(!n.unique)throw'Error: void "unique" attribute.';if(r=n.unique.split(" in "),2!=r.length)throw'Error: wrong format of "unique"';e.$watch(function(){return o.$viewValue},function(t,n){var i,o,l=e.$eval(r[1]);if(!angular.isArray(l))throw"Error: array expected";o=r[0].split("."),1==o.length?i=o[0]:o.length>1&&(i=o[1]),s.$setValidity("unique",!a(l,i))})}}}angular.module("ui.controls").directive("unique",e)}(),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",link:function(e,n,i,a){function r(e){return new RegExp(s).test(e)?a.$setValidity(o,!0):a.$setValidity(o,!1),e}var o=i.wordValidation,s=i.wordValidationRegexp||t;o&&(a.$formatters.push(r),a.$parsers.unshift(r))}}}angular.module("ui.controls").directive("wordValidation",e);var t="^[A-Za-z0-9_\\-]{0,}$"}(),function(){"use strict";function e(){return{restrict:"A",scope:{cfg:"=youtube"},link:function(e,t,n){t.YouTubeModal(angular.extend({autoplay:1,width:640,height:480},e.cfg))}}}angular.module("ui.controls").directive("youtube",e)}(),function(){"use strict";function e(e){var t=["$scope",function(t){function n(n){e.cancel(t.filterTimeout),t.$parent.entity&&t.$parent.entity.entries&&(n&&n.length>a?t.filterTimeout=e(function(){t.isFiltering=!0,n=n.toLowerCase(),t.$parent.filteredEntries=t.$parent.entity.entries.filter(function(e){return e.value&&e.value.toLowerCase().indexOf(n)>-1}),t.isFiltering=!1},i):t.$parent.filteredEntries.length!==t.$parent.entity.entries.length&&(t.$parent.filteredEntries=t.$parent.entity.entries))}var i=500,a=0;t.isFiltering=!1,t.filterTimeout=!1,t.$watch("entriesFilter",function(e){n(e)})}];return{restrict:"EA",link:function(e,t,n){},controller:t,templateUrl:"partials/entity/searchForm.html"}}angular.module("apiApp").directive("entitySearchForm",e),e.$inject="$timeout".split(", ")}(),function(){"use strict";function e(e,t,n,i){var a=["$scope",function(t){var a=new n.NameToAliasMap;t.templateEditorCommonConfig={entities:t.autoCompletePromise.entities,templatePainter:i.painterFactory(),nameToAliasMap:a,mode:"entityEntryTableMode"},t.focusId=-1,t.handleKeyDown=function(e,n,i){if(!i.isDefaultPrevented()){var a=void 0;if(38===i.keyCode&&(a=e-1),13===i.keyCode&&(i.preventDefault(),i.stopPropagation()),[13,40].indexOf(i.keyCode)>-1){if(!n)return;a=e+1}if(t.applyLimit(),void 0===a)return!1;a<0&t.paging.currentPage>0&&(t.paging.currentPage=t.paging.currentPage-1,a=t.paging.pageSize-1),t.paging.pageSize*t.paging.currentPage+a>=t.filteredEntries.length&&t.addNewEntry(),a>=t.paging.pageSize&&t.paging.currentPage<t.paging.numberOfPages()&&(t.paging.currentPage=t.paging.currentPage+1,a=0),void 0!==a&&(t.focusId=a)}},t.$watch("paging.currentPage",function(n,i){n!==i&&(t.$broadcast("destroyOverlays"),e(function(){t.$broadcast("drawOverlays")}))}),e(function(){t.$broadcast("elastic:adjust")},100)}];return{restrict:"EA",link:function(e,t,n){},controller:a,templateUrl:"partials/entity/compositeEntryTable.html"}}angular.module("apiApp").directive("stiCompositeEntityEntryTable",e),e.$inject="$timeout, EntitySharedService, UtilsService, ColorHelperService".split(", ")}(),function(){"use strict";function e(e){var t="synonyms",n=["$scope","$element",function(n,i){function a(e){return n.paging.pageSize*n.paging.currentPage+e}n.editedEntry=!1,n.editEntry=function(e,t){if(void 0!==t&&13===t.keyCode)return!1;n.editedEntry=e},n.entryInputKeyDown=function(i,a,o){if(o.isDefaultPrevented())return!1;var s=void 0;(13!==o.keyCode&&40!==o.keyCode||(s=r(i,a))!==i)&&(38===o.keyCode&&(s=i-1),a==t&&9==o.keyCode&&(i<n.filteredEntries.length-1&&(s=r(i+1,a)),o.preventDefault()),[38,40,13,9].indexOf(o.keyCode)>-1&&void 0!=s&&(s>=n.paging.pageSize?(n.paging.currentPage=n.paging.currentPage+1,s=0):s<0&&n.paging.currentPage>0?(s=n.paging.pageSize-1,n.paging.currentPage=n.paging.currentPage-1):s<0&&(s=0)),void 0!=s&&e(function(){n.editEntry(s)},0),n.$parent.applyLimit())};var r=function(e,t){if("value"!==t){var i=n.filteredEntries,r=i[e];return n.entryIsFilled(r)&&a(e)>=i.length-1?(n.addNewEntry(),e+1):e}n.handleValueBlur(e),$(document).find("input.token-input").focus()};n.handleValueBlur=function(e){!n.filteredEntries[a(e)].synonyms.length&&n.filteredEntries[a(e)].value&&n.filteredEntries[a(e)].synonyms.push(n.filteredEntries[a(e)].value)},n.addNewEntry=function(){n.$parent.addNewEntry();var e=n.$parent.filterOutEmptyEntries(n.filteredEntries);n.editEntry(e.length)},n.entryIsFilled=function(e){return e.value||e.synonyms.length},n.$watch("paging.currentPage",function(e,t){n.editEntry(!1)})}];return{restrict:"EA",link:function(n,i,a){function r(){i.find("input.entry-value-input").focus(),i.find("input.token-input").keydown(function(e){n.$apply(function(){n.entryInputKeyDown(n.editedEntry,t,e)})})}n.$watch("editedEntry",function(t){e(r,0)})},controller:n,templateUrl:"partials/entity/entryTable.html"}}angular.module("apiApp").directive("stiEntityEntryTable",e),e.$inject="$timeout".split(", ")}(),function(){"use strict";function e(e,t,n){var i=["$scope",function(e){e.init=function(){if(e.newPrompt=null,!Array.isArray(e.collection)){var t=e.collection;e.collection=[],t&&e.collection.push(t)}},e.addPrompt=function(){e.collection.push(e.newPrompt),e.newPrompt=null},e.addBlankParamAfter=function(t){e.collection.splice(t+1,0,"")},e.removePrompt=function(t){e.collection.splice(t,1)},e.blankInputVisible=function(){var t=e.collection;return!t.length||t[t.length-1]&&(!e.maxItemsCount||t.length<e.maxItemsCount)},e.cleanCollection=function(){var t=e.collection,n=t.length-1;t[n]||t.splice(n,1)},e.$on("$destroy",e.cleanCollection)}];return{restrict:"EA",scope:{collection:"=",collectionItemName:"=",autofocusOnNewInput:"=?",textcompleteOptions:"=?",add:"&",ngDisabled:"=?",maxItemsCount:"=?",maxTextLength:"=?"},link:function(i,a,r){function o(e,t,n){if(void 0===n&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=n;else if(e.setSelectionRange)e.setSelectionRange(t,n);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i.select()}}function s(){return $(a).find("textarea")}function l(){return $(a).find(".prompt-table").last()}function c(e,n,i){var a=s();switch(e.keyCode){case 38:0===e.currentTarget.selectionStart&&(a.eq(i-1).focus(),a[i-1]&&t(function(){o(a[i-1],a[i-1].textLength)}));break;case 40:e.currentTarget.textLength===e.currentTarget.selectionStart&&(a.eq(i+1).focus(),t(function(){o(a[i+1],0)}))}}i.init(),function(){s().last().on("focus",function(){t(function(){i.addPrompt(),l().addClass("ng-hide"),t(function(){s().eq(-2).focus(),$(a).find("textarea:not(:last)").on("blur",i.cleanCollection)})})})}(),i.keyDown=function(t,n,r){if(t.originalEvent.defaultPrevented)return!1;var o=void 0!==i.collection[r+1]&&i.collection[r+1];if(!(8!=t.keyCode&&46!=t.keyCode||n&&0!==n.length)){if(i.collection.splice(r,1),8==t.keyCode)$(a).find("textarea").eq(r-1).focus();else if(46==t.keyCode){var l=$(a).find("textarea").eq(r);e.setSelectionRange(l[0],0,0)}t.preventDefault()}t.shiftKey||(13==t.keyCode&&n?(r<i.collection.length-1&&o?(i.addBlankParamAfter(r),$(a).find("textarea").eq(r+1).focus()):r<i.collection.length-1?s().eq(r+1).focus():$(a).find("textarea").last().focus(),t.preventDefault()):13==t.keyCode&&t.preventDefault()),c(t,n,r)},i.autofocusOnNewInput&&i.$watch("collection",function(){t(function(){s().last().focus(),i.newPrompt=null},0)}),t(function(){angular.element(n).trigger("resize")})},controller:i,templateUrl:"partials/intent/intentParamModalPromptsEditor.html"}}angular.module("apiApp").directive("stiIntentParamPromptsEditor",e),e.$inject="UtilsService, $timeout, $window".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c){return{restrict:"EA",controller:["$scope","$mdDialog",function(d,u){var p=o.painterFactory();d.getBgColor=function(e){return p.getColorByAlias(e.name)},d.agentLang=n.getLanguage(),d.parameterDataTypeAutocompleteCfg={select:function(e,t){},source:function(e,t){var n=_.trim(e.term,"@"),i=r.containsInStringOrArrayFn(n),a=_.map(d.commonTemplatesConfig.entities,function(e){return angular.isObject(e)?i(e.value)||i(e.synonyms)?e.value:null:i(e)?e:null});t(_.compact(a))},delay:0,minLength:0},d.showModalPrompts=function(e,t){d.setCurrentEditedParam(e);var n={templateUrl:"partials/prompts-modal.html",scope:d.$new(),controller:"ModalPromptsController",locals:{mode:t},focusOnOpen:!1};u.show(n)},d.setCurrentEditedParam=function(e){e&&void 0===e.prompts&&(e.prompts=[]),d.currentEditedParam=e},d.sortableConfig={handle:".glyphicon-resize-vertical",items:"tr:not(.last-empty-param)"},d.isLastEmptyParam=function(e,t){return!e||t.name||t.dataType||t.value?"":"last-empty-param"},d.getModalLabel=function(e){if(e.required){if(void 0!==e.prompts&&(e.prompts.length>0&&null!==e.prompts[0]||e.prompts.length>1)){var t=e.prompts[0]+" ["+e.prompts.length+"]",n=c.getTextLength("promptsItem",!1);return t.length>n?t.substring(0,n)+"...":t}return"Define prompts..."}return!1},d.anyParameterRequired=function(){return d.intent.responses[0].parameters.map(function(e){return e.required}).indexOf(!0)>-1},d.removeOneParam=function(n){if(d.intent.responses[0].parameters[n].auto){var i={message:"Caution: this parameter is bound to parameters in the User says section. If you remove it here, it will be removed from all User says templates/examples.",title:"Delete parameter",okLabel:"Delete",cancelLabel:"Cancel"};t.confirmation(i).then(function(){var t=d.intent.responses[0].parameters[n].dataType,i=d.intent.responses[0].parameters[n].name;l.broadcastReplaceParameter(i,!1,t,a.IGNORE),e(function(){d.validateParams()})})}else d.removeOne(d.intent.responses[0].parameters,n),d.validateParams()},d.checkLatinNumeric=function(e){e&&(e.name&&(e.name=r.replaceNotLatinAlphanumeric(e.name)),e.dataType&&(e.dataType=r.replaceNotNAME(e.dataType)))},d.startSelectParameter=function(t,n){if(t.dataType===a.INLINE||t.dataType===a.IGNORE)return!1;var r=t.dataType,o=t.name,c=n.currentTarget||n.srcElement,u=$(c).offset(),p=u.left+$(c).width(),g=u.top+$(c).height(),m=i.getPosition(p,g,n,410);i.open($(c),d.commonTemplatesConfig.entities,t.dataType,null,{left:m.left,top:m.top}).result.then(function(n){if(!n.alias){var i=d.intent.responses[0].parameters.map(function(e){return e.name}).filter(function(e){return e!==t.name});n.alias=s.replaceIfNeedToChangeAliasWithMeta(t.dataType,n.meta,t.name,t.name,i)}t.dataType=n.meta,t.name=n.alias,t.value="$"+n.alias,l.broadcastReplaceParameter(o,n.alias,r,t.dataType),e(function(){d.validateParams()})},function(e){})},d.getValueForAutoParam=function(e){return e.valueModifier?e.value+"."+e.valueModifier:e.value},d.changeAutoParamValueModifier=function(e,t){e.valueModifier=t||null},d.onChangeParamName=function(e,t,n){if(d.checkLatinNumeric(e),e.auto&&e.name!==t){l.broadcastReplaceParameter(t,e.name,e.dataType,e.dataType),e.value="$"+e.name;var i=[];d.intent.responses[0].parameters.forEach(function(t,n){t!==e&&t.name===e.name&&t.dataType===e.dataType&&t.auto&&e.auto&&i.push(n)});var a=0;i.forEach(function(e){d.intent.responses[0].parameters.splice(e-a,1),a++});var r=_.find(d.intent.responses[0].parameters,function(e){return e.name===t});if(angular.isUndefined(r)&&p.removeColorByAlias(t),i.length){var o=$(".intent-param-name");Math.min.apply(null,i)<n&&o.eq(n-i.length).focus()}}}}],link:function(e,t,n){$(".header-tooltip").tooltip()},templateUrl:"partials/intent/intentParamTable.html"}}function t(e,t,n){e.mode=n||"defaultValue",e.hide=function(){e.setCurrentEditedParam({}),t.hide()}}angular.module("apiApp").directive("stiIntentParamTable",e).controller("ModalPromptsController",t),e.$inject="$timeout, Confirm, CurrentAgentService, selectParameter, METAS, UtilsService, ColorHelperService, AnnotateHelperService, intentParamsAutosyncService, limitsManager".split(", "),t.$inject=["$scope","$mdDialog","mode"]}(),function(){"use strict";function e(e,t,n,i,a,r,o){return{restrict:"EA",link:function(s,l,c){function d(e,t){if(s.vm&&s.vm.userSays&&void 0!==s.vm.userSays.isTemplate&&!1===s.vm.userSays.isTemplate)return void t([]);if(g&&g.length>0){var n=i.trimFirst(e,"@"),a=i.containsInStringOrArrayFn(n),r=$.map(g,function(e){return angular.isObject(e)?a(e.value)||a(e.synonyms)?e.value:null:a(e)?e:null});e.length>1&&r.unshift(e),t(r)}else t([])}function u(e,t){var i,a;return i=n.getAlias(e),i&&(a=n.parseMetaFromTemplate(t),i=n.selectCandidateName(i,a)),i}if(s&&s.templateEditorCommonConfig&&s.templateEditorCommonConfig.entities){var p,g=s.templateEditorCommonConfig.entities,m=s.templateEditorCommonConfig.onTextcompleteCallback||angular.noop,f=s.templateEditorCommonConfig.mode,h=l,v=new e(h,[{parseFn:function(e){var t,n=e.length,i=a.collectMeta(e);if(i.length){var r=i[i.length-1];r.stop===n&&"alias"!=r.type&&(t=r,t.text=e.substring(t.start,t.stop))}return t},search:d,index:2,replace:function(e){var t,n;t=u(e,p),n=t?":":"";var i=e+n;return r(function(){m(i)},0),i},maxCount:50},{prefix:void 0,parseFn:function(e){var t,n=e.length,i=a.collectMeta(e);if(i.length){var r=i[i.length-1];r.stop===n&&"alias"===r.type&&(t=r,t.text=e.substring(t.start,t.stop))}return t},search:function(e,t){if(s.vm&&s.vm.userSays&&void 0!==s.vm.userSays.isTemplate&&!1===s.vm.userSays.isTemplate)return void t([]);if(":"===e[e.length-1]){var i=e.slice(0,-1),r=u(i,p);if(!r)return;r&&(e+=r),s.templateEditorCommonConfig.nameToAliasMap.pushToMap(i,r)}var o=a.collectMeta(e);if(o.length>0){var l=o[o.length-1],c=n.metaOfNode(l);this.prefix=c+":";var d=n.aliasOfNode(l);0===d.indexOf("<")&&(d="");var g=s.templateEditorCommonConfig.nameToAliasMap.map,m=g[c]||[];d&&(m=m.filter(function(e){return e.toLowerCase().indexOf(d.toLowerCase())>=0}),m=m.filter(function(e){return e!==d}),m.unshift(d)),t(m)}else this.prefix=e,t([])},index:2,replace:function(e){var t=this.prefix+e+" ";return r(function(){m(t)},0),t},maxCount:50}]);h.keyup(function(e){8===e.which&&v.listView.deactivate()}),"entityEntryTableMode"!==f?(h.keydown(function(e){h.trigger("change"),13===e.which&&v.listView.shown&&(e.preventDefault(),e.stopPropagation())}),h.change(function(e){p=o.glueClean(s.vm.userSays)})):h.change(function(e){p=s.entry.value}),t.$on("onSelect",function(e,t,n){if(e.preventDefault(),n===h){if("entityEntryTableMode"===f)return s.entry.value=t,void s.templateEditorCommonConfig.nameToAliasMap.updateFromTemplate(t);r(function(){s.templateEditorCommonConfig.nameToAliasMap.updateFromTemplate(s.vm.userSays)})}})}}}}angular.module("apiApp").directive("templateEditorTextComplete",e),e.$inject="Textcomplete, $rootScope, MetaAliasService, UtilsService, ParserService, $timeout, AnnotateHelperService".split(", ")}(),function(){"use strict";function e(){function e(e,t){function n(e){function t(e,s){if(3==e.nodeType){if(r||e!=s.startContainer||(i=n+s.startOffset,r=!0),r&&e==s.endContainer)throw a=n+s.endOffset,o;n+=e.length}else for(var l=0,c=e.childNodes.length;l<c;++l)t(e.childNodes[l],s)}var n=0,i=0,a=0,r=!1,o={},s=rangy.getSelection();if(s.rangeCount)try{t(e,s.getRangeAt(0))}catch(e){if(e!=o)throw e}return{start:i,end:a}}function i(e,t){function n(e){if(3==e.nodeType){var s=i+e.length;if(!r&&t.start>=i&&t.start<=s&&(a.setStart(e,t.start-i),r=!0),r&&t.end>=i&&t.end<=s)throw a.setEnd(e,t.end-i),o;i=s}else for(var l=0,c=e.childNodes.length;l<c;++l)n(e.childNodes[l])}var i=0,a=rangy.createRange(),r=!1,o={};a.collapseToPoint(e,0);try{n(e)}catch(e){if(e!=o)throw e;rangy.getSelection().setSingleRange(a)}}var a=e[0],r=null;this.save=function(){return r=t.focused?n(a):void 0},this.restore=function(){r&&i(a,r)},this.get=function(){return n(a)}}return{getNewCursorSaver:function(t,n){return new e(t,n)}}}angular.module("api.other").factory("CursorSaverGeneratorService",e)}(),function(){"use strict";function e(e,n){function i(e){return _.result(_.find(l.priorityConfig.items,{value:e}),"label")}function a(){o=!0}function r(){o=!1}var o=!1,s={PRIORITY_STEP:25e4},l={priorityConfig:{items:[{value:0,label:"Ignore"},{value:1*s.PRIORITY_STEP,label:"Low"},{value:2*s.PRIORITY_STEP,label:"Normal"},{value:3*s.PRIORITY_STEP,label:"High"},{value:4*s.PRIORITY_STEP,label:"Highest"}]}},c=!1,d=new t;return{PRIORITY_STEP:s.PRIORITY_STEP,getPriorityConfig:function(){return l.priorityConfig},setInitialized:function(){return c=!0,e.$broadcast("IntentSharedServiceInitialized"),this},isInitialized:function(){return c},getPriorityLabel:i,getTemplateEditorSharedNodeTree:function(){return d()},enableAutoMarkup:r,disableAutoMarkup:a,autoMarkupDisabled:function(){return o}}}angular.module("api.intents").factory("IntentSharedService",e),e.$inject=["$rootScope","urls"];var t=function(){var e=this,t=[];e.putNode=function(e){t.push(e)},e.getNodesList=function(){return t}}}(),function(){"use strict";function e(){function e(e,t){return{}}function t(e,t){try{return"PAGE_SHOWN"===e&&t&&t.name?ga("send","pageview",t.name):ga("send","event","GENERIC",e)}catch(e){return{}}}function n(){return{}}function i(){return{}}return{identify:e,track:t,getTraits:n,reset:i}}angular.module("api.other").factory("AnalyticsService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n){function i(e){c&&c.actions&&(c.actions.push(e),c.actions=_.uniq(c.actions))}function a(e){c&&c.contexts&&(c.contexts=_.uniq(c.contexts.concat(e)))}function r(e){c&&c.entities&&c.entities.push(e)}function o(e){c&&c.entities&&_.pull(c.entities,e)}function s(){return c?t(function(e){e(c)}):e.get(n.apiUrls.autocomplete).then(function(e){return c=e.data},function(e){return console.log("AutocompleteData.listAutocomplete() -> error",e),{}})}function l(){c=null}var c=null;return{pushAction:i,pushContexts:a,pushEntity:r,pullEntity:o,listAutocomplete:s,invalidateAutocomplete:l}}angular.module("api.other").factory("AutocompleteData",e),e.$inject=["$http","$q","urls"]}(),function(e){"use strict";function t(t){var n={dropdown:[{key:"1",label:"Profile 1",href:"",action:function(){}},{key:"2",label:"Profile 2",href:"",action:function(){}}],selectedKey:"",showAgentName:!1,dropdownUpdater:function(){return null},isDropdownHide:!1};return{setBreadcrumbs:function(t){e.extend(n,t)},setBreadcrumbsField:function(e,i){t.setProperty(n,e,i)},getBreadcrumbs:function(){return n},updateDropdown:function(){return n.dropdownUpdater()}}}angular.module("ui.breadcrumbs").factory("BreadcrumbsService",t),t.$inject=["UtilsService"]}(angular),function(){"use strict";function e(e){function t(t){return e.get(t)||e(t)}return{get:t}}angular.module("api.other").factory("CacheService",e),e.$inject=["$cacheFactory"]}(),function(){"use strict";function e(e){function t(t){var n=e.confirm({title:t.title||"Confirm operation",content:t.message,ok:t.okLabel,cancel:t.cancelLabel,templateUrl:"partials/confirmation.html",controller:"ConfirmationController",locals:{data:t},focusOnOpen:!1});return e.show(n)}return{confirmation:t}}function t(e,t,n){e.focusOnInput=!0,e.data=n,e.ok=function(){e.focusOnInput=!1,t.hide()},e.cancel=function(){e.focusOnInput=!1,t.cancel()}}angular.module("api.confirmation").controller("ConfirmationController",t),angular.module("api.confirmation").factory("Confirm",e),e.$inject="$mdDialog".split(", "),t.$inject=["$scope","$mdDialog","data"]}(),function(){"use strict";function e(){function e(e){return e?e.reduce(function(e,t,n,i){var a=t.value,r=t.synonyms,o="",s=r&&angular.isArray(r)&&r.length>0;if(a){a=a.replace(new RegExp('"',"g"),'""'),o+='"'+a+'"'}return(a||s)&&(o+=","),s&&(r=r.map(function(e){return'"'+e.replace(new RegExp('"',"g"),'""')+'"'}),o+=r.join(",")),o&&(o+="\n"),e+o},""):""}function t(e){return e?e.split("\n").reduce(function(e,t,n){if(t=t.trim()){'"'===t.charAt(0)&&(t=t.substring(1,t.length)),'"'===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1));var i=t.split(/"\s?,\s?"/);if(i=i.map(function(e){return e.replace(new RegExp('""',"g"),'"')}).filter(function(e){return!('"'===e||""===e)}),i.length<2)throw{message:'Wrong <a href="https://dialogflow.com/docs/entities#csv_format" target="_blank">CSV format</a>: no required value line '+(n+1)};e.push({value:i.shift(),synonyms:i})}return e},[]):[]}function n(e){return angular.toJson(e,4)}function i(e){function t(e){return e.value&&e.synonyms&&e.synonyms.length>0}if(!e)return[];var n=angular.fromJson(e);if(angular.isArray(n))return n.filter(t);if(angular.isObject(n)){if(angular.isUndefined(n.entries)||!angular.isArray(n.entries))throw{message:"Wrong JSON syntax: An entity must contain an array of entries"};if(angular.isDefined(n.synonyms)||angular.isDefined(n.value))throw{message:"Wrong JSON syntax: An entity must be entire entity's object or just an array of entries"};if(angular.isUndefined(n.name))throw{message:"Wrong JSON syntax: An entity's name is missing"};if(angular.isUndefined(n.id))throw{message:"Wrong JSON syntax: An entity's id is missing"};return n.entries.filter(t)}throw{message:"JSON is not consistent"}}return{entriesToCsv:e,csvToEntries:t,entriesToJson:n,jsonToEntries:i}}angular.module("api.conversion.entities").factory("EntitiesConversion",e)}(),function(){"use strict";function e(e,t,n){var i={autoCompletePromise:null,entity:null,paging:null},a=!1;return{setAutoCompletePromise:function(e){return i.autoCompletePromise=e,this},getAutoCompletePromise:function(){return i.autoCompletePromise},setEntity:function(e){return i.entity=e,this},getEntity:function(){return i.entity},setPaging:function(e){return i.paging=e,this},getPaging:function(){return i.paging},setInitialized:function(){return a=!0,e.$broadcast("EntitySharedServiceInitialized"),this},isInitialized:function(){return a}}}angular.module("api.entities").factory("EntitySharedService",e),e.$inject=["$rootScope","$http","urls"]}(),function(){"use strict";function e(){function e(e){var t,n,i;e&&(t=r.source,n=t.some(function(t,n){return i=n,t==e}),n&&t.splice(i,1),t.unshift(e))}function t(){return r}function n(){return angular.copy(r.source)}function i(e){angular.extend(r,{source:e})}function a(){i([])}var r={source:[],delay:0,minLength:0};return{addToHistory:e,getAutocompleteCfg:t,getHistory:n,setHistory:i,clearHistory:a}}angular.module("ui.controls").factory("HistoryService",e)}(),function(){"use strict";function e(e,t,n,i,a,r){function o(e){var t,o=a.securityUrls.loginUrl,s=a.securityUrls.logoutUrl+"/",l=a.securityUrls.apiKeyUrl+"/",c=a.usersUrls.signup,d=a.usersUrls.profile,u=a.usersUrls.account,p=a.usersUrls.subscriptionPlans,g=a.usersUrls.subscribe,m=a.usersUrls.checkCoupon,f=a.usersUrls.subscription,h=a.usersUrls.customer,v=a.usersUrls.deleteAccount,b=a.usersUrls.saveToken,y=a.usersUrls.cleanToken,w=a.usersUrls.whitelist,k=a.usersUrls.getUnassignedProjects,C=a.usersUrls.enableGoogler,$=a.usersUrls.forgotPassword,S=a.oauth.loginUrl,x=a.apiUrls.agent,E=a.apiUrls.langs,A=a.apiUrls.presetAgentNames,T=a.apiUrls.timezones,I=a.smalltalkV1V2Map,P=[o,s,c,S,$,I,".html","config.json","apiClientVersion","/api-client/retrieveAccess/userInfo","/api-client/retrieveAccess/connect","/api-client/checkGCPScope","/api-client/increment_auth_google","/api-client/checkTerms","/api-client/acceptTerms"].some(function(t){return t&&e.url.indexOf(t)>=0}),_=[x,l,d,u,p,g,m,f,h,E,T,A,v,b,y,w,C,k].some(function(t){return t&&e.url.indexOf(t)>=0});return P?(e.ignoreAuthModule=!0,e):_?e:t&&t.Authorization||n.getKey()?(t&&t.Authorization||(t=e.headers||{},e.url&&r.getClientConfig().cceUrl&&0===e.url.indexOf(r.getClientConfig().cceUrl)||(t.Authorization="Bearer "+n.getKey())),e.headers=t,e):(console.log("httpInterceptor -> no agent selected"),i.reject("no agent selected"))}function s(e){return c(e)}function l(e){return 401===e.status&&console.log("rejection.status = ",e.status),c(e),i.reject(e)}function c(e){var n,a,r;if((n=e.data)&&(a=n.status)&&(r=a.code)&&(r<200||r>299)){var o=i.reject(e);g(o,e);return o}return t&&t.showStatus?((null===e.data&&-1===e.status||null===e.data&&503===e.status)&&t.showStatus("Looks like server is unavailable, try this later","error"),""===e.data&&404===e.status&&t.showStatus("Endpoint can not be found. Probably server is unreachable","error"),e):e}function d(e,t){m.push({handlerName:e,conf:t})}function u(e){var t=_.findIndex(m,{handlerName:e});m.splice(t,1)}function p(){m=[]}function g(e,t){var n=!1;return angular.forEach(m,function(i){var a=i.conf;i.handlerName;0===t.config.url.indexOf(a.url)&&angular.isFunction(a.callback)&&(e.then(null,a.callback),n=!0)}),n}var m=[];return{request:o,response:s,responseError:l,registerHandler:d,unregisterHandler:u,unregisterAllHandlers:p}}angular.module("api.security").factory("httpInterceptor",e),e.$inject="$injector, $rootScope, CurrentUser, $q, urls, apiConfig".split(", ")}(),function(){"use strict";function e(e){function t(t,n){function i(){return a.done}var a={done:!1},r={templateUrl:"partials/importAgentTemplate.html",controller:"ImportAgentController",locals:{state:a},resolve:{agentUrl:function(){return t},clear:function(){return n}},focusOnOpen:!1};return e.show(r).then(i).catch(i)}return{importAgent:t}}function t(e,t,n,i,a,r,o,s,l){function c(e,t){var n=t.name;return n.lastIndexOf(e)==n.length-e.length}function d(t,n,i,a){var r="File "+t._file.name+" was not uploaded. "+n;e.alerts=[],e.alerts.push({type:"danger",msg:r})}function u(t,n,i,a){var o,s,l;if(n.status&&n.status.code>399)for(o=n.status.errorDetails,e.alerts=[],s=o.split("/n"),l=0;l<s.length;l++)s[l]&&e.alerts.push({type:"danger",msg:s[l]});else if(n.message){for(e.alerts=[],s=n.message.split("/n"),l=0;l<s.length;l++)s[l]&&e.alerts.push({type:"success",msg:s[l]});r.done=!0,e.done=!0}}e.clear=a,e.importAgent=function(){s.updateCurrentAgent(),e.uploader.uploadAll()},e.onEnterWord=function(){!e.done&&e.uploader.queue.length>0&&e.importAgent()},e.ok=function(){n.hide(void 0)},e.cancel=function(){n.cancel("cancel")},e.uploader=new o({url:i,queueLimit:1,onSuccessItem:u,onCancelItem:u,onCompleteItem:u,onErrorItem:d,headers:{Authorization:"Bearer "+l.getKey()},filters:[{name:"zipFilesFilter",fn:c.bind(null,".zip")}]}),e.done=!1,e.file={},e.uploadOptions={change:function(t){t.$upload(i,e.file,{allowedType:["zip"]}).then(function(t){var n,i,a;if(t&&t.data&&t.data.status&&t.data.status.code>399)for(n=t.data.status.errorDetails,e.alerts=[],i=n.split("/n"),a=0;a<i.length;a++)i[a]&&e.alerts.push({type:"danger",msg:i[a]});else if(t.data&&t.data.message)for(e.alerts=[],i=t.data.message.split("/n"),a=0;a<i.length;a++)i[a]&&e.alerts.push({type:"success",msg:i[a]})},function(n){var i="File "+t.filename+" was not uploaded. "+n;e.alerts=[],e.alerts.push({type:"danger",msg:i})})},setError:function(e,n){var i=e;switch(console.log("Error: "+e),e){case"validate":i="The file is invalid. Please, make sure that file has supported exention.";break;case"load":i="Unable to load file. No connection to the Internet";break;case"upload":401==n.status&&t.$broadcast("event:auth-loginRequired","rejection"),i=n.data&&n.data.status?n.data.status.errorDetails:"Unable to load file. Server problem";break;case"abort":i="Download aborted"}return console.log("msg: ",i),i}},e.alerts=[],e.closeAlert=function(t){e.alerts.splice(t,1)}}angular.module("api.other").factory("ImportService",e),angular.module("api.other").controller("ImportAgentController",t),e.$inject="$mdDialog".split(", "),t.$inject="$scope, $rootScope, $mdDialog, agentUrl, clear, state, FileUploader, CurrentAgentService, CurrentUser".split(", ")}(),function(e){"use strict";function t(e){var t={form:!1,valid:!1,touched:!1,maxlength:150};return{config:t,getNavButtonConfig:function(){return t.navButton},setConfig:function(n){_.assign(t,n),e(function(){t.loaded=!0})},cleanConfigBefore:function(){t.focus=!1},cleanConfig:function(){t.form=!1,t.loaded=!1,t.before=!1,t.after=!1,t.wrapperClass=!1,delete t.pattern,delete t.required,t.headerForm&&(t.headerForm.$rollbackViewValue(),t.headerForm.$setPristine(),t.headerForm.$setUntouched())},setModel:function(e){return t.model=e},setValid:function(e){return t.valid=e},setTouched:function(e){t.touched=!1!==e,t.headerForm&&t.headerForm.$invalid&&t.touched?angular.forEach(t.headerForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):t.headerForm&&!t.touched&&t.headerForm.$setUntouched()},getValid:function(){return t.valid},getTouched:function(){return t.touched},getConfig:function(){return t}}}angular.module("ui.controls").factory("InnerHeaderService",t),t.$inject=["$timeout"]}(angular),function(){"use strict";function e(e,t,n){function i(e){return o[e.toLowerCase()]}function a(){if(l)return t(function(e){e(l)});var i=n.apiUrls.langs;return e.get(i).then(function(e){return l=e.data},function(e){return console.log("LanguageService.getSupported() -> error",e),{}})}function r(){return s?t(function(e){e(s)}):e.get(n.apiUrls.timezones).then(function(e){return s=e.data},function(e){return console.log("LanguageService.getTimezones() -> error",e),{}})}var o={de:"de-DE",en:"en-US",es:"es-ES",pt:"pt-PT","pt-br":"pt-BR",ru:"ru-RU","zh-cn":"zh-CN"},s=null,l=null;return{getSupported:a,getTimezones:r,getFrcFromLing:i}}angular.module("api.other").factory("LanguageService",e),e.$inject=["$http","$q","urls"]}(),function(){"use strict";function e(){function e(e,t,n,i){var a=n.term.toLowerCase();i(e.filter(function(e){return e.toLowerCase().indexOf(a)>=0}).slice(0,t))}function t(t,n){return e.bind(null,t,n)}function n(e,t,n){e=e.toLowerCase();var i=e.length;return function(a,r){var o=a.term.toLowerCase();if(0==o.indexOf(e)){o=o.substr(i);r(t.filter(function(e){return("object"==typeof e?e.value:e).toLowerCase().indexOf(o)>=0}).slice(0,n))}else r([])}}return{limitArrayDsFactory:t,stripPrefixDsFactory:n}}angular.module("ui.controls").factory("LimitedArrayDs",e)}(),function(){"use strict";function e(e,t){var n=t.securityUrls.loginUrl,i=t.securityUrls.logoutUrl,a=t.securityUrls.apiKeyUrl+"/",r=null;return{login:function(t,i,a){var a=a||null,r="username="+encodeURIComponent(t)+"&password="+encodeURIComponent(i)+"&grant_type=password&scope=test";a&&(r+="&captcha="+encodeURIComponent(a));var o={Authorization:"Basic Y29uc29sZTpjb25zb2xl","Content-Type":"application/x-www-form-urlencoded"};return e.post(n,r,{headers:o})},logout:function(){return e.get(i)},currentUser:function(){return r||(r=e.get(a).then(function(e){return r=null,e})),r}}}angular.module("api.security").factory("LoginData",e),e.$inject=["$http","urls"]}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p){function g(){return n.cacheAgents().then(function(e){var t=e.data.agents;if(!(t&&t.length>0))return i.setKey(null),s.reject("currentAgentKey is null because no one agent found.");var n=i.getCurrentAgentId(),a=n?t.find(function(e){return e.id==n}):null;if(a&&a.primaryKey){var r=a.primaryKey;i.setKey(n),console.log("LoginService initialize < currentKey",r)}else{var o=t[0].id;console.log("LoginService initialize > setKey",o),i.setKey(o,t[0].id)}},null)}function m(){l.restorePath()||n.cacheAgents().then(function(){var e=i.getCurrentAgentId();if(!e){
var t=c.getCurrentAgent();e=t?t.id:null}e?r.go("auth.workPlace.agent.intent_list",{agentId:e}):r.go("auth.workPlace.get_started")})}function f(t,n,i){e.post(p.usersUrls.cleanToken).finally(function(){var a={};a.Authorization="Bearer "+n.data.access_token,e.post(p.usersUrls.saveToken,null,{headers:a}).then(h.bind(this,t,n,i)).catch(b)})}function h(e,t,n){i.setCurrentUserEmail(e),v(e,t,n)}function v(e,t,r){o.loginConfirmed(),a.getProfile().then(function(e){var t=e.data.profile||{},n=_.capitalize(t.firstName),i=_.capitalize(t.lastName);if(t.planId&&!t.planName){var a=t.planId.split("_")[0];t.planName=_.capitalize(a)}var o=t.planId&&t.planId.split("_")[1],s={name:d.makeFullName(n,i),firstName:n,lastName:i,company:t.company,planName:t.planName,planInterval:o};d.fromSlackLanding()?s.source="slack":d.fromFacebookLanding()&&(s.source="facebook");var l=u.getTraits();_.assign(s,{email:t.email,premium:t.planName?1:0,agents_created:l.agents_created||0,intents_created:l.intents_created||0,entities_created:l.entities_created||0,console_messages_sent:l.console_messages_sent||0,visited_logs:l.visited_logs||0,visited_domains:l.visited_domains||0}),u.identify(t.email,s),r=r||"email",u.track("USER_SIGNED_IN",{method:r})}),n.cacheAgents().then(function(e){if(d.isApiStatusOk(e))return s.reject(e);var t=i.getKey(),n=e.data.agents;!t&&n.length>0&&(t=n[0].id,i.setKey(n[0].id)),m()})}function b(){window.location="logout"}return{initKey:g,goHome:m,onLoginSuccess:f,logout:b}}angular.module("api.security").factory("LoginService",e),e.$inject="$http, $mdDialog, AgentData, CurrentUser, UsersData, $state, authService, $q, RedirectAfterLoginService, CurrentAgentService, UtilsService, AnalyticsService, urls".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s){function l(n){return e.authorize(n).then(function(t){return e.login(t)}).then(function(e){var i=e.data;if(i.signup){s.trackSignup("console-api");var l=a.getCohort();o.identify(i.username,{cohort_day:l.day,cohort_week:l.week,cohort_month:l.month,cohort_year:l.year}),r.setAllTraining(!0)}t.onLoginSuccess(i.username,{data:{access_token:i.token}},n)})}function c(e){return n.oauth.networks&&n.oauth.networks.indexOf(e)>-1}function d(){var e=n.oauth.networks;return e&&e.length>0}return{oauthLogin:l,isNetworkPresent:c,isAnyNetworkPresent:d}}angular.module("api.security").factory("OauthLoginService",e),e.$inject="OauthData, LoginService, urls, UsersData, UtilsService, CurrentUser, AnalyticsService, AnalyticsServiceV2".split(", ")}(),function(){"use strict";function e(e,t){function n(){var n=["authless.login","authless.forgotPassword","auth.workPlace.support"],i=n.map(function(e){return t.get(e).url}),a=e.url();i.some(function(e){return 0==a.indexOf(e)})||(r=a)}function i(){return!!r&&(e.url(r),a(),!0)}function a(){r=""}var r;return{savePath:n,restorePath:i,clearPath:a}}angular.module("api.security").factory("RedirectAfterLoginService",e),e.$inject=["$location","$state"]}(),function(){"use strict";function e(e,t,n,i,a,r){function o(e){x=e}function s(){return S}function l(e){return e?w+y:w}function c(e,t){var n=f+h+b*e+v;return t&&(n+=y),n}function d(e,t,n,i){var a=(n.pageY,t),r=e,o=window.innerHeight,s=$(document).scrollTop();return i+=16,s+o-t<i&&(a=s+o-i),a<16&&(a=16),a-=parseInt($("body").css("top")),{left:r,top:a}}function u(e,n,o,s,l,c){k=t.defer(),C=t.defer();var d={result:k.promise,opened:C.promise,close:function(t){return m(e,d,t)}},u=t.all([u]).then(function(){_.pull(n,r.VOID,r.ANY_EXCEPT);var t=[];if(!e.hasClass("intent-param-meta-holder"))var u=a.getIntentParams(),t=u.map(function(e){return{meta:e.dataType,alias:e.name}}).filter(function(e){return!!e.meta});t=_.remove(t,function(e){return-1===_.indexOf([r.INLINE,r.IGNORE],e.meta)}),n=t.concat(n),o&&_.remove(n,{meta:o.value,alias:o.alias});var p=$(".select-parameter");l.top+="px",l.left+="px",p.css(l);var g=p.scope();g.$close=d.close,i(function(){g.$apply()}),g.activate(o,s,n,c),S=!0,C.resolve(!0)},function(e){S=!1,C.reject(e),k.reject(e)});return d}function p(e){var t=!0;return(e.meta?e.meta.value:"")===r.ANY&&x&&(t=confirm("Try to avoid using @sys.any alone in a template or annotating the entire phrase with it. Use fallback intents instead.")),t&&(x=!1,g(e)),t}function g(e){x&&(x=!1),e.meta&&_.isObject(e.meta)&&e.meta.synonyms&&(e.meta=e.meta.value),e&&(S=!1,k.resolve(e))}function m(e,t,n){k&&(x=!1),S=!1,k.reject("close")}var f=56,h=48,v=16,b=48,y=48,w=410,k=null,C=null,S=!1,x=!1;return{open:u,select:p,close:m,getMaxHeight:l,calcHeight:c,getPosition:d,isActive:s,updateMeta:o}}angular.module("ui.controls").factory("selectParameter",e),e.$inject=["$rootScope","$q","$compile","$timeout","intentParamsAutosyncService","METAS"]}(),function(){"use strict";function e(e){return function(e){angular.extend(this,{id:e.id,value:e.value,text:e.text,color:e.color,start:e.start,stop:e.stop,type:e.type})}}angular.module("ui.controls").factory("Selection",e),e.$inject=[]}(),function(){"use strict";function e(){return{placeCaretAtEnd:function(e,t){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var n=document.createRange();n.selectNodeContents(e),t&&n.collapse(!1);var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}else if(void 0!==document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(e),t&&a.collapse(!1),a.select()}},placeCaretAtStart:function(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!0);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(e),i.collapse(!0),i.select()}}}}angular.module("api.other").factory("SelectionTools",e)}(),function(){"use strict";function e(e,t,n){e.message=n,e.closeToast=function(){t.hide()}}function t(e,t){function n(n,o,l){l||(l=!1),n&&"too many projects"===n.toLowerCase()&&(n='You\'ve reached the limit of GCP projects. If you need more projects, click <a href="https://support.google.com/cloud/answer/6330231?hl=en#request_more_projects" target="_blank">here</a>',l=!0),o=a(o),e.show({controller:"StatusToastCtrl",parent:t[0].querySelector(".navbar.navbar-default .container"),template:r(i(o),l),hideDelay:"error"===o?0:c,position:s,locals:{message:n}})}function i(e){return o+a(e)}function a(e){return l.indexOf(e)>=0?e:"info"}function r(e,t){var n='<md-toast md-theme="'+e+'" class=" '+e+' ">';return n+=t?'<span class="flex" ng-bind-html="message"></span>':'<span class="flex white-space-pre-line">{{message}}</span>',n+='<button class="md-action md-button ng-scope  '+e+' md-ink-ripple"ng-click="closeToast()"<span class="ng-binding ng-scope">OK</span></button></md-toast>'}var o="toast-",s="bottom right",l=["error","success","info"],c=5e3;return{showStatus:n}}angular.module("api.material").controller("StatusToastCtrl",e).factory("statusesService",t),e.$inject=["$scope","$mdToast","message"],t.$inject=["$mdToast","$document"]}(),function(){"use strict";function e(e){function t(t,n,i,a){function r(){s&&s(),o&&e.cancel(o)}var o=null,s=null;return r(),s=t.$watch(function(){return n.model},function(t,r){function s(t){var r=angular.copy(n.model);angular.equals(t,r)?(o=void 0,i(r)):o=e(s.bind(null,r),a)}angular.equals(t,r)||o||(o=e(s.bind(null,angular.copy(t)),a))},!0),t.$on("$destroy",function(){r()}),r}return{startWatching:t}}angular.module("api.other").factory("StopEditingDetectorService",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){function e(e,t){if(!e)return[];var n=e.match(t);if(!n)return[];var i=0,a=0;return n.map(function(t,n){return i=a,i=e.indexOf(t,i),a=i+t.length,{id:n,word:t,start:i,end:a}})}function t(t,n,i){var a=e(n,i),r=-1;return a.some(function(e,n){return r=n,t>=e.start&&t<=e.end})?r:-1}function n(t,n,i){var a=e(n,i),r=-1;return a.some(function(e,n){return r=n,t>=e.start&&t<=e.end})?a[r]:{}}return{getCurrentWord:t,getCurrentWordHash:n}}angular.module("apiApp").factory("TextcompleteService",e)}(),function(){"use strict";function e(e,t,n,i){function a(){Mousetrap.bindGlobal(["ctrl+s","command+s"],function(e){})}function r(e){Mousetrap.stopCallback=function(e,t,n){return!1},Mousetrap.bindGlobal(["ctrl+s","command+s"],function(t){t.preventDefault(),n(e,0)})}function o(n,i,a,r){s(),u=a;var o=l(r?r(i):i);return d=e.$on("$stateChangeStart",function(t,n,a,c,d){var u=r?r(i):i,g=l(u);o===g||confirm(p)?s():(e.$emit("$stateChangeError"),t.preventDefault())}),c=function(){return o!==l(i)},t.onbeforeunload=function(e){var t=r?r(i):i,n=l(t);if(o!==n)return void 0===e&&(e=window.event),null!=e&&(e.returnValue=p),p},n.$on("$destroy",function(){s()}),s}function s(){d&&d(),u&&u(),t.onbeforeunload&&(t.onbeforeunload=null),c&&(c=void 0)}function l(e){return angular.toJson(e)}var c,d,u,p="Are you sure you want to navigate away from this page without saving?";return{isChanged:function(){return c&&c()},registerSaveShortcut:r,unregisterSaveShortcut:a,register:o,deregister:s}}angular.module("apiApp").factory("unsavedChanges",e),e.$inject="$rootScope, $window, $timeout, UtilsService".split(", ")}(),function(){"use strict";function e(e,t){e.code=t.code,e.errorDetails=t.errorDetails,e.errorID=t.errorID,e.errorType=t.errorType}angular.module("api.other").controller("ErrorController",e),e.$inject=["$scope","$stateParams"]}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u){function p(){i.show({templateUrl:"partials/pricing.html",controller:"PricingController",locals:{profile:e.userProfile}}).then(function(e){})}function g(){function e(e){console.log("select agent > setKey",e.id),o.setKey(e.id,e.id),s.updateCurrentAgent(),t.go("auth.workPlace.agent.intent_list",{agentId:e.id})}function n(e){console.log("edit agent > setKey",e.id),o.setKey(e.id,e.id),t.go("auth.workPlace.agent_edit",{agentId:e.id})}return r.cacheAgents().then(function(t){if(!t.data.status||200!=t.data.status.code)return[];v=t.data&&t.data.agents||[],m();var i=v.map(function(t){return{key:t.id,label:t.name,actionFn:e.bind(null,t),icoActionFn:n.bind(null,t)}});return a.setBreadcrumbs({dropdown:i}),v})}function m(){var e=_.capitalize(f.firstName),t=_.capitalize(f.lastName),n=l.getTraits(),i={email:f.email,name:c.makeFullName(e,t),firstName:e,lastName:t,company:f.company,premium:f.planName?1:0,premium_plan:f.planName,planName:f.planName,planInterval:h,agents_cur_number:v.length,agents_created:n.agents_created||0,intents_created:n.intents_created||0,entities_created:n.entities_created||0,console_messages_sent:n.console_messages_sent||0,visited_logs:n.visited_logs||0,visited_domains:n.visited_domains||0};l.identify(f.email,i)}e.userProfile=o.getProfile();var f=e.userProfile;e.breadcrumbs=a.getBreadcrumbs(),e.changeBreadcrumbsName=function(e,t){a.setBreadcrumbsField("element.label",e||t)},e.changeBreadcrumbsListName=function(e,t){a.setBreadcrumbsField("list.label",e||t)},e.breadcrumbs.dropdownUpdater=g,a.updateDropdown();var h=f.planId&&f.planId.split("_")[1],v=[];e.openUpgradeModal=p}angular.module("api.other").controller("IndexController",e),e.$inject="$scope, $state, $rootScope, $mdDialog, BreadcrumbsService, AgentData, CurrentUser, CurrentAgentService, AnalyticsService, UtilsService, IntentData, urls".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p,g,m,f,h,v,b,y,w,k,C,$,S,x,E,A){function T(){return e.new_agent.$valid}function I(){return d.isChanged()}function P(e,t){if(e){var n=t.filter(function(t){return t.id==e}),i=n&&n[0];i&&i.primaryKey&&(console.log("select saved agent > setKey",i.primaryKey),m.setKey(i.id,i.id),$.updateCurrentAgent())}}function D(e,t){l.updateDropdown().then(function(n){P(e,n),t&&t()})}function L(e){v.importAgent(U()+(e?"&clear=true":""),e).then(function(e){e&&$.onAgentUploadSuccess().then(function(){h.reload()})})}function U(){return f.apiUrls.downloadAgent+"/?name="+e.agent.name}function N(){return f.apiUrls.downloadVoiceCommandsAgent+"/?access_token="+e.agent.id+"&name="+(e.agent.cortana.cortanaAppName||e.agent.name)}function R(){return f.apiUrls.downloadAlexaAgent+"/?access_token="+e.agent.id+"&name="+e.agent.name}function O(){return f.apiUrls.downloadAgent+"/embedded/?access_token="+e.agent.id+"&name="+e.agent.name}function M(){if(e.userAgentCallbacks.overrideAgentSave)return e.saveProgressPromise=e.userAgentCallbacks.overrideAgentSave(),e.saveProgressPromise;var t=c.getValid();e.new_agent.$setValidity("name",t);var n=e.isEdit?e.updateAndEditAgent():e.addAndEditAgent();if(e.saveProgressPromise=n,n)return n.then(function(){$.updateCurrentAgent()});window.scope=e,scope.new_agent.$error.name?e.showStatus("Agent name can not be blank and can not contain whitespaces","error"):e.showStatus("There were some errors during agent saving","error")}function F(t){if(t&&t.data&&t.data.agent){e.agent=t.data.agent;var n=t.data.prodAgent||null;n&&(e.prodAgent=n,e.prodClientTokenConf&&e.prodClientTokenConf.text&&(e.prodClientTokenConf.text=e.prodAgent.secondaryKey))}}e.isMultibranchingAvailable=!!m.getProfile().isMultibranchingAvailable||!!m.getProfile().isTestingInfoAvailable,e.isTestingInfoAvailable=!!m.getProfile().isTestingInfoAvailable,e.isAssistantTestingAvailable=!!m.getProfile().isAssistantTestingAvailable||!!m.getProfile().isTestingInfoAvailable,e.isLogSettingsAvailable=!!m.getProfile().isLogSettingsAvailable;var j={IS_PRIVATE:!0,CUSTOM_CLASSIFIER_MODE:"use.after",CUSTOM_CLASSIFIER_MIN_CONFIDENCE:.3},B={label:"Save",callback:M};if(e.isEdit=u,e.breadcrumbsPlaceholder="Agent name",e.saveTouched=!1,e.isCustomClassifierAvailable=f.customClassifierEnabled,e.analyticsTrack=S.track,e.timezones=C,e.limitsManager=x,u?($.checkOwned().then(function(t){e.isAgentOwned=t}),$.checkReadOnly().then(function(t){e.isAgentReadOnly=t,B.disabled=t})):(e.isAgentOwned=!0,e.isAgentReadOnly=!1),e.filteredTimezones=function(n){return n?t("filter")(e.timezones,n):e.timezones},"languages"===i.tab&&(e.tabChosen=i.tab),e.openSharingTab=function(){if(e.agent.cloudProjectId)return void(e.tabChosen="share");E.showProjectLinkPopup(e.agent).then(function(){e.tabChosen="share"}).catch(angular.noop)},e.startAgentTraining=function(){M().then(function(){o.startAgentTraining().then(function(){$.startIsAgentInTrainingPolling(!0)}).catch(function(){e.showStatus("Agent is currently in training","error")})})},e.timeZoneChange=function(t){void 0!==t&&void 0!==t.value?e.agent.defaultTimezone=t.value:e.agent.defaultTimezone=""},c.setTouched(!1),w.registerPopupErrorHandler(e,"agentErrorHandler",f.apiUrls.agent),w.registerPopupErrorHandler(e,"agentPrivateErrorHandler",f.apiUrls.agentPrivate),!p.status||p.status>=200&&p.status<300){F(p),void 0===e.agent.isPrivate&&(e.agent.isPrivate=j.IS_PRIVATE),e.agent.customClassifierMode=e.agent.customClassifierMode||j.CUSTOM_CLASSIFIER_MODE,e.agent.mlMinConfidence=e.agent.mlMinConfidence||j.CUSTOM_CLASSIFIER_MIN_CONFIDENCE,e.agentVisible=e.agent.isPrivate?"private":"public",l.setBreadcrumbs({showAgentName:!1,list:{label:e.agent.name,href:""},element:{}}),!e.isEdit&&e.isCustomClassifierAvailable&&(e.agent.useCustomClassifier=!0),e.isEdit?S.track("AGENT_AGENT_OPENED",{agent_name:e.agent.name,lang:e.agent.language}):(e.agent.intentParamsAutoSync=!0,S.track("AGENT_STARTED_CREATING"));var z;z=e.isEdit?e.agent.defaultTimezone:function(){var t=(new Date).getTimezoneOffset(),n=t%60,i=Math.abs(Math.floor(t/60))+":"+(n>0?n:"00");t=t<0?"GMT+"+i:t>0?"GMT-"+i:"GMT"+i;var a=_.find(e.timezones,function(e){return _.includes(e.label,t)});return a?a.value:void 0}(),z=z||"America/New_York",e.selectedTimezone=_.find(e.timezones,function(e){return e.value===z}),e.timeZoneChange(e.selectedTimezone),d.register(e,e.agent)}e.isMlSettingsAvailable=function(){if(!e.agent)return!1;var t=$.getCurrentLanguage(),n=$.getCurrentRootLanguageString();return t&&f.mlClassifierSupportedLangs.indexOf(t)>=0||n&&f.mlClassifierSupportedLangs.indexOf(n)>=0},e.isAgentValid=T;var q={text:"",success:function(t){e.showStatus("Key copied","success")},error:function(t){e.showStatus("The browser does not support copying","error")}};e.redirectUrlConf=angular.extend({},q),e.clientTokenConf=angular.extend({},q),e.clientTokenConf.text=e.agent.secondaryKey,e.prodClientTokenConf=angular.extend({},q),e.prodAgent&&e.prodAgent.secondaryKey&&(e.prodClientTokenConf.text=e.prodAgent.secondaryKey),e.developerTokenConf=angular.extend({},q),e.developerTokenConf.text=e.agent.primaryKey,e.isAgentUnsaved=I,e.updateVisibleAgent=function(){e.agent.isPrivate=!e.agent.isPrivate},e.refreshSecondaryKey=function(t){var n=!(!t||!t.prod),i={message:"Are you sure you would like to refresh key? This will destroy the previous key forever!",title:"Refresh access token",okLabel:"Refresh",cancelLabel:"Cancel"};s.confirmation(i).then(function(){o.refreshSecondaryKey(n?e.prodAgent:e.agent).then(function(t){n?(e.prodAgent=t.data.agent,e.prodClientTokenConf.text=e.prodAgent.secondaryKey):(F(t),e.clientTokenConf.text=e.agent.secondaryKey)})})},e.returnVal=function(e){return e},e.addAgent=function(){e.saveTouched=!0,c.setTouched(),T()&&(d.deregister(),o.addAgent(e.agent).then(function(t){S.track("AGENT_AGENT_CREATED",{agent_name:e.agent.name,lang:e.agent.language});var n=S.getTraits();return S.identify({agents_created:n.agents_created?++n.agents_created:1}),h.go("auth.workPlace.agent.intent_list",{agentId:t.data.id}),t}).then(function(e){D(e.data.id)},null))},e.addAndEditAgent=function(){if(e.saveTouched=!0,c.setTouched(),T()){e.isEdit||0!=e.agent.name.length||(e.agent.name="NewAgent");var t=o.addAgent(e.agent).then(function(t){m.setKey(t.data.id,t.data.id),S.track("AGENT_AGENT_CREATED",{agent_name:e.agent.name,lang:e.agent.language});var n=S.getTraits();return S.identify({agents_created:n.agents_created?++n.agents_created:1}),$.updateCurrentAgent(),t}).then(function(t){D(t.data.id,function(){if(e.agent.sampleData)return o.loadPresetAgent(e.agent.sampleData).then(function(n){$.updateCurrentAgent(),r.trackAgent(r.ACTION_AGENT.LOAD_SAMPLE_DATA,e.agent.sampleData),h.go("auth.workPlace.agent.intent_list",{agentId:t.data.id})},function(e){console.log(e)});h.go("auth.workPlace.agent.intent_list",{agentId:t.data.id})})},null);return d.register(e,e.agent),t}},e.updateAgent=function(){if(e.saveTouched=!0,c.setTouched(),T()){d.deregister();var t=e.agent.id;o.updateAgent(e.agent).then(function(t){return S.track("AGENT_AGENT_UPDATED",{agent_name:e.agent.name,lang:e.agent.language}),h.go("auth.workPlace.agent_list"),t}).then(function(){D(t)},null)}},e.updateAndEditAgent=function(){if(e.saveTouched=!0,c.setTouched(),T()){var t=e.agent.id,n=o.updateAgent(e.agent).then(function(n){return S.track("AGENT_AGENT_UPDATED",{agent_name:e.agent.name,lang:e.agent.language}),h.go("auth.workPlace.agent_edit",{agentId:t}),n}).then(function(){D(t)},null);return d.register(e,e.agent),n}},e.useCustomClassifierChanged=function(){if(e.agent.useCustomClassifier){var t={message:"Are you sure you would like to turn off the compatibility mode? This action cannot be undone.",title:"Are you sure?",okLabel:"Yes, I'm sure",cancelLabel:"No"};s.confirmation(t).then(function(){},function(){e.agent.useCustomClassifier=!1})}},e.cancelAgent=function(){d.deregister(),h.go("auth.workPlace.agent_list")},e.deleteAgent=function(){var t={message:'Are you sure you would like to delete agent "'+e.agent.name+'"? This will destroy agent and cannot be undone!',title:"Delete Agent",okLabel:"Delete",cancelLabel:"Cancel",controlWord:"DELETE",placeholder:"Type DELETE here and click Delete button"};s.confirmation(t).then(function(){d.deregister(),o.deleteAgent(e.agent.id).then(function(t){return $.updateCurrentAgent(),m.dropKey(),S.track("AGENT_AGENT_DELETED",{agent_name:e.agent.name,lang:e.agent.language}),h.go("auth.workPlace.agent_list"),t}).then(function(){l.updateDropdown().then(function(e){e.length>0?m.setKey(e[0].id,e[0].id):(m.setKey(null),h.go("auth.workPlace.get_started"))})})},null)},e.exportForCortana=function(e){var t={message:"The generated XML may have an incorrect structure if not filled the agent description field or fulfillment fields. Check the file before using.",title:"Export for Cortana",okLabel:"Export",cancelLabel:"Cancel",ngHref:N()};s.confirmation(t)},e.openUploadDlg=L,e.downloadAgentUrl=U,e.goDownloadAgentUrl=function(t){o.downloadAgent(e.agent.name,{legacyExport:t}).then(function(){S.track("AGENT_EXPORT_COMPLETED")}).catch(function(){e.showStatus("Error downloading agent","error")})},e.goDownloadAlexaAgentUrl=function(){document.location.href=e.downloadAlexaAgentUrl()},e.downloadVoiceCommandsAgentUrl=N,e.downloadAlexaAgentUrl=R,e.downloadEmbeddedAgentUrl=O,e.goDownloadEmbeddedAgentUrl=function(){document.location.href=e.downloadEmbeddedAgentUrl()},e.fadeInCopyConf={classes:"alert alert-general alert-dismissible fadeincopy",beforeClickLabel:"Copy key to clipboard.",afterClickLabel:"Copied to clipboard."},function(){d.registerSaveShortcut(M)}(),e.saveAgentCallback=M,e.userAgentCallbacks={onChangeLanguage:angular.noop,overrideAgentSave:null},e.agentLanguageChanged=function(){e.agent.sampleData=null,e.userAgentCallbacks.onChangeLanguage()},e.langItems=b,e.sortedKeys=Object.keys(b).sort(),e.localeItems=y,e.samplesDataItems=g,e.saveNew=function(){e.isEdit||e.agent.name===e.breadcrumbsPlaceholder||e.addAndEditAgent()},e.publishAgent=function(){$.publishAgent(e.agent).then(function(){h.reload()})},function(){e.headerConfig=c.config,e.headerConfig.model=e.agent.name,e.$watch("agent.name",function(t){e.headerConfig.model=t}),e.$watch("headerConfig.model",function(t){e.agent&&(e.agent.name=t)})}(),e.headerConfig.navButton={items:[B,{label:"Cancel",callback:e.cancelAgent}],progressButtonClosure:function(){return e.saveProgressPromise},progressButtonConf:e.saveProgressConf}}angular.module("api.agents").controller("AgentController",e),e.$inject="$scope, $filter, $timeout, $stateParams, $q, AnalyticsServiceV2, AgentData, Confirm, BreadcrumbsService, InnerHeaderService, unsavedChanges, isEdit, agentPromise, samplesDataItems, CurrentUser, urls, $state, ImportService, langItemsPromise, localeItemsPromise, UtilsService, $localStorage, timezonesItemsPromise, CurrentAgentService, AnalyticsService, limitsManager, googleProjectLinksManager, $location".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d){function u(t){if(!e.agents||!t)return void(e.filteredAgents=e.agents);e.filteredAgents=e.agents.filter(function(e){return e.name&&e.name.indexOf(t.toString())>=0||e.description&&e.description.indexOf(t.toString())>=0})}function p(){e.newAgentDisabled=c.isLimitExceeded("agents",e.agents.length),g.disabled=e.newAgentDisabled}var g={label:"Create Agent",sref:"auth.workPlace.agent_new"};!function(){e.formatLocale=d.formatLocale,e.headerConfig=n.config,e.headerConfig.navButton={items:[g]},e.newAgentDisabled=!1,e.limitsManager=c,e.isSpinnerShowed=!0,e.sorting={predicate:"name",reverse:!1},e.agentsFilter=void 0,e.filteredAgents=[];var t=a.get("currentPage");e.paging={currentPage:t.get("agentsPage")||0,pageSize:20,numberOfPages:function(){return Math.ceil(e.filteredAgents?e.filteredAgents.length/e.paging.pageSize:0)}},e.selectAgent=function(e){r.setKey(e.id,e.id),s.updateCurrentAgent(),l.go("auth.workPlace.agent_edit",{agentId:e.id})},e.$watch("agentsFilter",function(e){u(e)}),e.$watch("paging.currentPage",function(e,n){t.put("agentsPage",e)})}(),function(){t.cacheAgents().then(function(t){var n=t.data;e.agents=n.agents?n.agents.map(function(e){return new o.Agent(e)}):[],u(e.agentsFilter),e.apiKey=n.apiKey,e.isSpinnerShowed=!1,p()})}()}angular.module("api.agents").controller("AgentsController",e),e.$inject="$scope, AgentData, InnerHeaderService, $filter, CacheService, CurrentUser, ModelsProvider, CurrentAgentService, $state, limitsManager, UtilsService".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u){function p(e,t){var i,a=function(){i?n.show(n.alert().title(i.title).clickOutsideToClose(!0).htmlContent(i.message).ok("Ok")):t()};e.endsWith("intent_new")?m.then(function(e){e?i=c.getReadOnlyAlertTexts():f&&c.isLimitExceeded("intents",f.intentCount)&&(i={title:c.getLimitsTitle(),message:c.getText("intents")}),a()}):e.endsWith("entity_new")?m.then(function(e){e?i=c.getReadOnlyAlertTexts():f&&c.isLimitExceeded("entities",f.entityCount)&&(i={title:c.getLimitsTitle(),message:c.getText("entities")}),a()}):e.endsWith("agent_new")?l.cacheAgents().then(function(e){var t=e.data.agents;c.isLimitExceeded("agents",t.length)&&(i={title:c.getLimitsTitle(),message:c.getText("agents")}),a()}):a()}function g(e){t.go(e,null,{reload:!0})}$("#control-panel-menu").bind("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail,n=t>0?"up":"down";("up"==n&&0==this.scrollTop||"down"==n&&this.scrollTop==this.scrollHeight-this.offsetHeight)&&e.preventDefault()}),e.upgradeUrl=s.usersUrls.upgrade,e.userProfile=a.getProfile(),e.analyticsTrack=o.track;var m=i.checkReadOnly(),f=i.getCurrentAgent();e.agentId=function(){return(f=i.getCurrentAgent())&&f.id},e.isAgentStoreAvailable=function(){var e=i.getCurrentAgent();return!!e&&u.isPublicAgentsAvailable(e)},e.isSmallTalkAvailable=function(){return u.isSmallTalkAvailable(i.getCurrentLanguage())},e.$watch("breadcrumbs",function(t){if(t){var n=t.selectedKey;t.dropdown.every(function(t){return n!=t.key||(e.ddActive=t,!1)}),e.filteredDropdown=t.dropdown.filter(function(e){return n!=e.key})}},!0),e.goSref=function(e,n){p(e,function(){var i={};n&&(i.agentId=n);var a=t.current.name===e;t.go(e,i,{reload:a})})},e.getCurrentUserKey=function(){return a.getKey()},e.reload=g,e.fromCustomLanding=function(){return r.fromSlackLanding()||r.fromFacebookLanding()},e.goCustomIntegration=function(){t.go("auth.workPlace.agent_edit",{agentId:i.getId(),tab:"integrations"})},e.getCustomIntegrationLabel=function(){return r.fromSlackLanding()?"Slack":r.fromFacebookLanding()?"Messenger":""},e.getCustomIntegrationLinkClass=function(){return r.fromSlackLanding()?"flaticon stroke slack":r.fromFacebookLanding()?"flaticon stroke facebook":""},e.getAgentTrainingStatus=function(){return i.getTrainingStatus()}}angular.module("api.other").controller("ControlController",e),e.$inject="$scope, $state, $mdDialog, CurrentAgentService, CurrentUser, UtilsService, AnalyticsService, urls, AgentData, limitsManager, PubSubHelperService, apiConfig".split(", ")}(),function(){"use strict";function e(e,t,n,i){t.getCurrentAgent()}angular.module("api.embedded").controller("EmbeddedController",e),e.$inject="$scope, CurrentAgentService, AgentData, urls".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p,g){function m(){var t=h()||[];if(!t.length)return void e.showStatus("Please, select some entities first","info");var n={message:"Are you sure you would like to delete "+t.length+" selected entities?",title:"Delete Entities",okLabel:"Delete",cancelLabel:"Cancel"};a.confirmation(n).then(function(){return i.deleteEntities(t)}).then(function(){y()})}function f(e){n.show({template:'<batch-popup batch-operation="'+e+'" subject="entity" batch-operation-ids="vm.batchOperationIds"></batch-popup>',controller:function(){this.batchOperationIds=h()},controllerAs:"vm",clickOutsideToClose:!0,escapeToClose:!0}).then(function(){y()})}function h(){return Object.keys(e.batchSelected).filter(function(t){return!!e.batchSelected[t]})}function v(t){e.filteredEntities=s("filter")(e.entities,t)}function b(){e.newEntityEnabled=!u.isLimitExceeded("entities",e.filteredEntities.length),$.disabled=e.isAgentReadOnly||!e.newEntityEnabled;var t=e.headerConfig.navButton.items,n=_.findIndex(t,function(e){return e.label===S.label});!e.isAgentReadOnly&&e.newEntityEnabled?-1==n&&t.push(S):n>-1&&t.splice(n,1)}function y(){e.setStateLoaded(!1),i.listEntities().then(function(n){e.entities=n.data,d.track("ENTITY_LIST_SHOWN",{agent_name:C.name,lang:C.language,entities_num:e.entities.length}),v(e.entitiesFilter),r.setBreadcrumbs({list:{label:"Entities",href:"#"+o.navUrls.entities},element:{}}),t(function(){e.setStateLoaded(!0),e.isSpinnerShowed=!1,b()},0)})}function w(t){var n=e.paging.currentPage*e.paging.pageSize,i=e.paging.currentPage*e.paging.pageSize+e.paging.pageSize;return t.sort(function(e,t){return e.name>t.name?1:-1}).slice(n,i)}function k(e){function t(t){if("OK"!=t.data.status&&200!=t.data.status.code){var n={message:'Cannot delete entity "@'+e.name+'" - entity is used in other entities or intents.',title:"Error",okLabel:void 0,cancelLabel:"Close"};a.confirmation(n)}}var n={message:'Are you sure you would like to delete "@'+e.name+'"?',title:"Delete Entity",okLabel:"Delete",cancelLabel:"Cancel"};a.confirmation(n).then(function(){i.deleteEntity(e.id).then(function(){d.track("ENTITY_ENTITY_DELETED",{agent_name:C.name,entity_name:e.name,lang:C.language}),y()}).catch(t)},null)}var C=c.getCurrentAgent(),$={label:"Create Entity",sref:"auth.workPlace.agent.entity_new"},S={label:"Upload Entity",sref:"auth.workPlace.agent.entity_upload"};e.isBatch=!1,e.batchSelected={},e.batchDelete=m,e.batchAction=f,e.getSelectedIds=h,p.registerPopupErrorHandler(e,"entitiesErrorHandler",o.apiUrls.entity),function(){var t=l.get("currentPage"),n=l.get("currentEntitiesListSearch");e.filteredEntities=[],e.entitiesFilter=n.get("entitiesFilter")||void 0,e.newEntityEnabled=!0,e.limitsManager=u,e.deleteEntity=k,e.paging={currentPage:t.get("entitiesPage")||0,pageSize:20,numberOfPages:function(){return Math.ceil(e.filteredEntities?e.filteredEntities.length/e.paging.pageSize:0)}},e.agentId=C&&C.id,e.isSpinnerShowed=!0,e.sorting={predicate:"name",reverse:!1},e.headerConfig.navButton={items:[$,S]},e.$watch("entitiesFilter",function(e){n.put("entitiesFilter",e),v(e)}),e.$watch("paging.currentPage",function(e){t.put("entitiesPage",e)}),c.checkReadOnly().then(function(t){e.isAgentReadOnly=t,b()})}(),y(),e.switchBatch=function(t){e.isBatch=!0===t||!1===t?t:!e.isBatch,e.isBatch||(e.batchSelected={})},e.checkAll=function(t,n){var i;i=e.entitiesFilter?n?e.filteredEntities:w(e.filteredEntities):n?e.entities:w(e.entities),e.batchSelected={},e.remainBatchUnselected=null,t&&(n||(e.remainBatchUnselected=e.entitiesFilter?e.filteredEntities.length-i.length:e.entities.length-i.length),i.forEach(function(t){e.batchSelected[t.id]=!0}))},e.goDonwloadEntity=function(e,t){d.track("ENTITY_ENTITY_DOWNLOADED",{agent_name:C.name,entity_name:e.name,lang:C.language}),i.downloadEntity(e.id,e.name,t,c.getCurrentLanguage()).catch(function(e){g.stdErrorNoReject(e)})}}angular.module("api.entities").controller("EntitiesController",e),e.$inject="$scope, $timeout, $mdDialog, EntityData, Confirm, BreadcrumbsService, urls, $filter, CacheService, CurrentAgentService, AnalyticsService, limitsManager, UtilsService, NotificationService".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p,g,m,f,h,v,b,y,w){function k(t){var n;if(!t.status||t.status>=200&&t.status<300){n=t.data,e.entity=n,n.name&&(O=n.name);var i=v.get("markupEntity").get("newEntity");i&&(v.get("markupEntity").remove("newEntity"),_.assign(n,i)),C(n),$(),r?(b.track("ENTITY_ENTITY_OPENED",{agent_name:M.name,entity_name:e.entity.name,expressions_num:e.entity.entries.length,lang:M.language}),e.newEntityEnabled&&S(1)):b.track("ENTITY_STARTED_CREATING",{agent_name:M.name,lang:M.language}),e.filteredEntries=n.entries,1==e.isTextEditor&&P(),s.register(e,n)}}function C(e){var t=e.entries;t&&angular.isArray(t)&&t.forEach(function(e,t){e.synonyms=u.synonymsReplace(e.synonyms)}),void 0===e.isEnum&&(e.isEnum=!1)}function $(){var t=_.filter(e.entity.entries,function(e){return E(e)});return e.newEntityEnabled=!y.isLimitExceeded("entries",t.length),B=null,e.newEntityEnabled}function S(t){for(var n=t||1,i=e.entity.entries,a=0;a<n;a++)i.push({value:"",synonyms:[]});e.entriesFilter="",e.filteredEntries=e.entity.entries}function x(e){return e.entries=e.entries.filter(function(e,t){return E(e)}),e}function E(e){var t=e.synonyms;return e.value||t&&t.length>0}function A(){return!!I()&&(T(),!0)}function T(){var t=e.entity.entries
;t&&t.length>0?S(1):t&&0!=t.length||S(5),e.filteredEntries=t}function I(){var t;if(N())return!1;try{t="json"==e.textEditorType?o.jsonToEntries(e.textEntity.text):o.csvToEntries(e.textEntity.text)}catch(t){return e.textError=t.message,!1}return e.entity.entries=t,e.textError=null,!0}function P(){"json"==e.textEditorType?e.textEntity.text=o.entriesToJson(e.entity.entries):e.textEntity.text=o.entriesToCsv(e.entity.entries),e.textError=null}function D(t){if(!_.has(t,"data.status"))return!1;404===t.data.status.code&&d.go("auth.workPlace.agent.intent_list",{agentId:F}),e.showStatus(t.data.status.errorDetails,"error")}function L(){return e.new_entity.$setValidity("name",h.getValid()),e.new_entity.$setValidity("value",!e.isValueError(!0)),e.saveProgressPromise=e.isEdit?e.updateEntity(!0):e.saveEntity(!0),e.saveProgressPromise}function U(){var t=null,n=_.find(e.entity.entries,function(e){var n=function(e){return R(function(n){return t=n,_.startsWith(e,n)})};return n(e.value)||angular.isDefined(_.find(e.synonyms,n))}),i=angular.isDefined(n);return i&&(e.valueTextError=j({name:t})),i}function N(){var t=null,n=e.textEntity.text&&R(function(n){return t=n,e.textEntity.text.indexOf(n)>-1});return n&&(e.textError=j({name:t})),n}function R(e){var t=[w.ANY_EXCEPT,w.ANY];return angular.isDefined(_.find(t,e))}var O,M=a.getCurrentAgent(),F=M&&M.id,j=_.template("Do not use <%= name %> in entities."),B=null;e.isEdit=r,e.isTextEditor=!1,e.textEditorType="csv",e.textEntity={},e.isJsonShown=!1,e.saveProgressPromise=!1,e.entriesFilter="",e.filteredEntries=[],e.autoCompletePromise=l,e.paging={currentPage:0,pageSize:50,numberOfPages:function(){return Math.ceil(e.entity&&e.filteredEntries?e.filteredEntries.length/e.paging.pageSize:0)}},u.registerNoopHandler(e,"entityErrorHandler"),e.tokenfieldConf={autolimit:999,limit:y.getEntrySynonymsNumber(),minLength:1,maxLength:y.getTextLength("entry")},e.limitsManager=y,e.saveTouched=!1,h.setTouched(!1),e.isCustomClassifierEnabled=function(){return a.getCurrentAgent().useCustomClassifier},e.isNameWordError=function(){return e.new_entity.$error.nameWord},e.isValueError=function(t){if(!e.isTextEditor&&!angular.isUndefined(e.new_entity)){return!(!(e.saveTouched||e.isEdit&&!e.entity)&&!t)&&(e.new_entity.$error.maxlength?(e.valueTextError="Maximum value or synonym length is "+y.getTextLength("entry")+".",!0):e.new_entity.entries_value.$invalid||!e.entity.isEnum&&e.new_entity.entries_synonyms.$invalid?(e.valueTextError="At least one value is required.",!0):U())}},e.someFilledEntry=function(){var t=void 0;return e.entity&&e.entity.entries?(e.entity.entries.some(function(e){var n=e.value&&e.synonyms&&e.synonyms.length>0;return n&&(t=e),n}),t||e.entity.entries[0]):{value:!0,synonyms:[!0]}},e.updateReferenceValue=function(e){!e.value&&e.synonyms&&e.synonyms.length>0&&(e.value=e.synonyms[0]),$()},e.focusId=-1,e.incFocusId=function(t){function n(){e.focusId=2*(t+1)}e.focusId=-1,g(function(){var i=e.entity.entries.length;t==i-1?(e.addNewEntry(),g(n,0)):t<i-1&&g(n,0)},0)},e.setFocusId=function(t){e.focusId=t},e.isTokenfieldFocused=function(t,n){return!!(e.tabPressed&&n||e.focusId==2*t)},k(i),e.addNewEntry=function(t){e.newEntityEnabled&&(e.tabPressed=!1,S(1),e.paging.currentPage=e.paging.numberOfPages()-1,t&&t())},e.activateTab=function(){e.tabPressed=!0},e.applyLimit=function(){B&&0===B.$$state.status&&g.cancel(B),B=g($,400)},e.cleanEntry=function(t){t=e.paging.pageSize*e.paging.currentPage+t,e.$broadcast("destroyOverlays");var n=e.filteredEntries[t];if(e.filteredEntries===e.entity.entries)e.filteredEntries.splice(t,1);else{var i=e.entity.entries.findIndex(function(e){return e.value===n.value});i>-1&&e.entity.entries.splice(i,1),e.filteredEntries.splice(t,1)}$(),g(function(){e.$broadcast("drawOverlays")},0)},e.saveEntity=function(n){if(!e.isAgentReadOnly&&(e.saveTouched=!0,h.setTouched(),!e.new_entity.$invalid&&(!e.isTextEditor||I()))){var i=x(e.entity);s.register(e,i);var r=t.saveEntity(i,a.getCurrentLanguage()).then(function(e){if(n&&e.data.id){c.pushEntity("@"+i.name),b.track("ENTITY_ENTITY_CREATED",{agent_name:M.name,entity_name:i.name,expressions_num:i.entries.length,lang:M.language});var t=b.getTraits();b.identify({entities_created:t.entities_created?++t.entities_created:1}),d.go("auth.workPlace.agent.entity_edit",{agentId:F,entityId:e.data.id})}else d.go("auth.workPlace.agent.entity_list",{agentId:F})},D);return n?r:i}},e.updateEntity=function(n){if(!e.isAgentReadOnly&&(e.saveTouched=!0,h.setTouched(),!e.new_entity.$invalid&&(!e.isTextEditor||I()))){var i=x(e.entity);s.register(e,i);var r=t.updateEntity(i,a.getCurrentLanguage()).then(function(){n?t.getEntity(i.id,a.getCurrentLanguage()).then(function(t){i.name!==O&&(c.pullEntity("@"+O),c.pushEntity("@"+i.name)),b.track("ENTITY_ENTITY_UPDATED",{agent_name:M.name,entity_name:i.name,expressions_num:i.entries.length,lang:M.language}),k(t),e.showStatus("Entity saved","success")},D):d.go("auth.workPlace.agent.entity_list",{agentId:F})},D);return n?r:i}},e.deleteEntity=function(){function i(e){if("OK"!=e.data.status&&200!=e.data.status.code){var t={message:'Cannot delete entity "@'+a.name+'" - entity is used in other entities or intents.',title:"Error",okLabel:void 0,cancelLabel:"Close"};n.confirmation(t)}}if(!e.isAgentReadOnly){var a=e.entity,r={message:'Are you sure you would like to delete "@'+a.name+'"?',title:"Delete Entity",okLabel:"Delete",cancelLabel:"Cancel"};return n.confirmation(r).then(function(){s.deregister(),t.deleteEntity(a.id).then(function(){c.pullEntity("@"+a.name),b.track("ENTITY_ENTITY_DELETED",{agent_name:M.name,entity_name:a.name,expressions_num:a.entries.length,lang:M.language}),d.go("auth.workPlace.agent.entity_list",{agentId:F})}).catch(i)},null)}},e.cancelEntity=function(){s.deregister(),d.go("auth.workPlace.agent.entity_list",{agentId:F})},e.filterOutEmptyEntries=function(e){return x({entries:e}).entries},e.setTextEditorType=function(t){e.textError||(e.textEditorType=t)},e.$watch("isTextEditor",function(e,t){e!=t&&(e?P():A())}),e.$watch("textEditorType",function(t,n){var i;if(t!=n)try{"json"==t?(i=o.csvToEntries(e.textEntity.text),e.textEntity.text=o.entriesToJson(i)):(i=o.jsonToEntries(e.textEntity.text),e.textEntity.text=o.entriesToCsv(i))}catch(t){e.textError=t.message}}),e.updateEntitiesFromText=function(){A()},function(){e.headerConfig=h.config,e.headerConfig.model=e.entity.name;var t=y.getTextLength("entity");angular.isDefined(t)&&(e.headerConfig.maxlength=t),e.$watch("entity.name",function(t){e.headerConfig.model=t}),e.$watch("headerConfig.model",function(t){e.entity&&(e.entity.name=t)})}(),function(){function t(){e.isTextEditor=!e.isTextEditor,r.label=e.isTextEditor?"Switch to editor mode":"Switch to raw mode"}var n={label:"Save",callback:L},i={label:"Delete",callback:e.deleteEntity,hidden:!e.isEdit},r={label:"Switch to raw mode",callback:t};a.checkReadOnly().then(function(t){e.isAgentReadOnly=t,n.disabled=n.disabled||t,i.hidden=i.hidden||t}),e.headerConfig.navButton={items:[n,i,{label:"Cancel",callback:e.cancelEntity},r],progressButtonClosure:function(){return e.saveProgressPromise},progressButtonConf:e.saveProgressConf}}(),function(){s.registerSaveShortcut(L),e.$on("$destroy",function(){s.unregisterSaveShortcut()})}()}angular.module("api.entities").controller("EntityController",e),e.$inject="$scope, EntityData, Confirm, entityPromise, CurrentAgentService, isEdit, EntitiesConversion, unsavedChanges, autocompletePromise, AutocompleteData, $state, UtilsService, urls, $timeout, LimitedArrayDs, EntitySharedService, InnerHeaderService, CacheService, AnalyticsService, limitsManager, METAS".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r){e.recaptchaPublicKey=r.recaptcha.publicKey,e.responseRecaptcha=null,e.cbExpiration=function(){e.responseRecaptcha=null,a.reload()},e.setResponse=function(t){e.responseRecaptcha=t},e.resetPassword=function(t){t&&n.resetPassword(t,e.captcha).then(function(){e.resetSuccessful=!0},function(t){a.reload();var n=t.data&&t.data.status&&t.data.status.errorDetails?t.data.status.errorDetails:"Error";e.hasError=!0,i.showStatus(n,"error")})}}angular.module("api.security").controller("ForgotPasswordController",e),e.$inject=["$scope","$state","UsersData","statusesService","vcRecaptchaService","urls"]}(),function(){"use strict";function e(e,t,n,i,a,r,o){function s(){e.analyticsTrack("TUTORIAL_CREATEAGENT_PRESSED"),t.go("auth.workPlace.agent_new")}e.headerConfig=r.config,e.analyticsTrack=a.track,e.createAgentCallback=s,e.fromSlackLanding=function(){return n.fromSlackLanding()},e.fromCustomLanding=function(){return n.fromSlackLanding()||n.fromFacebookLanding()},e.getCustomIntegrationSubtitle=function(){return n.fromSlackLanding()?"Now it's time to create your first Slack bot.":n.fromFacebookLanding()?"Now it's time to create your first Messenger bot.":void 0},e.getCustomIntegrationCreateAgentTitle=function(){return n.fromSlackLanding()?"Create your Slack bot now":n.fromFacebookLanding()?"Create your Messenger bot now":void 0},e.getCustomIntegrationWatchVideoTitle=function(){return n.fromSlackLanding()?"Watch this video to learn the 3 easy steps for building your Slack bot.":n.fromFacebookLanding()?"Watch this video to learn the 3 easy steps for building your Messenger bot.":void 0},e.getCustomIntegrationLinkClass=function(){return n.fromSlackLanding()?"signup-slack-logo":n.fromFacebookLanding()?"signup-facebook-logo":""},e.startWelcomVideo=function(){}}angular.module("api.other").controller("getStartedController",e),e.$inject=["$scope","$state","UtilsService","CurrentUser","AnalyticsService","InnerHeaderService","urls"]}(),function(){"use strict";function e(e,t,n){function i(e){t.go(e,null,{reload:!0})}e.isAccountPremium=!0,e.priceLink="",n.getAccount().then(function(t){if(t.status>=200&&t.status<300){var n=t.data;e.isAccountPremium=!(!n.plans||!n.plans.length),e.priceLink=n.priceLink}}),e.reload=i}angular.module("api.other").controller("HeaderController",e),e.$inject="$scope, $state, UsersData".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p,g,m,f,h,v,b,y,w,k,C,S,x,E,A,T,I,P,D,L){function U(t){e.isCortanaEnabled=!!(ie&&ie.cortana&&ie.cortana.cortanaCompatible),e.isCortanaEnabled&&!t.cortanaCommand&&(t.cortanaCommand={navigateOrService:"NAVIGATE",target:""})}function N(){e.isWebhookAvailable=!!(ie&&ie.webhook&&ie.webhook.available)}function R(t){function n(t){e.testing=t&&(!t.status||t.status>=200&&t.status<300)&&t.data}var a;g.getProfile().isTestingInfoAvailable&&(a=t.id)&&i.intentTesting(a).then(n)}function O(t){return o.useCustomClassifier()?t.userSays?t.templates=t.userSays.map(function(e){return new n.UserSays(e)}):t.templates=t.templates.map(function(e){var t=n.UserSays.generateFromString(e);return t.hasPlainMetas()&&(t.isTemplate=!0),t}):t.templates=t.templates.map(function(e){return n.UserSays.generateFromString(e,{isTemplate:!0})}),t.templates||(t.templates=[]),t.events||(t.events=[]),e.templateFocusId=t.templates.length-1,t.responses&&t.responses.length||(t.responses=[{}]),t.responses[0].parameters||(t.responses[0].parameters=[]),t.responses[0].messages||(t.responses[0].messages=[]),t.responses[0].parameters.push({}),t.responses[0].speech?Array.isArray(t.responses[0].speech)||t.responses[0].speech&&(t.responses[0].speech=[t.responses[0].speech]):t.responses[0].speech=[],t.responses.forEach(function(e){e.affectedContexts=e.affectedContexts.map(function(e){return"string"==typeof e&&(e={name:e,lifespan:te,value:"",label:""}),e.value="",e.label="",e})}),t}function M(t){e.backupModel=angular.copy(t)}function F(){var t=e.intent.templates,n=[];return t.some(function(e){if(!e)return!1;var t=n.some(function(t){return t==e});return t||n.push(e),t})}function j(){return!!e.new_intent.$invalid&&(e.$broadcast("focusError"),L.error("Intent data is invalid."),!0)}function B(e){var t=z(e);t.length&&l.pushContexts(t);var n=e.responses[0].action;n&&l.pushAction(n)}function z(t){if(!t)return[];t.contexts||(t.contexts=[]),t=angular.copy(t);var n=e.intent.responses[0].affectedContexts,i=[];return n.forEach(function(e){e.name&&i.push(e.name)}),_.uniq(t.contexts.concat(i))}function q(e){var t=_.clone(e,!0);return t&&t.responses&&t.responses.forEach(function(e){e.parameters=e.parameters.filter(function(e){return e.name||e.value||e.defaultValue}),e.speech=e.speech.filter(function(e){return!!e}),e.parameters=e.parameters.filter(function(e){return e.prompts&&e.prompts.length>0&&(e.prompts=e.prompts.filter(function(e){return _.isString(e)&&e.trim()})),!0}),e.parameters=e.parameters.map(function(e){return e.auto&&e.valueModifier?(e.value+="."+e.valueModifier,delete e.valueModifier,e):e})}),t&&t.templates&&t.templates.length>0&&(t.name||(t.name=A.glueClean(t.templates[0])),t.templates=t.templates.filter(function(e){return A.glueClean(e).trim()}).map(function(e){return _.isArray(e.data)&&(e.data[e.data.length-1].text=e.data[e.data.length-1].text.replace(/\s+$/g,"")),e})),o.useCustomClassifier()?(t.userSays=t.templates,t.templates=[]):(t.templates=t.templates.map(function(e){return A.glueClean(e)}),t.userSays=[]),t}function V(t){if(!e.intent.name&&t){if(!(t=A.glueClean(t)))return;e.intent.name=t,e.changeBreadcrumbsName(t,e.breadcrumbsPlaceholder)}}function K(e,t){return m.getAliasesFromNode(C.collectTreeMeta(t)).map(function(e){return e.alias}).filter(function(e,t,n){return n.indexOf(e)===t&&"<missing null>"!==e}).map(function(e){return"$"+e}).forEach(function(t){e.some(function(e){return t===e})||e.push(t)}),e}function H(e){return e.reduce(function(e,t,n,i){return K(e,A.glueParserReady(t))},[])}function W(t){function n(t,n,i){var a={required:!1,dataType:i,name:t,value:"$"+n,defaultValue:""},r=e.intent.responses[0].parameters;0===r.length||r[r.length-1].name?r.push(a):r.splice(r.length-1,0,a)}var i=C.collectTreeMeta(t),a=m.getAliasesFromNode(i),r=Y();a.forEach(function(t){var i,a,o,s,l;if(i=t.alias,(s=t.meta)!==I.IGNORE&&i&&"<missing null>"!==i){var c=i.toLowerCase();l=r.some(function(e){return e.toLowerCase()==c}),l||(a=e.intent.responses.reduce(function(e,t){return e.concat(t.parameters.map(function(e){return e.name}).filter(function(e){return e}))},[]),o=m.slugifyCandidateName(m.selectCandidateName(i,a)),n(o,i,s),r.push(i))}})}function Y(){return e.intent.responses.reduce(function(e,t){return e.concat(t.parameters.filter(function(e){return!e.required&&e.value&&0===e.value.indexOf("$")}).map(m.getAliasFromParam))},[]).filter(function(e,t,n){return n.indexOf(e)===t})}function G(){if(e.isCortanaEnabled){var t=A.glueParserReady(e.intent.templates.length&&e.intent.templates[0]),n=m.parseMetaFromTemplate(t);e.new_intent.$setValidity("cortanaExample",0==n.length)}else e.new_intent.$setValidity("cortanaExample",!0)}function J(){if(!angular.isUndefined(e.new_intent)){var t=[],n=!1,i=[],a=[],r=function(e,n){!e.value&&!e.defaultValue||e.name||t.push(n+1)},o=function(){var e={};return function(t){if(!n&&angular.isDefined(t.name)){var i=t.name.toLowerCase(),a=(e[i]||0)+1;e[i]=a,n=a>1}}}(),s=function(t){if(t.dataType){if(t.dataType!==I.INLINE){var n=_.find(e.commonTemplatesConfig.entities,function(e){return _.has(e,"value")?e.value===t.dataType:e===t.dataType});angular.isUndefined(n)&&-1===a.indexOf(t.dataType)&&a.push(t.dataType)}}else t.required&&i.push(t.name)};e.intent.responses[0].parameters.forEach(function(e,t){r(e,t),o(e),s(e)}),e.unnamedParams=t.join(", "),e.new_intent.$setValidity("unnamedParams",!e.unnamedParams);var l=e.unnamedParams;e.new_intent.$setValidity("uniqueParams",l||!n),l=l||n,e.typeMismatchParams=i.join(", "),e.new_intent.$setValidity("typeMismatchParams",l||!e.typeMismatchParams),l=l||e.typeMismatchParams,e.unresolvedParamTypes=a,e.new_intent.$setValidity("unresolvedParamTypes",l||_.isEmpty(e.unresolvedParamTypes)),Q()}}function Q(){var t=e.intent.responses[0].parameters;e.newParamDisabled=P.isLimitExceeded("intentParams",t.length)}function X(t){e.richContentCallbacks.onSaveIntent();var n=_.clone(t,!0);return n.responses[0].parameters=n.responses[0].parameters.map(function(e){return delete e.auto,e}),n}var Z=v.params.fallbackIntent,ee=!1,te=5,ne=2e3,ie=o.getCurrentAgent();e.agent=ie;var ae=ie&&ie.id;e.isEdit=c,e.isContextsShown=!1,e.isPriorityShown=!1,e.isJsonShown=!1,e.breadcrumbsPlaceholder="Intent name",e.saveProgressPromise=!1,e.currentAgentId=ae,e.limitsManager=P,e.newParamDisabled=!1,e.isTestingInfoAvailable=g.getProfile().isTestingInfoAvailable,e.userSaysEditorCallbacks={onSaveIntent:function(){}},e.richContentCallbacks={onSaveIntent:function(){}},e.googleActionsCallbacks={onAfterSaveIntent:function(){}},y.registerPopupErrorHandler(e,"intentErrorHandler",b.apiUrls.intent);var re,oe={aliases:[],setFromTemplates:function(e){this.aliases=H(e)},addFromString:function(e){this.aliases=K(this.aliases,e)}};e.templatesAlias=oe;var se={initialIntentAuto:void 0,makeModelForAutoSave:function(e){return e=angular.copy(e),e.auto=this.initialIntentAuto,e}},le=new y.NameToAliasMap;e.isNameRequiredError=function(){return!1},e.saveTouched=!1,p.setTouched(!1),e.isActionError=function(){return!!e.new_intent&&(e.saveTouched&&e.new_intent.action.$invalid)},e.isWrongCortanaExample=function(){return!!e.new_intent&&(e.saveTouched&&e.new_intent.$error.cortanaExample)},e.isSpeechEmpty=function(){if(!e.intent)return!1;var t,n=e.intent.responses;return n.length<1||(t=n[0].speech)&&(0===t.length||t.every(function(e){return!e}))},function(){var t=g.getProfile();e.isHighlight=!t||!t.userConfig||void 0==t.userConfig.highlightIntentTemplate||t.userConfig.highlightIntentTemplate}(),function(t){void 0!==t.data&&void 0!==t.data.status&&void 0!==t.data.status.code&&200!==t.data.status.code&&v.go("auth.workPlace.agent.intent_list",{agentId:ae}).then(function(){e.showStatus(t.data.status.errorDetails,"error")});var n=c?"interactionsEditIntent":"interactionsNewIntent",i=(!t.status||t.status>=200&&t.status<300)&&t.data;!i.fallbackIntent&&Z&&(i.fallbackIntent=!0),ee=!!i.parentId,e.intent=O(i),M(i),U(e.intent),N(),R(e.intent),d.register(e,e.intent,void 0,X),re=w.get("interactionsIntent").get(n),re&&(w.get("interactionsIntent").remove(n),e.$on("$destroy",function(){k.clearPath()}),re=O(re),U(re),N(),y.replaceContent(e.intent,re)),oe.setFromTemplates(e.intent.templates),e.intent.state,u.setBreadcrumbs({list:{label:"Intents",href:"#"+b.navUrls.intents},element:{label:e.intent.name,href:""}}),o.startIsAgentInTrainingPolling(),e.isContextsShown=e.intent.contexts&&e.intent.contexts.length>0||e.intent.responses.some(function(e){return e.affectedContexts&&e.affectedContexts.length>0||!!e.resetContexts}),e.intent.priority=x.PRIORITY_STEP*Math.round(e.intent.priority/x.PRIORITY_STEP),e.isPriorityShown=e.intent.priority!=2*x.PRIORITY_STEP,e.$watch("intent.priority",function(t,n){"string"==typeof t&&(e.intent.priority=Number(t))}),e.commonTemplatesConfig={entities:s.entities.sort(),templatePainter:S.painterFactory(),nameToAliasMap:le,onTextcompleteCallback:function(e){e=e&&e.trim(),oe.addFromString(e)}},c?(le.initFromIntent(e.intent),E.track("INTENT_INTENT_OPENED",{agent_name:ie.name,intent_name:e.intent.name,expressions_num:e.intent.userSays.length,lang:ie.language})):E.track("INTENT_STARTED_CREATING",{agent_name:ie.name,lang:ie.language})}(r),e.tokenfieldConf={autotokens:s.contexts,autolimit:7,minLength:1,defaultLifespan:5},e.tokenfieldMenuConf={};var ce={match:/(^|\s)(\$[\w\-\.]+\.[origna]{0,7})$/,search:function(e,t){var n=e.lastIndexOf(".");if(n>=0){var i=e.substring(0,n);if(0===".original".indexOf(e.substring(n)))return void t([i+".original"])}t([e])},index:2,replace:function(e){return"$1"+e},maxCount:9},de={match:/(^|\s)(\$[\w\-]*)$/,search:y.searchFnFactory(function(){return oe.aliases},"$"),index:2,replace:function(e){return"$1"+e},maxCount:9},ue={match:/(^|\s)(#[\w\-]*)$/,search:y.searchFnFactory(function(){return e.intent.contexts.concat(e.intent.responses[0].affectedContexts.map(function(e){return e.name})).map(function(e){return"#"+e})},"#"),index:2,replace:function(e){return"$1"+e},maxCount:9};e.tcParamConf=[de,ce,ue],e.tcActionConf=[{match:/(^|\s)([\w:\-\\.]+)$/,search:y.searchFnFactory(function(){return s.actions}),index:2,replace:function(e){return"$1"+e+" "},maxCount:9}],e.tcFulfillmentConf=[de,ce,ue],e.someFilledTemplate=function(){var t=void 0;return e.intent.templates.some(function(e){return A.glueClean(e)&&(t=e),!!e}),{t:t||e.intent.templates[0]}},e.templateNotDuplicated=function(){return{t:F()?"":"not"}},e.removeOne=function(e,t){e.splice(t,1)},e.addParameter=function(t,n){e.tabPressed=!1;var i=n||1;t.parameters||(t.parameters=[]);for(var a=0;a<i;a++)t.parameters.push({});e.tabPressed=!0,Q()},e.parseAllParameters=function(){e.intent.templates.forEach(function(e){e=A.glueParserReady(e),W(e)})},e.$watch(function(){return e.intent.responses&&e.intent.responses.length>0?e.intent.responses[0].action:void 0},function(t,n){var i;void 0!==t&&t!=n&&(i=t.trim(),e.intent.responses[0].action=i)}),e.$watch("intent.contexts",function(t,n){function i(e){return angular.isArray(e)?e.map(i):angular.isString(e)?{name:e,lifespan:te}:e}function a(e){return angular.isString(e)?e:e.name}t||(t=[]),n||(n=[]);var r,o=y.mergeArrays(t,n),s=o.added;if(s.length){if(r=e.intent.responses[0].affectedContexts,P.isLimitExceeded("outputContexts",r.length))return;s.forEach(function(e){r.some(function(t){return a(e)===a(t)})||r.push(i(e))})}},!0),e.$watch("intent.cortanaCommand.navigateOrService",function(t,n){"NAVIGATE"===t?e.cortanaTargetPlaceholder="Page name":"VOICE_COMMAND_SERVICE"===t&&(e.cortanaTargetPlaceholder="Service name")}),e.saveIntent=function(){if(!e.isAgentReadOnly&&(t(function(){p.setTouched(!0)}),e.new_intent.$setValidity("name",p.getValid()),e.saveTouched=!0,!j())){d.deregister();var n=q(e.intent);i.saveIntent(n,o.getCurrentLanguage()).then(function(e){E.track("INTENT_INTENT_CREATED",{agent_name:ie.name,intent_name:n.name,expressions_num:n.userSays.length,lang:ie.language});var t=E.getTraits();E.identify({intents_created:t.intents_created?++t.intents_created:1}),k.restorePath()||v.go("auth.workPlace.agent.intent_list",{agentId:ae})},null)}},e.saveAndEditIntent=function(){if(!e.isAgentReadOnly&&(e.new_intent.$setValidity("name",p.getValid()),e.saveTouched=!0,p.setTouched(),e.validateParams(),!j())){d.deregister();var t=q(e.intent);return i.saveIntent(t,o.getCurrentLanguage()).then(function(n){B(e.intent),E.track("INTENT_INTENT_CREATED",{agent_name:ie.name,intent_name:t.name,expressions_num:t.userSays.length,lang:ie.language});var i=E.getTraits();E.identify({intents_created:i.intents_created?++i.intents_created:1}),e.showStatus("Intent saved","success"),k.restorePath()||(e.intent.id=n.data.id,v.go("auth.workPlace.agent.intent_edit",{agentId:ae,intentId:n.data.id}))},null)}},e.updateIntent=function(){if(!e.isAgentReadOnly&&(e.saveTouched=!0,p.setTouched(),!j())){d.deregister();var t=q(e.intent);i.updateIntent(t,o.getCurrentLanguage()).then(function(){E.track("INTENT_INTENT_UPDATED",{agent_name:ie.name,intent_name:t.name,expressions_num:t.userSays.length,lang:ie.language}),e.showStatus("Intent saved","success"),k.restorePath()||v.go("auth.workPlace.agent.intent_list",{agentId:ae})},null)}},e.updateAndEditIntent=function(){if(!e.isAgentReadOnly&&(e.new_intent.$setValidity("name",p.getValid()),e.validateParams(),e.saveTouched=!0,p.setTouched(),!j())){var t=q(e.intent);return i.updateIntent(t,o.getCurrentLanguage()).then(function(){B(e.intent),E.track("INTENT_INTENT_UPDATED",{agent_name:ie.name,intent_name:t.name,expressions_num:t.userSays.length,lang:ie.language}),e.showStatus("Intent saved","success"),d.register(e,e.intent,void 0,X),k.restorePath()||(se.initialIntentAuto=e.intent.auto,o.startIsAgentInTrainingPolling())},null)}},e.deleteIntent=function(){if(!e.isAgentReadOnly){var t=D.checkAndGetError(ie,e.intent),n={message:t+'Are you sure you would like to delete intent "'+e.intent.name+'"?',title:"Delete Intent",okLabel:"Delete",cancelLabel:"Cancel"};a.confirmation(n).then(function(){d.deregister();var n=t?{force:!0}:void 0;i.deleteIntent(e.intent.id,n).then(function(){D.remove(ie,e.intent),E.track("INTENT_INTENT_DELETED",{agent_name:ie.name,intent_name:e.intent.name,expressions_num:e.intent.userSays.length,lang:ie.language}),k.restorePath()||v.go("auth.workPlace.agent.intent_list",{agentId:ae})},null)},null)}},e.cancelIntent=function(){function t(){d.deregister(),k.restorePath()||v.go("auth.workPlace.agent.intent_list",{agentId:ae})}!c||!re&&y._equals(e.backupModel,e.intent)?t():(console.log("backup restored"),i.updateIntent(q(e.backupModel),o.getCurrentLanguage()).then(function(e){t()},null))},e.listIntents=function(){e.intents=intents},e.setTemplateFocusId=function(t){e.templateFocusId=t},e.setTemplate=function(t,n,i){var a,r=e.intent.templates;if(i&&13!=i.which&&9!=i.which||oe.setFromTemplates(r),i&&(13!=i.which||i.isDefaultPrevented())&&9!=i.which||n&&V(n),0==t&&G(),i){if(i.isDefaultPrevented())return!0;a=r.every(function(e){return A.glueClean(e)}),13==i.which?(i.preventDefault(),a?(e.addTemplate(),e.templateFocusId=r.length-1):t<r.length-1&&(e.templateFocusId=t+1)):9==i.which&&t==r.length-1&&a&&(e.addTemplate(),e.templateFocusId=r.length-1)}else le.updateFromTemplate(A.glueParserReady(n)),le.initFromIntent(e.intent)},e.validateParams=J,e.agentParamsAutoSync=function(){return o.intentParamsAutoSync()},function(){var n;T.subscribe("userSaysParamUpdate",function(){angular.isDefined(n)&&0===n.$$state.status&&t.cancel(n),n=t(J,ne)}),e.$on("$destroy",function(){t.cancel(n),T.unsubscribeAllFromEvent("userSaysParamUpdate")})}(),function(){function t(){if(e.userSaysEditorCallbacks.onSaveIntent(),e.richContentCallbacks.onSaveIntent(),!e.intent.name&&e.intent.templates&&e.intent.templates.length>0&&e.intent.templates[0].toString()&&(e.intent.name=e.intent.templates[0].toString(),e.headerConfig.model=e.intent.name,p.setValid(!0)),e.saveProgressPromise=e.isEdit?e.updateAndEditIntent():e.saveAndEditIntent(),e.saveProgressPromise)return e.saveProgressPromise.then(function(){e.googleActionsCallbacks.onAfterSaveIntent(),M(e.intent)}),e.saveProgressPromise;var t=$(".alert.alert-danger:visible");t.length&&window.scrollTo(0,t[0].offsetTop-100)}!function(){function n(){var e=x.getPriorityConfig();return e.items.sort(function(e,t){return e.value<t.value?1:-1}),e}function i(){e.intent.auto=!e.intent.auto,l.label=e.intent.auto?"Disable ML":"Enable ML"}e.headerConfig=p.config,e.headerConfig.model=e.intent.name;var a=P.getTextLength("intent");angular.isDefined(a)&&(e.headerConfig.maxlength=a),e.$watch("intent.name",function(t){e.headerConfig.model=t}),e.$watch("headerConfig.model",function(t){e.intent.name=t}),o.checkReadOnly().then(function(t){e.isAgentReadOnly=t,r.disabled=r.disabled||t,s.hidden=s.hidden||t,l.hidden=l.hidden||t});var r={label:"Save",callback:t},s={label:"Delete",callback:e.deleteIntent,hidden:!e.isEdit},l={label:e.intent.auto?"Disable ML":"Enable ML",callback:i};e.headerConfig.navButton={items:[r,s,{label:"Cancel",callback:e.cancelIntent},l],progressButtonClosure:function(){return e.saveProgressPromise},progressButtonConf:e.saveProgressConf},e.intent.fallbackIntent?e.headerConfig.before={templateUrl:"partials/intent/onOffpriorityChanger.html",currentPriority:!!e.intent.priority,onOffPriority:function(t){var i=n(),a=t?i.items[0]:i.items[i.items.length-1];e.intent.priority=a.value/2}}:e.headerConfig.before={templateUrl:"partials/intent/priorityChanger.html",prioritySelectConfig:n(),currentPriority:e.intent.priority,updatePriority:function(t){e.intent.priority=t,e.headerConfig.before.currentPriority=e.intent.priority}},e.headerConfig.wrapperClass="intent-editor"}(),function(){d.registerSaveShortcut(t),e.$on("$destroy",function(){d.unregisterSaveShortcut()})}()}()}angular.module("api.intents").controller("IntentController",e),e.$inject="$scope, $timeout, ModelsProvider, IntentData, Confirm, intentPromise, CurrentAgentService, autocompletePromise, AutocompleteData, isEdit, unsavedChanges, BreadcrumbsService, InnerHeaderService, CurrentUser, MetaAliasService, $interval, StopEditingDetectorService, $state, urls, UtilsService, CacheService, RedirectAfterLoginService, ParserService, ColorHelperService, IntentSharedService, AnalyticsService, AnnotateHelperService, PubSubHelperService, METAS, limitsManager, IntegrationDependencyManager, NotificationService".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p,g,m,f,h,v){function b(t){var n=e.paging.currentPage*e.paging.pageSize,i=e.paging.currentPage*e.paging.pageSize+e.paging.pageSize;return t.sort(function(e,t){return(e.name?e.name.toLowerCase():null)>(t.name?t.name.toLowerCase():null)?1:-1}).slice(n,i)}function y(){var t=k()||[];if(!t.length)return void e.showStatus("Please, select some intents first","info");var n={message:"Are you sure you would like to delete "+t.length+" selected intents?",title:"Delete Intents",okLabel:"Delete",cancelLabel:"Cancel"};r.confirmation(n).then(function(){return a.deleteIntents(t).catch(angular.noop)}).then(function(){E()})}function w(e){t.show({template:'<batch-popup batch-operation="'+e+'" subject="intent" batch-operation-ids="vm.batchOperationIds"></batch-popup>',controller:function(){this.batchOperationIds=k()},controllerAs:"vm",clickOutsideToClose:!0,escapeToClose:!0}).then(function(){a.invalidateIntentsCache(),E()})}function k(){return Object.keys(e.batchSelected).filter(function(t){return!!e.batchSelected[t]})}function C(){i.go("auth.workPlace.agent.intent_new")}function $(){i.go("auth.workPlace.agent.intent_new",{fallbackIntent:!0})}function S(){var t=e.ignoreFilter===e.filterStates.all?void 0:e.ignoreFilter===e.filterStates.fallback;e.filteredIntents=c("filter")(e.intents,{name:e.intentsFilter,fallbackIntent:t})}function x(){e.newIntentEnabled=!f.isLimitExceeded("intents",e.intents.length),R.disabled=e.isAgentReadOnly||!e.newIntentEnabled;var t=e.headerConfig.navButton.items,n=function(e){return _.findIndex(t,function(t){return t.label===e.label})},i=n(O),a=n(M);!e.newIntentEnabled||e.isBatch||e.isAgentReadOnly?(i>-1&&t.splice(i,1),a>-1&&t.splice(a-1,1)):(-1==i&&t.push(O),-1==a&&t.push(M))}function E(t){e.batchSelected={},e.pathExpandIntents=[],e.setStateLoaded(!1),a.listIntents().then(function(i){var r=i;if(t){e.pathExpandIntents.push(t);for(var s=_.find(r,{id:t});s.parentId;)e.pathExpandIntents.push(s.parentId),s=_.find(r,{id:s.parentId})}e.intents=a.structureTreeFollowUpIntents(i),e.regularIntentsCount=e.intents.reduce(function(e,t){return t.fallbackIntent?e:e+1},0),g.track("INTENT_LIST_SHOWN",{agent_name:D.name,lang:D.language,intents_num:e.intents.length}),S(e.intentsFilter),o.setBreadcrumbs({list:{label:"Intents",href:"#"+l.navUrls.intents},element:{}}),n(function(){e.setStateLoaded(!0),e.isSpinnerShowed=!1,x()},0)})}function A(e){var t=h.checkAndGetError(D,e),n={message:t+'Are you sure you would like to delete intent "'+e.name+'"?',title:"Delete Intent",okLabel:"Delete",cancelLabel:"Cancel"};r.confirmation(n).then(function(){var n=t?{force:!0}:void 0;a.deleteIntent(e.id,n).then(function(t){h.remove(D,e),g.track("INTENT_INTENT_DELETED",{agent_name:D.name,intent_name:e.name,lang:D.language}),E()})},null)}function T(t){e.ignoreFilter=t,N.put(P,t),S()}var I="intentsFilter_"+u.getId(),P="intentsIgnoreFilter_"+u.getId();e.filterStates={fallback:"IGNORE",regular:"REGULAR",all:"ALL"};var D=u.getCurrentAgent(),L=D&&D.id,U=d.get("currentPage"),N=d.get("currentIntentsListSearch"),R={label:"Create Intent",callback:C},O={label:"Create Fallback Intent",callback:$},M={label:"Upload Intent",sref:"auth.workPlace.agent.intent_upload"};e.isBatch=!1,e.batchSelected={},e.batchDelete=y,e.batchAction=w,e.getSelectedIds=k,e.switchBatch=function(t){e.isBatch=!0===t||!1===t?t:!e.isBatch,e.isBatch||(e.batchSelected={})},window.$scope=e,e.checkAll=function(t,n){var i;i=e.intentsFilter?n?e.filteredIntents:b(e.filteredIntents):n?e.intents:b(e.intents),e.batchSelected={},e.remainBatchUnselected=null,t&&(n||(e.remainBatchUnselected=e.intentsFilter?e.filteredIntents.length-i.length:e.intents.length-i.length),
i.forEach(function(t){e.batchSelected[t.id]=!0}))},m.registerPopupErrorHandler(e,"intentErrorHandler",l.apiUrls.intent),function(){e.headerConfig.navButton={items:[R,O,M]},a.getTypesFollowUpIntents(u.getCurrentLanguage()).then(function(t){e.listFollowUpIntents=a.sortTypesFollowUpIntents(t)}),e.paging={currentPage:U.get("intentsPage")||0,pageSize:20,numberOfPages:function(){return Math.ceil(e.filteredIntents?e.filteredIntents.length/e.paging.pageSize:0)}},e.isSpinnerShowed=!0,e.sorting={predicate:"name",reverse:!1},e.ignoreFilter=N.get(P)||e.filterStates.all,e.intentsFilter=N.get(I)||void 0,e.intents=[],e.regularIntentsCount=0,e.filteredIntents=[],e.newIntentEnabled=!0,e.limitsManager=f,e.agentId=L,e.deleteIntent=A,e.switchIgnoreFilter=T,e.$watch("intentsFilter",function(e){N.put(I,e),S(e)}),e.$watch("paging.currentPage",function(e){U.put("intentsPage",e)}),u.checkReadOnly().then(function(t){e.isAgentReadOnly=t,x()})}(),E(),e.goDownloadIntent=function(e,t){g.track("INTENT_INTENT_DOWNLOADED",{agent_name:D.name,intent_name:e.name,file_type:t,lang:D.language}),a.downloadIntent(e.id,e.name,t,u.getCurrentLanguage()).catch(function(e){v.stdErrorNoReject(e)})},e.getPriorityLabel=function(e){return p.getPriorityLabel(e.priority)},e.refreshIntents=function(e){E(e)}}angular.module("api.intents").controller("IntentsController",e),e.$inject="$scope, $mdDialog, $timeout, $state, IntentData, Confirm, BreadcrumbsService, CurrentUser, urls, $filter, CacheService, CurrentAgentService, IntentSharedService, AnalyticsService, UtilsService, limitsManager, IntegrationDependencyManager, NotificationService".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p){function g(t){(!t.status||t.status>=200&&t.status<300)&&(I=t,e.dropdownInputCfg.items=I.map(function(e){return e.name}))}function m(e){(!e.status||e.status>=200&&e.status<300)&&(E=e.data,f(e.data,0))}function f(e,n){function i(){A=e}function a(){T=e.filter(function(e){return!e.processed})}if(void 0===e)return!1;0==n?(i(),t(a,0)):1==n&&(a(),t(i,0)),h(n)}function h(t){switch(e.tabId=t,t){case 0:e.sessionInteractionsStore=A;break;case 1:e.sessionInteractionsStore=T}}function v(e){return e.sessionId+e.timestamp}function b(e){var t=v(e);R[t]=!R[t]}function y(e){return R[v(e)]}function w(e,t){var a,r=v(e),o=e.interactions,l=o[t].query,c=[],d=[];if(t>0)for(a=t-1;a>=0;--a){var p=o[a];if(p.intentName||p.intentId){c=p.contexts;break}}t<o.length-1&&(d=o[t+1].incomingContexts);var g=[c,d].map(function(e){return e?e.filter(function(e){return console.log(e,e.indexOf("_dialog_")>=0||e.indexOf(".dialog.")>=0),!(e.indexOf("_dialog_")>=0||e.indexOf(".dialog.")>=0)}):[]}),m={name:l,auto:!0,contexts:g[0],templates:[l],userSays:[u.UserSays.generateFromString(l)],responses:[{parameters:[],affectedContexts:g[1]}],source:null,priority:5e5},f=n.get("interactionsIntent");f.put("interactionsNewIntent",m),f.put("goBackHash",r),s.savePath(),i.go("auth.workPlace.agent.intent_new",{agentId:N})}function k(t,n){var i=v(t);e.dropdownInputCfg.interactions=t.interactions,e.dropdownInputCfg.index=n,e.dropdownInputCfg.goBackHash=i}function C(e){var t,n,i,a=new Date,r=a.getTime()-e;return r<P?"a few seconds ago":r<D?(t=Math.floor(r/_))+" minute"+(t>1?"s":"")+" ago":r<L?(n=Math.floor(r/D))+" hour"+(n>1?"s":"")+" ago":(i=Math.floor(r/L))+" day"+(i>1?"s":"")+" ago"}function S(){e.isUpdating=!0,t(function(){var t=a.getInteractions().then(m,m),n=r.listIntents().then(g,g);c.all([t,n]).then(function(){e.isUpdating=!1,e.isSpinnerShowed=!1})},0)}function x(t,n,i,r){a.removeInteraction(t).then(function(){n.interactions.splice(i,1),n.interactions.length||e.sessionInteractionsStore.splice(r,1)})}var E,A,T,I,P=9e4,_=6e4,D=36e5,L=864e5,U=d.getCurrentAgent(),N=U&&U.id,R={};e.toggleSearch=function(){e.boolSearchVisible=!e.boolSearchVisible,t(function(){$(".interactions-search-form input").focus()},0)},function(){e.reload=S,e.tabId=0,e.isSessionInteractionOpened=y,e.toggleInteraction=b,e.getSessionInteractionHash=v,e.setTabId=h,e.createNewIntent=w,e.reAssignIntent=k,e.relativeTime=C,e.removeInteraction=x,e.isSpinnerShowed=!0,e.boolSearchVisible=!1,e.sessionInteractionsStore=[],e.filterTimeout=null;var a=p.getTraits();p.identify({visited_logs:a.visited_logs?++a.visited_logs:1}),p.track("TRAINING_HISTORY_SHOWN",{agent_name:U.name,lang:U.language});var o=n.get("currentPage");e.paging={currentPage:o.get("logsPage")||0,pageSize:20,numberOfPages:function(){return void 0!==e.sessionInteractionsStore?Math.ceil(e.sessionInteractionsStore.length/e.paging.pageSize):1}},e.logsFilter=void 0;var c=n.get("interactionsIntent"),g=c.get("goBackHash");g&&(R[g]=!0,e.goBackHash=g,c.remove("goBackHash")),e.dropdownInputCfg={actionFn:function(e){var t,n=I.filter(function(t){return t.name==e});n&&n.length>0&&(t=n[0],r.getIntent(t.id).then(function(e){var t=e.data,n=this.interactions[this.index].query;if(d.useCustomClassifier()){var a=u.UserSays.generateFromString(n),r=u.UserSays.containsObject(t.userSays,a);r>-1&&t.userSays.splice(r,1),t.userSays.unshift(a)}else t.templates.unshift(n);c.put("interactionsEditIntent",t),c.put("goBackHash",this.goBackHash),s.savePath(),i.go("auth.workPlace.agent.intent_edit",{agentId:N,intentId:t.id})}.bind(this)))},interactions:[],index:-1,goBackHash:-1,items:[]},d.checkReadOnly().then(function(t){e.isAgentReadOnly=t}),e.$watch("logsFilter",function(n){t.cancel(e.filterTimeout),n&&n.length>2?e.filterTimeout=t(function(){f(l("filter")(E,n)||[],e.tabId)},500):f(E,e.tabId)}),e.$watch("paging.currentPage",function(e){o.put("logsPage",e)})}(),S()}angular.module("api.interactions").controller("InteractionsController",e),e.$inject="$scope, $timeout, CacheService, $state, InteractionsData, IntentData, UtilsService, RedirectAfterLoginService, $filter, $q, CurrentAgentService, ModelsProvider, AnalyticsService".split(", ")}(),function(){"use strict";function e(e,t,n,i){function a(){var t=i.getUrlParameter("code"),n=i.getUrlParameter("error"),a=i.getUrlParameter("state");(t||n)&&a&&"enableslackbot"===a&&(window.opener.postMessage({state:a,code:t,error:n},"*"),window.close()),e.loadingFinished=!0}e.loadingFinished=!1,jQuery(document).ready(a)}angular.module("apiApp").controller("LoadingScreenController",e),e.$inject="$scope, $mdDialog, googleAssistantPersistence, UtilsService".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l){function c(t,r){e.form.$invalid||i.login(t,r,e.captcha).then(function(e){a.onLoginSuccess(t,e)},function(t){e.captchaNeeded&&n.reload(),u++,u>=p&&(e.responseRecaptcha=null,e.captchaNeeded=!0),u>=p+1&&e.cbExpiration();var i=null;i=400==t.status&&"User is disabled"!=t.data.error_description?"Invalid Credentials":t.data.error_description,s.showStatus(i,"error")})}function d(t){r.oauthLogin(t).catch(function(t){var i=t.data&&t.data.status,a=i&&i.errorDetails;a&&s.showStatus(a,"error"),e.captchaNeeded&&n.reload()})}e.submit=c,e.oauthLogin=d,e.isNetworkPresent=r.isNetworkPresent,e.isAnyNetworkPresent=r.isAnyNetworkPresent,e.isPasswordEnabled=l.passwordEnabled,e.signupEnabled=l.signupEnabled,e.recaptchaPublicKey=l.recaptcha.publicKey,e.responseRecaptcha=!0,e.captchaNeeded=!1;var u=0,p=3;e.isRetrieveAccessAvailable=function(){return e.isPasswordEnabled||r.isNetworkPresent("slack")||r.isNetworkPresent("github")||r.isNetworkPresent("facebook")},e.setResponse=function(t){e.responseRecaptcha=t},e.cbExpiration=function(){e.responseRecaptcha=null,n.reload()},e.onSignupClick=function(){e.submitTouch=!0,e.formScope.form.$invalid},o.track("USER_SIGNIN_SHOWN")}angular.module("api.security").controller("LoginMainController",e),e.$inject="$scope, $timeout, vcRecaptchaService, LoginData, LoginService, OauthLoginService, AnalyticsService, statusesService, urls".split(", ")}(),function(){"use strict";function e(){return function(e){return e.filter(function(e){return!0!==e.wasShown})}}function t(t,n,i,a,r,o,s,l,c,d,u){function p(e,t){var n=e;n&&(n=n.replace("superuser","")),r.setBreadcrumbs({selectedKey:n,showAgentName:!t})}a.showStatus=c.showStatus,t.upgradeUrl=u.usersUrls.upgrade;var g=s.getProfile();t.googlerEnabled=g&&g.isGooglerEnabled,t.supportNotice=!1,t.googlerNotice=t.googlerEnabled,t.notifications=g.notifications,a.$on("$locationChangeStart",function(e){angular.element(document).find("md-dialog").length>0&&e.preventDefault()}),a.$on("$stateChangeStart",function(e){t.control={},t.control.isLeftPanel=!1}),t.control={},t.control.isLeftPanel=!1,t.hideLeftPanel=function(){t.control.isLeftPanel=!1},t.getAgentTrainingStatus=function(){return l.getTrainingStatus()},t.headerConfig=d.config,t.$watch(function(){return s.getKey()},function(e,t){p(e,n.is("auth.workPlace.agent_list")||n.is("auth.workPlace.agent_edit")||n.is("auth.workPlace.agent_new"))}),t.$watch(function(){return n.current},function(e,t){var n=e.name,i="auth.workPlace.agent_list"==n||"auth.workPlace.agent_edit"==n||"auth.workPlace.agent_new"==n;p(s.getKey(),i)}),t.showToolbar=function(){return e()(t.notifications).length>0},t.showError=function(e,t){return e.$error[t]},t.getCssClasses=function(e){return{"has-error":e.$invalid&&e.$dirty,"has-success":e.$valid&&e.$dirty}},t.sorting={predicate:null,reverse:!0},t.saveProgressConf={loading:"Saving...",finished:"Saved",type:"background-horizontal",recoverytime:0,aftertime:3},t.getSortingClasses=function(e,n){var i=n||t.sorting;return{sorting:e!==i.predicate,sorting_asc:e===i.predicate&&!i.reverse,sorting_desc:e===i.predicate&&i.reverse}},t.setSorting=function(e,n){var i=n||t.sorting;i.predicate=e,i.reverse=!i.reverse}}angular.module("api.other").controller("MainController",t).filter("notificationFilter",e),t.$inject="$scope, $state, $timeout, $rootScope, BreadcrumbsService, AgentData, CurrentUser, CurrentAgentService, statusesService, InnerHeaderService, urls".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l){e.profile=l,e.analyticsTrack=a.track,e.profilePlanId=e.profile.planId||"free";var c=e.profilePlanId.split("_");e.planId=c[0],e.monthly=!0,"free"!==e.profilePlanId&&(e.monthly="month"===c[1]),e.chosenMonthly=e.monthly,e.upgradeUrl=s.usersUrls.upgrade,i(function(){e.planId&&$(".pricing--single").each(function(){var t=$(this);if(t.data("plan")===e.planId)return!1;t.addClass("disabled")})}),e.upgradeTo=function(n,i){var a={};i&&(a.plan=i,a.paying=e.chosenMonthly?"monthly":"annually"),t.go(n,a,{reload:!0,location:!1})},e.cancel=function(){n.hide()}}angular.module("api.users").controller("PricingController",e),e.$inject="$scope, $state, $mdDialog, $timeout, AnalyticsService, UsersData, CurrentUser, urls, profile".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d){function u(t){e.profile=t,e.hasError=!1,e.passwordConfirm=null,e.profile.currentPassword=null,e.googlerEnabled=e.profile.isGooglerEnabled||!1,o.setProfile(e.profile)}e.availablePlansServices=a.getAvailablePlansServices(),e.getNetworks=function(){r.getNetworks().then(function(t){e.networks=t.data.networks,e.hasError=!1},function(t){e.errorDescription=t.data.status.errorDetails,e.hasError=!0})},e.updateProfile=function(t){e.saveProgress="10",a.updateProfile(t).then(function(t){a.getProfile().then(function(e){u(e.data&&e.data.profile)}),e.saveProgress="false"},function(t){e.errorDescription=t.data.status.errorDetails,e.hasError=!0,e.saveProgress="false"})},e.deleteAccount=function(){var n={message:'Are you sure you would like to delete account "'+e.profile.email+'"? This will destroy account and cannot be undone!',title:"Delete Account",okLabel:"Delete",cancelLabel:"Cancel",controlWord:"DELETE",placeholder:"Type DELETE here and click Delete button"};l.confirmation(n).then(function(){a.deleteAccount().then(function(e){o.clear(),t.go("auth",{},{reload:!0})}).catch(function(e){d.stdErrorNoReject(e)})})},e.toggleGoogler=function(){var t=!e.googlerEnabled,r=i.confirm().title("Googler role").textContent("Are you sure you want to "+(t?"enable":"disable")+" Googler role? The page will be reloaded.").cancel("Cancel").ok(t?"Enable":"Disable");i.show(r).then(function(){a.enableGoogler(t).then(function(){n.location.reload(!0)}).catch(function(n){e.googlerEnabled=!t,d.stdErrorNoReject(n)})}).catch(function(){e.googlerEnabled=!t})},e.connectNetwork=function(t){r.authorize(t).then(function(e){return r.connectNetwork(e)}).then(function(t){e.getNetworks()},function(t){var n=t.data&&t.data.status;e.errorDescription=n&&n.errorDetails,e.hasError=!0})},e.disconnectNetwork=function(t){return r.disconnectNetwork({network:t}).then(function(){e.getNetworks()},function(t){var n=t.data&&t.data.status;e.errorDescription=n&&n.errorDetails,e.hasError=!0})},e.isAnyNetworkPresent=s.isAnyNetworkPresent,u(c),e.getNetworks()}angular.module("api.users").controller("ProfileController",e),e.$inject="$scope, $state, $window, $mdDialog, UsersData, OauthData, CurrentUser, OauthLoginService, Confirm, profile, NotificationService".split(", ")}(),function(){"use strict";function e(e,t,n,i,a){t.getCurrentAgent();e.analyticsTrack=n.track}angular.module("api.speechrec").controller("SpeechRecController",e),e.$inject="$scope, CurrentAgentService, AnalyticsService, AgentData, urls".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p,g,m,f,h,v,b,y,w,k,C,S){function x(e){t.setResetContexts(!1),t.isResultHidden=!1,t.response=B.getServerResponse(e),i(function(){t.consoleResponseCallback.responseUpdated()});var n=t.response.result&&t.response.result.contexts||[];!function(){var e=[];angular.forEach(n,function(t){e.push(t.name)}),t.contextsNames=e}(),function(){t.firstTabName="",t.secondTabName="";var e=t.response.result,n=t.response.alternateResult,i="agent"===e.source||void 0===e.source;e&&i?t.firstTabName=g.capitalize(e.source||"agent"):t.secondTabName=g.capitalize(e.source),n&&(t.secondTabName=g.capitalize(n.source||"domain")),t.tab=i?"api":"knowledgeBase"}(),A(t.tab),i(function(){t.isProgressShown=!1},0)}function E(e){t.response=B.getServerResponse(e),t.consoleV1=!0,t.firstTabName="",t.secondTabName="";var n,a;i(function(){(n=e.status||e.error)&&(a=n.code)&&(a<200||a>299)?(t.isQueryError=!0,500!==a&&504!==a||x(e)):t.isQueryError=!1,t.isProgressShown=!1,t.isResultHidden=!1},200)}function A(e){var n,i=[],a=0,r={},o=t.response;if(o){if(n="knowledgeBase"==e&&o.alternateResult?o.alternateResult:o.result,angular.forEach(n.contexts||[],function(e,t){i.push(e.name),angular.forEach(e.parameters,function(e,t){++a,r[t]=e})}),t.contextsNames=i,t.allContextMap=r,t.isContextsParamsExist=a>0,t.result=n,t.speech=R(n),t.existRichResponse=!1,n.fulfillment&&n.fulfillment.messages&&n.fulfillment.messages.length){var s=n.fulfillment.messages;s&&s.length&&(t.existRichResponse=s.some(function(e){return e.type>0}))}f.track("CONSOLE_MESSAGE_SENT",{agent_name:M&&M.name||"undefined",lang:M&&M.language||"en",resolvedQuery:n.resolvedQuery,speech:t.speech,action:n.action,parameters:JSON.stringify(n.parameters),contexts:JSON.stringify(n.contexts),intent:n.metadata&&n.metadata.intentName,source:n.source,show_json_status:t.isOpenedJson?"opened":"closed",method:t.methodSent});var l=f.getTraits();f.identify({console_messages_sent:l.console_messages_sent?++l.console_messages_sent:1})}t.methodSent="text"}function T(){t.hasSpeechSupport=!1,t.sendAudioStream?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(t.hasSpeechSupport=!0):"webkitSpeechRecognition"in window&&!g.isOpera()&&(t.hasSpeechSupport=!0,j=new webkitSpeechRecognition,j.onstart=function(){i(function(){t.recognizing=!0},0)},j.onerror=function(e){},j.onend=function(){i(function(){t.recognizing=!1,t.query=""},0)},j.onresult=function(e){for(var n="",a=e.resultIndex;a<e.results.length;++a)e.results[a].isFinal&&(n+=e.results[a][0].transcript);i(function(){t.query+=n,t.query&&(t.methodSent="voice",t.speak(t.query)&&(t.speakResult=!0)&&(t.query=""))},0)})}function I(){u.checkEnabled(D()).then(function(e){t.ttsEnabled=e})}function P(){t.ttsSpeak&&u.stop(),t.ttsWait=!1,t.ttsSpeak=!1}function D(){return m.getFrcFromLing(t.currentLang)||t.currentLang}function L(){t.audioDurationMillis=Date.now()-H,t.audioDurationMillis>=59e3&&"stopped"!==z.state&&z.stopRecording(U)}function U(){a.cancel(K),t.recognizing=!1,t.audioDurationMillis=0;var e=new window.FileReader;e.onloadend=function(){var n=e.result.split(",")[1];t.methodSent="voice",t.speak(n,!0)&&(t.speakResult=!0)},e.readAsDataURL(z.getBlob()),q&&q.stop()}function N(e){if(t.sendAudioStream)if(t.recognizing)z.stopRecording(U);else{var n=function(e){q=e.getTracks()[0],z=C(e,{type:"audio",numberOfAudioChannels:1,desiredSampRate:16e3,recorderType:C.StereoAudioRecorder,mimeType:"audio/wav"}),z.setRecordingDuration(59e3,U),z.startRecording(),H=Date.now(),K=a(L,50)};t.recognizing=!0,navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1}}).then(n).catch(function(e){t.recognizing=!1,t.showStatus("Unable to access your microphone","error")})}else if(t.recognizing)j.stop();else{var i=t.requestedAgent;j.lang=i&&i.language||"en-US",t.query="",j.start()}}function R(e){return e.speech||(e.fulfillment?e.fulfillment.speech:"")}function O(){s.getCurrentAgentAsync().then(function(e){t.name=e.name,M=e,t.currentLang=M&&M.language||"en",e.enableCceIntegration&&S.getClientConfig().cceUrl?(B=k,t.sendAudioStream=!0):(B=w,t.sendAudioStream=!1),B.setAgent(M),T(),I(),t.isProgressShown=!1}),F=t.showStatus,t.isQueryError=!1,t.response=new y.ServerResponse("Not Available"),t.consoleV1=!0,t.resetContexts=!1,t.speakResult=!1,t.isProgressShown=!0,t.isResultHidden=!1,t.currentLang="en",t.methodSent="text",t.isSafari&&(t.copyCurlInputCfg={value:"",selectValue:!0}),t.tab="api",t.query="",t.recognizing=!1,t.languages=[],t.selectedLanguage="en-US"}var M,F,j,B,z,q;t.sendAudioStream=!1;c.getProfile();t.isSafari=g.isSafari(),t.autocompleteCfg=l.getAutocompleteCfg(),t.autocompleteCfg.onSelect=function(e){t.query&&(t.methodSent="text",t.speak(t.query)&&(t.speakResult=!0)&&(t.query=""))},t.clipboardConf={text:"",success:function(e){!e.text||e.text.length<8192?t.showStatus("cURL copied","success"):t.showStatus("cURL copied, be aware that the command is very long","success")},error:function(e){Clipboard.isSupported()?e.text&&e.text.length>=8192?t.showStatus("Failed to copy cURL, the command is too long","error"):t.showStatus("Failed to copy cURL","error"):t.showStatus("The browser does not support copying","error")}},t.goToResponseIntent=function(){t.requestedAgent.primaryKey;console.log("test-console !> setKey",t.requestedAgent.id),c.setKey(t.requestedAgent.id),v.go("auth.workPlace.agent.intent_edit",{agentId:t.requestedAgent.id,intentId:t.result.metadata.intentId,toScroll:"intent-response"},{inherit:!1})},t.editIntent=function(){t.requestedAgent.primaryKey;console.log("test-console !> setKey",t.requestedAgent.id),c.setKey(t.requestedAgent.id),v.go("auth.workPlace.agent.intent_edit",{agentId:t.requestedAgent.id,intentId:t.result.metadata.intentId})},t.setResetContexts=function(e){e&&t.showStatus("Contexts will be cleared with the next query","info"),t.resetContexts=e},t.speak=function(e,a,o){if(e){if(o&&13!=o.which)return!1;P(),t.isResultHidden=!0;var c=i(function(){t.isProgressShown=!0},200);a||l.addToHistory(e),t.requestedAgent=M,t.isQueryError=!1;return B.createRequest(e,s.getCurrentLanguage(),t.resetContexts,a).then(function(e){r.all([n(e),c]).then(function(e){_.has(e[0],"data")&&x(e[0].data)},function(e){_.has(e,"data")&&E(e.data)});var i=B.generateCurl(e);t.clipboardConf.text=i,t.copyCurlInputCfg&&(t.copyCurlInputCfg.value=i)}),!0}},t.consoleResponseCallback={responseUpdated:function(){},defaultPlatform:function(){}},t.changeTab=function(e){t.tab=e,A(e)},t.hasParameters=function(){return void 0!==t.result&&void 0!==t.result.parameters&&t.result.parameters===Object(t.result.parameters)&&Object.keys(t.result.parameters).length};var V=["$scope","$mdDialog","$timeout","json",function(e,t,n,i){var a=this;e.json=i,e.options={mode:"code",modes:["code"],autoHeight:!0,readOnly:!0},e.clipboardConf={text:angular.toJson(e.json,!0),success:function(e){F("Json copied","success")},error:function(e){F("The browser does not support copying","error")}},n(function(){a.contentLoaded=!0,$("md-dialog").addClass("md-content-overflow")}),e.cancel=function(){t.hide()},e.copy=function(){t.hide()}}];t.showJson=function(){t.isOpenedJson=!0;var e=t.parseResponseForShowJson(t.response);o.show({templateUrl:"templates/showJson.html",clickOutsideToClose:!0,controller:V,controllerAs:"vm",locals:{json:e}})},t.toggleShowJson=function(){t.isOpenedJson=!t.isOpenedJson,f.track("CONSOLE_SHOWJSON_PRESSED",{action:t.isOpenedJson?"opened":"closed"})},t.parseResponseForShowJson=function(e){return B.getReadableJsonResponse(e,"knowledgeBase"===t.tab)};var K,H;t.audioDurationMillis=0,t.speakButton=N,t.getSpeech=R,O(),function(){t.ttsEnabled=!1,t.ttsWait=!1,t.ttsSpeak=!1,u.setListener({onStart:function(){i(function(){t.ttsWait=!1,t.ttsSpeak=!0})},onEnd:function(){i(function(){t.ttsWait=!1,t.ttsSpeak=!1})},onError:function(e){i(function(){t.ttsWait=!1,t.ttsSpeak=!1})}}),t.playSpeech=function(e){if(""!==e){var n=D();console.log("speak (",n,")",e),t.ttsWait=!0,i(function(){u.speak(e,n)})}},t.stopSpeech=function(){u.stop()},t.speakObject={ttsEnabled:function(){return t.ttsEnabled},ttsSpeak:function(){return t.ttsSpeak},ttsWait:function(){return t.ttsWait},playSpeech:t.playSpeech,stopSpeech:t.stopSpeech},I()}(),b.subscribe(b.DEFINED_EVENTS.CURRENT_AGENT_CHANGED,function(){O(),I()})}angular.module("api.test.client").controller("TestController",e),e.$inject="$compileProvider, $scope, $http, $timeout, $interval, $q, $mdDialog, CurrentAgentService, HistoryService, CurrentUser, urls, TTSService, $filter, UtilsService, LanguageService, AnalyticsService, $location, $state, PubSubHelperService, ModelsProvider, ApiAiQueryService, CceQueryService, RecordRTC, apiConfig".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r){e.plans[n.plan]&&i.show({templateUrl:"partials/mainscreen/profile/checkout.html",locals:{planId:n.plan,coupon:n.coupon,paying:n.paying,plans:e.plans},controller:"CheckoutController"}).then(function(e){})}angular.module("api.users").controller("UpgradeController",e),e.$inject="$scope, $state, $stateParams, $mdDialog, UsersData, CurrentUser".split(", ")}(),function(){"use strict";function e(e,t,n,i,a,r,o,s,l,c,d,u,p){function g(t,n){e.alerts=[],e.alerts.push({type:t,msg:n})}function m(e){return g("success",e)}function f(e){return g("danger",e)}function h(t){var i=n.indexOf("?")>-1?"&":"?";n+=i+"lang="+c.getCurrentLanguage(),t.$upload(n,e.file,{allowedType:w}).then(function(e){e&&e.data&&e.data.status&&(e.data.status.code<200||e.data.status.code>299)?f("File "+t.filename+" was not uploaded. "+e.data.status.errorDetails):(c.updateCurrentAgent(),"intent"===d?u.track("INTENT_INTENT_IMPORTED",{agent_name:y.name,lang:y.language}):"entity"===d&&u.track("ENTITY_ENTITY_IMPORTED",{agent_name:y.name,lang:y.language}),m("File "+t.filename+" uploaded successfully."))}).catch(function(){$("input:file").val("")})}function v(){var e;"intent"===d?e="Intent with this name already exists. Do you want to overwrite the old intent with the new one?":"entity"===d&&(e="Entity with this name already exists. Do you want to overwrite the old entity with the new one?");var t={message:e,title:"Warning",okLabel:"Overwrite",cancelLabel:"Cancel"};return r.confirmation(t)}function b(e){a.checkExistEntryUpload(n,e).then(function(e){h(file)},function(e){var t=e.data;t&&t.status&&409===t.status.code&&v().then(function(){h(file)})})}var y=c.getCurrentAgent(),w="interaction"===d?["txt","zip"]:["csv","json"],k="intent"===d||"entity"===d;e.headerConfig.navButton={items:[{label:"Back",callback:function(){l.go(i)}}]},e.downloadText={},e.alerts=[],e.closeAlert=function(t){e.alerts.splice(t,1)},e.file={},e.options={fieldName:"file",change:function(n){if(window.$scope=e,window.file=n,o.getKey()&&(n._file.headers={Authorization:"Bearer "+o.getKey()}),k)if("application/json"===n._file.type){var i=new FileReader;i.onload=function(e){try{var n=JSON.parse(p.trimJson(e.target.result));n&&n.name?b(n.name):t(function(){f("Unable to load file. Please, make sure field 'name' is exists and is not empty.")})}catch(e){t(function(){f("Unable to load file: "+e.toString())})}},i.readAsText(n._file)}else{var a=n.filename.replace(/\.[^\/.]+$/,"");a&&a.length&&b(a)}else h(n)},setError:function(e,t){window.xhr=t,console.log(arguments);var n="";switch(e){case"drop":n="Drag and drop is not supported. Upgrade your browser.";break;case"validate":n="The file is invalid. Please, make sure that file has supported exention.";break;case"preview":n="Thumbnails are not supported. Upgrade your browser.";break;case"load":n="Unable to load file. No connection to the Internet";break;case"upload":401==t.status&&s.$broadcast("event:auth-loginRequired","rejection"),n=413==t.status?"The file is too big. Try again with file less size.":t.data?t.data.status.errorDetails:"Unable to load file. Server problem";break;case"abort":n="Download aborted"}return f(n),n}}}angular.module("api.other").controller("UploadController",e),e.$inject="$scope, $timeout, uploadUrl, goBackState, AgentData, Confirm, CurrentUser, $rootScope, $state, CurrentAgentService, uploadType, AnalyticsService, UtilsService".split(", ")}(),function(){"use strict";function e(){return function(e,t){for(var n in t)t[n]||(t[n]=void 0);return e}}angular.module("api.other").filter("emptyToUndefined",e)}(),function(){"use strict";function e(){return function(e,t){return t=+t,e?e.slice(t):[]}}angular.module("api.other").filter("startFrom",e)}();